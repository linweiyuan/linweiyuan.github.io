{"meta":{"title":"æ—ä¼Ÿæºçš„æŠ€æœ¯åšå®¢","subtitle":null,"description":null,"author":"æ—ä¼Ÿæº","url":"https://linweiyuan.github.io","root":"/"},"pages":[{"title":"å…³äº","date":"2022-11-04T01:56:25.134Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"about/index.html","permalink":"https://linweiyuan.github.io/about/index.html","excerpt":"","text":"å§“åï¼šæ—ä¼Ÿæº é‚®ç®±ï¼š&#x72;&#x6f;&#111;&#x74;&#64;&#x6c;&#105;&#x6e;&#119;&#101;&#x69;&#121;&#x75;&#x61;&#x6e;&#x2e;&#x63;&#x6f;&#x6d; å¤šå¹´ Java å¼€å‘ç»éªŒ å¤šå¹´ Arch Linux ç³»ç»Ÿä½¿ç”¨ç»éªŒ æ‡‚ç‚¹ Vue å’Œ React æ‡‚ç‚¹ Android åŸç”Ÿå¼€å‘ æ‡‚ç‚¹ Kubernetes ç°åœ¨åœ¨å­¦ä¹  Go å…´è¶£çˆ±å¥½ç©ç‹—"},{"title":"åˆ†ç±»","date":"2022-11-04T01:56:25.134Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"categories/index.html","permalink":"https://linweiyuan.github.io/categories/index.html","excerpt":"","text":""},{"title":"å‹é“¾","date":"2022-11-04T01:56:25.134Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"links/index.html","permalink":"https://linweiyuan.github.io/links/index.html","excerpt":"","text":""},{"title":"é¡¹ç›®","date":"2022-11-04T01:56:25.134Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"repository/index.html","permalink":"https://linweiyuan.github.io/repository/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2022-11-04T01:56:25.134Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"tags/index.html","permalink":"https://linweiyuan.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"è‡ªå®šä¹‰starterå¤„ç†å¼‚å¸¸å’Œè¯·æ±‚å“åº”æ—¥å¿—","slug":"è‡ªå®šä¹‰starterå¤„ç†å¼‚å¸¸å’Œè¯·æ±‚å“åº”æ—¥å¿—","date":"2022-10-15T17:35:34.000Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"2022/10/15/è‡ªå®šä¹‰starterå¤„ç†å¼‚å¸¸å’Œè¯·æ±‚å“åº”æ—¥å¿—.html","link":"","permalink":"https://linweiyuan.github.io/2022/10/15/%E8%87%AA%E5%AE%9A%E4%B9%89starter%E5%A4%84%E7%90%86%E5%BC%82%E5%B8%B8%E5%92%8C%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94%E6%97%A5%E5%BF%97.html","excerpt":"","text":"GitHub: https://github.com/linweiyuan/logger-spring-boot-starter å‡†å¤‡git clone https://github.com/linweiyuan/logger-spring-boot-starter.git ./gradlew publishToMavenLocalï¼ˆå…¶å®å¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„è‡ªå®šä¹‰æ„å»ºè„šæœ¬éœ€æ±‚ï¼Œæ„Ÿè§‰ maven å¥½å¾ˆå¤šï¼Œæ²¡æœ‰å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ï¼‰ ä¾èµ–å¤„ç†12345&lt;dependency&gt; &lt;groupId&gt;com.linweiyuan&lt;/groupId&gt; &lt;artifactId&gt;logger-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.1.0&lt;/version&gt;&lt;/dependency&gt; å¼‚å¸¸æ—¥å¿—å¤„ç†å¯åŠ¨ç±»ï¼ˆæˆ–è€…å…¶ä»–å«æ³•ï¼‰æ·»åŠ  @EnableExceptionLog æ³¨è§£ å¦‚æœä½¿ç”¨ @EnableExceptionLog(allowOverride = true)ï¼Œæ³¨è§£ä¸Šçš„é…ç½®å°±ä¼šå¤±æ•ˆï¼Œä»¥é…ç½®æ–‡ä»¶ä¸ºå‡†ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œä¿®æ”¹è€Œæ— éœ€é‡æ–°ç¼–è¯‘ æ”¯æŒå¦‚ä¸‹å±æ€§ 123456789linweiyuan.logger.exception.border-color=#fffffflinweiyuan.logger.exception.border-background-color=#fffffflinweiyuan.logger.exception.border-blink=truelinweiyuan.logger.exception.text-color=#fffffflinweiyuan.logger.exception.text-background-color=#fffffflinweiyuan.logger.exception.text-bold=falselinweiyuan.logger.exception.text-italic=falselinweiyuan.logger.exception.text-blink=truelinweiyuan.logger.exception.empty-space-background-color=#ffffff 123456789101112linweiyuan: logger: exception: border-color: &quot;#ffffff&quot; border-background-color: &quot;#ffffff&quot; border-blink: true text-color: &quot;#ffffff&quot; text-background-color: &quot;#ffffff&quot; text-bold: false text-italic: false text-blink: true empty-space-background-color: &quot;#ffffff&quot; å¦‚æœä½¿ç”¨ @EnableExceptionLog(showAll = true)ï¼Œåˆ™ä¼šæ‰“å°å…¨éƒ¨å¼‚å¸¸å †æ ˆï¼ˆé»˜è®¤æ˜¯ falseï¼Œä¹Ÿå°±æ˜¯åªæ‰“å°æ³¨è§£æ‰€åœ¨ç±»çš„åŒ…ç›¸å…³ï¼ŒSpring ä¸€å †ä¸šåŠ¡æ— å…³çš„ä¸æ‰“å°ï¼‰ æ³¨è§£æ”¯æŒå±æ€§ 12345678910111213@EnableExceptionLog( showAll = true, borderColor = &quot;#ffffff&quot;, borderBackgroundColor = &quot;#ffffff&quot;, borderBlink = true, textColor = &quot;#ffffff&quot;, textBackgroundColor = &quot;#ffffff&quot;, textBold = true, textItalic = true, textBlink = true, emptySpaceBackgroundColor = &quot;#ffffff&quot;, allowOverride = true) è¯·æ±‚å“åº”æ—¥å¿—è¿™ä¸ªä¸æ”¯æŒé…ç½®æ–‡ä»¶é…ç½®ï¼Œåªèƒ½åœ¨æ³¨è§£ä¸Šè¿›è¡Œ æ³¨è§£æ”¯æŒå±æ€§q 123456789101112@EnableExceptionLog( borderColor = &quot;#ffffff&quot;, borderBackgroundColor = &quot;#ffffff&quot;, borderBlink = true, textColor = &quot;#ffffff&quot;, textBackgroundColor = &quot;#ffffff&quot;, textBold = true, textItalic = true, textBlink = true, emptySpaceBackgroundColor = &quot;#ffffff&quot;, useDefaultColor = true) å¦‚æœä½¿ç”¨ @EnableExceptionLog(useDefaultColor = true)ï¼Œåˆ™ä»¥ä¸‹é»˜è®¤é…ç½®ä¼šç”Ÿæ•ˆ å“åº”ç  é¢œè‰² 2xx ç»¿ 4xx é»„ 5xx çº¢ ä½†æ˜¯åªæœ‰ API è¿”å›çš„æ˜¯ ResponseEntity æ‰ä¼šç”Ÿæ•ˆï¼Œè¯•è¿‡ç”¨ HttpServletResponseï¼Œè·å–çš„å“åº”ç å…¨æ˜¯ 200ï¼Œå¯èƒ½è¿˜è¦å†çœ‹çœ‹","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"},{"name":"Kotlin","slug":"ç¨‹åºè®¾è®¡/Kotlin","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/Kotlin/"}],"tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://linweiyuan.github.io/tags/Kotlin/"},{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://linweiyuan.github.io/tags/Spring-Boot/"},{"name":"Spring Boot Starter","slug":"Spring-Boot-Starter","permalink":"https://linweiyuan.github.io/tags/Spring-Boot-Starter/"}]},{"title":"Go+Reactå®ç°ä¸€ä¸ªåŸºç¡€çš„å‰åç«¯åˆ†ç¦»é—®å·åŠŸèƒ½","slug":"Go-Reactå®ç°ä¸€ä¸ªåŸºç¡€çš„å‰åç«¯åˆ†ç¦»é—®å·åŠŸèƒ½","date":"2022-10-05T04:13:39.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2022/10/05/Go-Reactå®ç°ä¸€ä¸ªåŸºç¡€çš„å‰åç«¯åˆ†ç¦»é—®å·åŠŸèƒ½.html","link":"","permalink":"https://linweiyuan.github.io/2022/10/05/Go-React%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E5%9F%BA%E7%A1%80%E7%9A%84%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E9%97%AE%E5%8D%B7%E5%8A%9F%E8%83%BD.html","excerpt":"","text":"æ•ˆæœå›¾ åç«¯å‰æœŸå‡†å¤‡å–ä¸€ä¸ªéšä¾¿ç‚¹çš„åå­— 1234mkdir goquestionapicd goquestionapigit initgo mod init github.com/linweiyuan/goquestionapi è¿™é‡Œå’Œæ•°æ®åº“ç›¸å…³çš„æ“ä½œä¼šä½¿ç”¨ä¸¤ä¸ªå·¥å…·ï¼Œmigrate å’Œ sqlcï¼Œå¯ä»¥ç”¨ go çš„æ–¹å¼å®‰è£…ï¼Œä½†è¿™è¾¹ä¹ æƒ¯ç”¨ pacmanï¼Œå› ä¸ºåŒ…å‡çº§å¥½ç®¡ç† 12sudo pacman -S sqlcyay -S migrate sqlc æ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆå·¥å…·ï¼Œç”Ÿæˆçš„ä»£ç ä¸­è¿æ¥æ•°æ®åº“çš„éƒ¨åˆ†ç”¨çš„æ˜¯ Golang åŸç”Ÿ sql åº“ï¼Œæ€§èƒ½æé«˜ï¼ˆå®˜æ–¹æ˜¯è¿™æ ·è¯´çš„ï¼‰ ä¸ºä»€ä¹ˆä¸ç”¨ GORMï¼Œå› ä¸ºç”±äºå¤šå¹´ Java å¼€å‘ç»éªŒå…ˆå…¥ä¸ºä¸»ï¼Œçœ‹åˆ° GORM çš„ API å¥½å¤šæ—¶å€™ä¼šè§‰å¾—è«åå…¶å¦™ï¼Œå°è¯•è¿‡å‡ éï¼Œéƒ½å¼ƒå‘äº†ï¼Œå¹¶ä¸”æ®è¯´æœ‰æ€§èƒ½é—®é¢˜ sqlc å¯ä»¥é€šè¿‡ç¼–å†™ç®€å•çš„ SQL è¯­å¥ï¼Œæ¥è‡ªåŠ¨ç”Ÿæˆæ¨¡æ¿ä»£ç ï¼Œé‚£ä¹ˆåªéœ€è¦å…³æ³¨å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å³å¯ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ sqlc.arg() çš„æ–¹å¼ç»™å ä½ç¬¦èµ·åˆ«åï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒé¡ºæ‰‹ æ•°æ®åº“ç”¨çš„æ˜¯ Postgres å¯¹äºè¿™ç§ä¸€ä¸ªé—®é¢˜å¤šä¸ªç­”æ¡ˆï¼Œä¸€å¯¹å¤šçš„ç»“æ„ï¼Œå…¶å®æˆ‘è‡ªå·±æ¯”è¾ƒå–œæ¬¢ç”¨ JSON å­—æ®µ ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ MongoDBï¼Ÿå…¶å®å·¥ä½œå¤šå¹´æ¥è§¦çš„é¡¹ç›®ï¼Œåªç”¨è¿‡ä¸€æ¬¡ï¼Œä¸æ˜¯å¾ˆç†Ÿæ‚‰ ä¸ºä»€ä¹ˆä¸ç”¨ MySQLï¼Ÿ 1234CONTAINER ID NAME CPU % MEM USAGE / LIMIT MEM % NET I/O BLOCK I/O PIDS2057f98237b3 postgres 0.02% 28.57MiB / 15.49GiB 0.18% 3.03kB / 0B 0B / 43.4MB 725959b7d7133 mysql 0.27% 159.5MiB / 15.49GiB 1.01% 6.85kB / 0B 115kB / 259MB 39ef2ecd22745f mongo 0.30% 68.66MiB / 15.49GiB 0.43% 8.25kB / 0B 4.1kB / 1.29MB 33 å¦‚æœå¼€äº† performance_schema å‘¢ï¼ˆé»˜è®¤æ˜¯å¼€ï¼‰ 12CONTAINER ID NAME CPU % MEM USAGE / LIMIT MEM % NET I/O BLOCK I/O PIDSbb4ba1c34299 mysql 0.26% 383MiB / 15.49GiB 2.42% 2.5kB / 0B 115kB / 247MB 39 ç»ƒæ‰‹è€Œå·² ç›®å‰æ‰€åœ¨å…¬å¸ï¼Œæ–°é¡¹ç›®ä¹Ÿçº·çº·ä¸Š Postgresï¼Œä¸æ¶‰åŠåˆ°é‚£äº›å‚¨å­˜è¿‡ç¨‹å‡½æ•°ä¹‹ç±»ï¼Œè½¬æ¢ä¸‹ database schema æ¦‚å¿µï¼Œå…¶å®ç”¨èµ·æ¥éƒ½æ²¡ä»€ä¹ˆåŒºåˆ« å‡†å¤‡æ•°æ®ï¼Œæ•°æ®æ˜¯ä»ç½‘ä¸Šæ‹¿çš„ï¼Œä¸»è¦æ˜¯ä¸€äº›é—®é¢˜ï¼Œç„¶åå¯¹åº”çš„é€‰é¡¹å†™æ­»äº†åˆ†å€¼ï¼Œæœ€åæ ¹æ®æ€»åˆ†æ¥åˆ¤æ–­æ€§æ ¼ï¼ˆæ€§æ ¼æµ‹è¯•è¿™ä¸œè¥¿æˆ‘æœ¬äººè§‰å¾—æä¸ºæ‰¯æ·¡ï¼Œæœ‰äº›å…¬å¸é¢è¯•è¿˜è¦åšï¼Œè«åå…¶å¦™ï¼Œå¦‚æœæˆ‘æ‰€åœ¨å…¬å¸ä¹Ÿè¦åšï¼Œé‚£æˆ‘å‰é¢ä»€ä¹ˆéƒ½æ²¡è¯´ï¼Œè¿™ä¸ªæµ‹è¯•å¥½å¾—å¾ˆï¼Œå¿…é¡»åšï¼‰ æ•°æ®å‡†å¤‡å¥½ï¼Œå°±å¯ä»¥å¯¼å…¥æ•°æ®åº“ï¼Œè¿™é‡Œç”¨çš„æ˜¯ migrateï¼Œæ‰€ä»¥å…ˆå‡†å¤‡ç¬¬ä¸€ç‰ˆçš„ SQL sqlc é…ç½®æ–‡ä»¶ 123456789version: &quot;2&quot;sql: - engine: &quot;postgresql&quot; schema: &quot;sqlc/migration&quot; queries: &quot;sqlc/query&quot; gen: go: package: &quot;sqlc&quot; out: &quot;sqlc&quot; schema æ˜¯æ•°æ®åº“å»ºè¡¨ã€åˆ è¡¨è¯­å¥ï¼Œqueries æ˜¯ä¸šåŠ¡ SQL çš„ç¼–å†™åœ°æ–¹ï¼Œç„¶å package æ˜¯ç”Ÿæˆçš„ go ä»£ç çš„åŒ…åï¼Œout å°±æ˜¯ä»£ç ç”Ÿæˆçš„æ–‡ä»¶å¤¹ 1migrate create -ext sql -dir sqlc/migration -seq init migrate å‚æ•°ï¼š -ext: æ•°æ®è„šæœ¬æ‰©å±•åï¼ˆåç¼€åï¼‰ -dir: è„šæœ¬æ–‡ä»¶æ‰€åœ¨åœ°ï¼Œé…åˆä¸Šé¢ sqlc çš„é…ç½®æ–‡ä»¶å°±æ˜¯åœ¨ sqlc&#x2F;migration é‡Œ -seq: å°±æ˜¯ä¸€ä¸ª sequenceï¼Œè‡ªå¢ æœ€åæ˜¯æ–‡ä»¶åå­— ä¸Šé¢çš„å‘½ä»¤å°±ä¼šç”Ÿæˆ 000001_init.down.sql å’Œ 000001_init.up.sql è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œup å°±æ˜¯æ–°æ”¹åŠ¨ï¼Œdown å°±æ˜¯å›æ»šï¼Œå’Œåˆ«çš„æ•°æ®åº“ migration ä¸€æ · é¦–å…ˆéœ€è¦å…ˆåˆ›å»º schemaï¼Œè¿™é‡Œ schema å« questionï¼Œè¡¨ä¹Ÿå« questionï¼ˆè¡¨åˆ™å¯ä»¥åœ¨ migration sql é‡Œåˆ›å»ºï¼‰ åˆ›å»ºå¥½ schema ä¹‹å migrate å’Œ sqlc æ‰ä¼šå¥½ä½¿ï¼Œä¸ç„¶ä¼šæœ‰å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹çš„é—®é¢˜ 1CREATE SCHEMA question; å‡†å¤‡ up sql 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255CREATE TABLE question ( id SERIAL PRIMARY KEY NOT NULL, title VARCHAR NOT NULL, answer JSON NOT NULL, score JSON NOT NULL );INSERT INTO question (title, answer, score)VALUES ( &#x27;ä½ æ›´å–œæ¬¢åƒé‚£ç§æ°´æœ&#x27;, &#x27;&#123; &quot;A&quot;: &quot;è‰è“&quot;, &quot;B&quot;: &quot;è‹¹æœ&quot;, &quot;C&quot;: &quot;è¥¿ç“œ&quot;, &quot;D&quot;: &quot;è è&quot;, &quot;E&quot;: &quot;æ©˜å­&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 10, &quot;E&quot;: 15&#125;&#x27; ), ( &#x27;ä½ å¹³æ—¶ä¼‘é—²ç»å¸¸å»çš„åœ°æ–¹&#x27;, &#x27;&#123; &quot;A&quot;: &quot;éƒŠå¤–&quot;, &quot;B&quot;: &quot;ç”µå½±é™¢&quot;, &quot;C&quot;: &quot;å…¬å›­&quot;, &quot;D&quot;: &quot;å•†åœº&quot;, &quot;E&quot;: &quot;é…’å§&quot;, &quot;F&quot;: &quot;ç»ƒæ­Œæˆ¿&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 10, &quot;E&quot;: 15, &quot;F&quot;: 20&#125;&#x27; ), ( &#x27;ä½ è®¤ä¸ºå®¹æ˜“å¸å¼•ä½ çš„äººæ˜¯&#x27;, &#x27;&#123; &quot;A&quot;: &quot;æœ‰æ‰æ°”çš„äºº&quot;, &quot;B&quot;: &quot;ä¾èµ–ä½ çš„äºº&quot;, &quot;C&quot;: &quot;ä¼˜é›…çš„äºº&quot;, &quot;D&quot;: &quot;å–„è‰¯çš„äºº&quot;, &quot;E&quot;: &quot;æ€§æƒ…è±ªæ”¾çš„äºº&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 10, &quot;E&quot;: 15&#125;&#x27; ), ( &#x27;å¦‚æœä½ å¯ä»¥æˆä¸ºä¸€ç§åŠ¨ç‰©ï¼Œä½ å¸Œæœ›è‡ªå·±æ˜¯å“ªç§&#x27;, &#x27;&#123; &quot;A&quot;: &quot;çŒ«&quot;, &quot;B&quot;: &quot;é©¬&quot;, &quot;C&quot;: &quot;å¤§è±¡&quot;, &quot;D&quot;: &quot;çŒ´å­&quot;, &quot;E&quot;: &quot;ç‹—&quot;, &quot;F&quot;: &quot;ç‹®å­&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 10, &quot;E&quot;: 15, &quot;F&quot;: 20&#125;&#x27; ), ( &#x27;å¤©æ°”å¾ˆçƒ­ï¼Œä½ æ›´æ„¿æ„é€‰æ‹©ä»€ä¹ˆæ–¹å¼è§£æš‘&#x27;, &#x27;&#123; &quot;A&quot;: &quot;æ¸¸æ³³&quot;, &quot;B&quot;: &quot;å–å†·é¥®&quot;, &quot;C&quot;: &quot;å¼€ç©ºè°ƒ&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 5, &quot;B&quot;: 10, &quot;C&quot;: 15&#125;&#x27; ), ( &#x27;å¦‚æœå¿…é¡»ä¸ä¸€ä¸ªä½ è®¨åŒçš„åŠ¨ç‰©æˆ–æ˜†è™«åœ¨ä¸€èµ·ç”Ÿæ´»ï¼Œä½ èƒ½å®¹å¿å“ªä¸€ä¸ª&#x27;, &#x27;&#123; &quot;A&quot;: &quot;è›‡&quot;, &quot;B&quot;: &quot;çŒª&quot;, &quot;C&quot;: &quot;è€é¼ &quot;, &quot;D&quot;: &quot;è‹è‡&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 5, &quot;C&quot;: 10, &quot;D&quot;: 15&#125;&#x27; ), ( &#x27;ä½ å–œæ¬¢çœ‹å“ªç±»ç”µå½±ã€ç”µè§†å‰§&#x27;, &#x27;&#123; &quot;A&quot;: &quot;æ‚¬ç–‘æ¨ç†ç±»&quot;, &quot;B&quot;: &quot;ç«¥è¯ç¥è¯ç±»&quot;, &quot;C&quot;: &quot;è‡ªç„¶ç§‘å­¦ç±»&quot;, &quot;D&quot;: &quot;ä¼¦ç†é“å¾·ç±»&quot;, &quot;E&quot;: &quot;æˆ˜äº‰æªæˆ˜ç±»&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 10, &quot;E&quot;: 15&#125;&#x27; ), ( &#x27;ä»¥ä¸‹å“ªä¸ªæ˜¯ä½ èº«è¾¹å¿…å¸¦çš„ç‰©å“&#x27;, &#x27;&#123; &quot;A&quot;: &quot;æ‰“ç«æœº&quot;, &quot;B&quot;: &quot;å£çº¢&quot;, &quot;C&quot;: &quot;è®°äº‹æœ¬&quot;, &quot;D&quot;: &quot;çº¸å·¾&quot;, &quot;E&quot;: &quot;æ‰‹æœº&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 2, &quot;C&quot;: 3, &quot;D&quot;: 5, &quot;E&quot;: 10&#125;&#x27; ), ( &#x27;ä½ å‡ºè¡Œæ—¶å–œæ¬¢åä»€ä¹ˆäº¤é€šå·¥å…·&#x27;, &#x27;&#123; &quot;A&quot;: &quot;ç«è½¦&quot;, &quot;B&quot;: &quot;è‡ªè¡Œè½¦&quot;, &quot;C&quot;: &quot;æ±½è½¦&quot;, &quot;D&quot;: &quot;é£æœº&quot;, &quot;E&quot;: &quot;æ­¥è¡Œ&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 10, &quot;E&quot;: 15&#125;&#x27; ), ( &#x27;ä»¥ä¸‹é¢œè‰²ä½ æ›´å–œæ¬¢å“ªç§&#x27;, &#x27;&#123; &quot;A&quot;: &quot;ç´«&quot;, &quot;B&quot;: &quot;é»‘&quot;, &quot;C&quot;: &quot;è“&quot;, &quot;D&quot;: &quot;ç™½&quot;, &quot;E&quot;: &quot;é»„&quot;, &quot;F&quot;: &quot;çº¢&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 8, &quot;E&quot;: 12, &quot;F&quot;: 15&#125;&#x27; ), ( &#x27;ä¸‹åˆ—è¿åŠ¨ä¸­æŒ‘é€‰ä¸€ä¸ªä½ æœ€å–œæ¬¢çš„ï¼ˆä¸ä¸€å®šæ“…é•¿ï¼‰&#x27;, &#x27;&#123; &quot;A&quot;: &quot;ç‘œçˆ&quot;, &quot;B&quot;: &quot;è‡ªè¡Œè½¦&quot;, &quot;C&quot;: &quot;ä¹’ä¹“çƒ&quot;, &quot;D&quot;: &quot;æ‹³å‡»&quot;, &quot;E&quot;: &quot;è¶³çƒ&quot;, &quot;F&quot;: &quot;è¹¦æ&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 8, &quot;E&quot;: 10, &quot;F&quot;: 15&#125;&#x27; ), ( &#x27;å¦‚æœä½ æ‹¥æœ‰ä¸€åº§åˆ«å¢…ï¼Œä½ è®¤ä¸ºå®ƒåº”å½“å»ºç«‹åœ¨å“ªé‡Œ&#x27;, &#x27;&#123; &quot;A&quot;: &quot;æ¹–è¾¹&quot;, &quot;B&quot;: &quot;è‰åŸ&quot;, &quot;C&quot;: &quot;æµ·è¾¹&quot;, &quot;D&quot;: &quot;æ£®æ—&quot;, &quot;E&quot;: &quot;åŸä¸­åŒº&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 10, &quot;E&quot;: 15&#125;&#x27; ), ( &#x27;ä½ æ›´å–œæ¬¢ä»¥ä¸‹å“ªç§å¤©æ°”ç°è±¡&#x27;, &#x27;&#123; &quot;A&quot;: &quot;é›ª&quot;, &quot;B&quot;: &quot;é£&quot;, &quot;C&quot;: &quot;é›¨&quot;, &quot;D&quot;: &quot;é›¾&quot;, &quot;E&quot;: &quot;é›·ç”µ&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 10, &quot;E&quot;: 15&#125;&#x27; ), ( &#x27;ä½ å¸Œæœ›è‡ªå·±çš„çª—å£åœ¨ä¸€åº§30å±‚å¤§æ¥¼çš„ç¬¬å‡ å±‚&#x27;, &#x27;&#123; &quot;A&quot;: &quot;ä¸ƒå±‚&quot;, &quot;B&quot;: &quot;ä¸€å±‚&quot;, &quot;C&quot;: &quot;äºŒåä¸‰å±‚&quot;, &quot;D&quot;: &quot;åå…«å±‚&quot;, &quot;E&quot;: &quot;ä¸‰åå±‚&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 2, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 10, &quot;E&quot;: 15&#125;&#x27; ), ( &#x27;ä½ è®¤ä¸ºè‡ªå·±æ›´å–œæ¬¢åœ¨ä»¥ä¸‹å“ªä¸€ä¸ªåŸå¸‚ä¸­ç”Ÿæ´»&#x27;, &#x27;&#123; &quot;A&quot;: &quot;ä¸½æ±Ÿ&quot;, &quot;B&quot;: &quot;æ‹‰è¨&quot;, &quot;C&quot;: &quot;æ˜†æ˜&quot;, &quot;D&quot;: &quot;è¥¿å®‰&quot;, &quot;E&quot;: &quot;æ­å·&quot;, &quot;F&quot;: &quot;åŒ—äº¬&quot;&#125;&#x27;, &#x27;&#123; &quot;A&quot;: 1, &quot;B&quot;: 3, &quot;C&quot;: 5, &quot;D&quot;: 8, &quot;E&quot;: 10, &quot;F&quot;: 15&#125;&#x27; ); 1migrate -path sqlc/migration -database &quot;postgresql://postgres:postgres@localhost:5432/postgres?sslmode=disable&amp;search_path=question&quot; -verbose up down sql 1DROP TABLE question; åŒç† 1migrate -path sqlc/migration -database &quot;postgresql://postgres:postgres@localhost:5432/postgres?sslmode=disable&amp;search_path=question&quot; -verbose down æ¥ç€å°±æ˜¯ç¼–å†™è·å–é—®é¢˜åˆ—è¡¨çš„ SQL 123-- name: GetQuestions :manySELECT q.id, q.title, q.answer FROM question q ORDER BY q.id; æ ¹æ® sqlc çš„è§„èŒƒï¼Œ-- name: æ–¹æ³•åï¼Œè¿™äº›ç©ºæ ¼éƒ½æ˜¯å¿…é¡»çš„ï¼Œå¦‚æœè¿”å›ä¸€æ¡æ•°æ®å°± :oneï¼Œå¤šæ¡åˆ™ :manyï¼Œå¦‚æœåªæ˜¯å¢åˆ ï¼Œå¯ä»¥ç”¨ :exec æ‰§è¡Œ sqlc generate è¿™æ ·å°±ä¼šç”Ÿæˆå¥½å‡ ä¸ª go æ–‡ä»¶ï¼Œå…¶ä¸­ç”Ÿæˆçš„æ–¹æ³•ç±»ä¼¼ 123func (q *Queries) GetQuestions(ctx context.Context) ([]GetQuestionsRow, error) &#123; ...&#125; ä½†æ˜¯æ¯æ¬¡éƒ½è¦è¾“å…¥è¿™ä¹ˆé•¿çš„å‘½ä»¤ï¼Œè™½ç„¶å¯ä»¥é”®ç›˜ä¸Šä¸‹ï¼Œä½†æ˜¯æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œå°±æ˜¯ Makefile 12345678910up: migrate -path sqlc/migration -database &quot;postgresql://postgres:postgres@localhost:5432/postgres?sslmode=disable&amp;search_path=question&quot; -verbose updown: migrate -path sqlc/migration -database &quot;postgresql://postgres:postgres@localhost:5432/postgres?sslmode=disable&amp;search_path=question&quot; -verbose downgen: sqlc generate.PHONY: up down gen .PHONY çš„ä½œç”¨å°±æ˜¯ç¡®ä¿æ‰§è¡Œçš„æ˜¯è¿™é‡Œå®šä¹‰çš„å‘½ä»¤ï¼Œæ¯”å¦‚ Makefile é‡Œå®šä¹‰ä¸ª lsï¼Œå¦‚æœä¸åŠ åˆ° .PHONY é‡Œï¼Œåˆ™æ‰§è¡Œçš„æ˜¯ç³»ç»Ÿçš„ ls ç¼–å†™ä¸šåŠ¡é€»è¾‘å®šä¹‰é…ç½®ç±»ï¼Œç”¨åˆ°äº† viperï¼Œæœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ AutomaticEnv() èƒ½å¤Ÿå°†ç¯å¢ƒå˜é‡è¦†ç›–æ‰ä»£ç é…ç½®ï¼Œè¿™æ ·åœ¨éƒ¨ç½²çš„æ—¶å€™éå¸¸æ–¹ä¾¿ï¼Œæ—¥å¿—åˆ™ç”¨äº† logrusï¼Œå¯ä»¥è®¾ç½®ä¸åŒçš„çº§åˆ«ï¼Œè¿˜æœ‰é¢œè‰²è¾“å‡ºï¼ŒJava è¿‡æ¥è¡¨ç¤ºå¾ˆäº²åˆ‡ 1234567891011121314151617181920212223242526272829303132333435363738394041424344package utilimport ( log &quot;github.com/sirupsen/logrus&quot; &quot;github.com/spf13/viper&quot;)const ( configFileName = &quot;app&quot; configFileSuffix = &quot;env&quot;)type Config struct &#123; ServerPort string `mapstructure:&quot;SERVER_PORT&quot;` DBDriver string `mapstructure:&quot;DB_DRIVER&quot;` DBSource string `mapstructure:&quot;DB_SOURCE&quot;` LogLevel string `mapstructure:&quot;LOG_LEVEL&quot;`&#125;func LoadConfig(path string) (config Config) &#123; viper.AddConfigPath(path) viper.SetConfigName(configFileName) viper.SetConfigType(configFileSuffix) viper.AutomaticEnv() if err := viper.ReadInConfig(); err != nil &#123; log.Fatalf(&quot;failed to load config file: [%v]&quot;, err) &#125; if err := viper.Unmarshal(&amp;config); err != nil &#123; log.Fatalf(&quot;failed to parse config file: [%v]&quot;, err) &#125; logLevel, err := log.ParseLevel(config.LogLevel) if err != nil &#123; log.Fatalf(&quot;failed to get log level: [%v]&quot;, err) &#125; log.SetLevel(logLevel) return&#125; ç„¶åå°±å¯ä»¥å¼€å¯è°ƒè¯•äº†ï¼Œå¯ä»¥ build æˆ–è€…ç›´æ¥ runï¼Œæˆ–è€…ç”¨å…¶ä»–çƒ­åŠ è½½çš„å·¥å…·ï¼Œè¿™é‡Œç”¨åˆ°äº† gowatch ç›´æ¥æ‰§è¡Œ gowatch å°±å¯ä»¥å°†ç»ˆç«¯æ™¾åœ¨ä¸€è¾¹äº†ï¼Œå’Œå‰ç«¯å¼€å‘çš„ä½“éªŒæ²¡ä»€ä¹ˆåŒºåˆ«ï¼ŒJava å°±è¦é‡å¯ï¼Œæ²¡ç”¨è¿‡ JRebel æ­¤æ—¶è®¿é—®æœ¬åœ° 8080 å°±èƒ½å¾—åˆ° 404 çš„æ­£ç¡®å“åº”äº† æ¥ç€åŠ ä¸€ä¸ª CORS çš„ä¸­é—´ä»¶ï¼Œè¿™é‡Œä¸åŠ ï¼Œå‰ç«¯å°±è¦ proxy 123456789101112131415161718192021222324package middlewareimport ( &quot;net/http&quot; &quot;github.com/gin-gonic/gin&quot; log &quot;github.com/sirupsen/logrus&quot;)func CORS() gin.HandlerFunc &#123; return func(ctx *gin.Context) &#123; log.Debug(&quot;handle cors...&quot;) ctx.Writer.Header().Set(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;) ctx.Writer.Header().Set(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;) if ctx.Request.Method == http.MethodOptions &#123; ctx.AbortWithStatus(http.StatusNoContent) return &#125; ctx.Next() &#125;&#125; ç»™ server åŠ ä¸Š 1server.Use(middleware.CORS()) API 1234567891011121314151617181920212223242526272829303132package apiimport ( &quot;net/http&quot; &quot;github.com/gin-gonic/gin&quot; &quot;github.com/linweiyuan/goquestionapi/sqlc&quot; log &quot;github.com/sirupsen/logrus&quot;)type QuestionAPI struct &#123; db *sqlc.Queries&#125;func NewQuestionAPI(db *sqlc.Queries) *QuestionAPI &#123; return &amp;QuestionAPI&#123;db&#125;&#125;func (api *QuestionAPI) GetQuestions(ctx *gin.Context) &#123; questions, err := api.db.GetQuestions(ctx) if err != nil &#123; log.Errorf(&quot;failed to get questions: [%v]&quot;, err) ctx.JSON(http.StatusInternalServerError, gin.H&#123; &quot;error&quot;: err.Error(), &#125;) return &#125; ctx.JSON(http.StatusOK, gin.H&#123; &quot;questions&quot;: questions, &#125;)&#125; è·¯ç”±é…ç½® 12345678910111213141516171819package routerimport ( &quot;github.com/gin-gonic/gin&quot; &quot;github.com/linweiyuan/goquestionapi/api&quot;)type QuestionRouter struct &#123; api *api.QuestionAPI&#125;func NewQuestionRouter(api *api.QuestionAPI) *QuestionRouter &#123; return &amp;QuestionRouter&#123;api&#125;&#125;func (router *QuestionRouter) Setup(routerGroup *gin.RouterGroup) &#123; group := routerGroup.Group(&quot;/questions&quot;) group.GET(&quot;&quot;, router.api.GetQuestions)&#125; ç»™ server åŠ ä¸Šï¼Œå¹¶ä¸”è®©å…¶å…·æœ‰æŸ¥è¯¢ db çš„åŠŸèƒ½ 123456789sqlDB, err := sql.Open(config.DBDriver, config.DBSource)if err != nil &#123; log.Fatalf(&quot;failed to connect to DB: [%v]&quot;, err)&#125;db := sqlc.New(sqlDB)rg := server.Group(&quot;/&quot;)router.NewQuestionRouter(api.NewQuestionAPI(db)).Setup(rg) éœ€è¦æ³¨æ„ä¸€ç‚¹å°±æ˜¯ï¼Œè¦è®© db çš„é©±åŠ¨æ‰§è¡Œåˆå§‹åŒ–åŠ¨ä½œ 1import _ &quot;github.com/lib/pq&quot; æ¥ç€å†è®¿é—® http://localhost:8080/questionsï¼Œå°±èƒ½çœ‹åˆ°æ•°æ® 12345678910111213141516171819202122232425262728&#123; &quot;questions&quot;: [ &#123; &quot;ID&quot;: 1, &quot;Title&quot;: &quot;ä½ æ›´å–œæ¬¢åƒé‚£ç§æ°´æœ&quot;, &quot;Answer&quot;: &#123; &quot;A&quot;: &quot;è‰è“&quot;, &quot;B&quot;: &quot;è‹¹æœ&quot;, &quot;C&quot;: &quot;è¥¿ç“œ&quot;, &quot;D&quot;: &quot;è è&quot;, &quot;E&quot;: &quot;æ©˜å­&quot; &#125; &#125;, ... &#123; &quot;ID&quot;: 15, &quot;Title&quot;: &quot;ä½ è®¤ä¸ºè‡ªå·±æ›´å–œæ¬¢åœ¨ä»¥ä¸‹å“ªä¸€ä¸ªåŸå¸‚ä¸­ç”Ÿæ´»&quot;, &quot;Answer&quot;: &#123; &quot;A&quot;: &quot;ä¸½æ±Ÿ&quot;, &quot;B&quot;: &quot;æ‹‰è¨&quot;, &quot;C&quot;: &quot;æ˜†æ˜&quot;, &quot;D&quot;: &quot;è¥¿å®‰&quot;, &quot;E&quot;: &quot;æ­å·&quot;, &quot;F&quot;: &quot;åŒ—äº¬&quot; &#125; &#125; ]&#125; ä½†æ˜¯ json çš„ key å…¨éƒ¨å¤§å†™äº†ï¼Œå¯ä»¥åœ¨ sqlc ä¸Šé…ç½® emit_json_tagsï¼Œä¿®æ”¹åçš„é…ç½® 12345678910version: &quot;2&quot;sql: - engine: &quot;postgresql&quot; schema: &quot;sqlc/migration&quot; queries: &quot;sqlc/query&quot; gen: go: package: &quot;sqlc&quot; out: &quot;sqlc&quot; emit_json_tags: true å†é‡æ–°è·‘ä¸€é make genï¼Œå†åˆ·æ–°é¡µé¢ï¼Œå°±èƒ½æ‹¿åˆ°å°å†™çš„ keyï¼Œæ¯”è¾ƒç¬¦åˆä¹ æƒ¯ 12345678910111213141516171819202122232425262728&#123; &quot;questions&quot;: [ &#123; &quot;id&quot;: 1, &quot;title&quot;: &quot;ä½ æ›´å–œæ¬¢åƒé‚£ç§æ°´æœ&quot;, &quot;answer&quot;: &#123; &quot;A&quot;: &quot;è‰è“&quot;, &quot;B&quot;: &quot;è‹¹æœ&quot;, &quot;C&quot;: &quot;è¥¿ç“œ&quot;, &quot;D&quot;: &quot;è è&quot;, &quot;E&quot;: &quot;æ©˜å­&quot; &#125; &#125;, ... &#123; &quot;id&quot;: 15, &quot;title&quot;: &quot;ä½ è®¤ä¸ºè‡ªå·±æ›´å–œæ¬¢åœ¨ä»¥ä¸‹å“ªä¸€ä¸ªåŸå¸‚ä¸­ç”Ÿæ´»&quot;, &quot;answer&quot;: &#123; &quot;A&quot;: &quot;ä¸½æ±Ÿ&quot;, &quot;B&quot;: &quot;æ‹‰è¨&quot;, &quot;C&quot;: &quot;æ˜†æ˜&quot;, &quot;D&quot;: &quot;è¥¿å®‰&quot;, &quot;E&quot;: &quot;æ­å·&quot;, &quot;F&quot;: &quot;åŒ—äº¬&quot; &#125; &#125; ]&#125; è‡³æ­¤è·å–é—®é¢˜åˆ—è¡¨ API å®Œæˆï¼Œæ¥ç€æ˜¯ç­”é¢˜ç„¶åè®¡ç®—åˆ†æ•° è¿™é‡Œç”¨åˆ°ä¸‹é¢çš„æ•°æ®ç»“æ„è¿›è¡Œæäº¤ï¼Œæ€è·¯è¿˜æ˜¯é€æ¡æ‹¿åˆ†æ•°å‡ºæ¥å†å åŠ ï¼Œæ²¡æœ‰å¤ªå¤šèŠ±é‡Œèƒ¡å“¨çš„ SQL 123456789&#123; &quot;answers&quot;: &#123; &quot;1&quot;: &quot;A&quot;, &quot;2&quot;: &quot;B&quot;, ... &quot;15&quot;: &quot;C&quot; &#125;&#125; äºæ˜¯æ ¹æ®é¢˜ç›®æ‹¿åˆ†æ•°çš„ SQL å°±ä¼šæ˜¯ 1234567-- name: GetQuestionScoreByID :oneSELECT ( q.score -&gt;&gt; sqlc.arg(answer) :: TEXT ) :: INT AS scoreFROM question qWHERE q.id = sqlc.arg(id); è¿™é‡Œå¯ä»¥ç”¨ $1ï¼Œ$2 ç­‰çš„å ä½ç¬¦ï¼Œä¸è¿‡ç”¨ sqlc.arg() å°±ä¼šæ›´åŠ é¡¾åæ€ä¹‰ä¸€äº› å†æ‰§è¡Œ make genï¼Œç”Ÿæˆæ–°ä»£ç  æ¥ç€ç¼–å†™å®Œç­”é¢˜ API ï¼ˆç»ƒæ‰‹è€Œå·²ï¼Œæ²¡æœ‰å¤ªå¤šå°è£…ï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253type answersRequest struct &#123; Answers json.RawMessage `json:&quot;answers&quot;`&#125;func (api *QuestionAPI) HandleAnswers(ctx *gin.Context) &#123; var req answersRequest err := ctx.ShouldBindJSON(&amp;req) if err != nil &#123; log.Errorf(&quot;failed to bind answers json: [%v]&quot;, err) ctx.JSON(http.StatusBadRequest, util.HandleError(err)) return &#125; totalScore := 0 questionAnswerMap := make(map[int]string) json.Unmarshal(req.Answers, &amp;questionAnswerMap) for questionID, answer := range questionAnswerMap &#123; getAnswerMappingParams := sqlc.GetQuestionScoreByIDParams&#123; Answer: answer, ID: int32(questionID), &#125; score, err := api.db.GetQuestionScoreByID(ctx, getAnswerMappingParams) if err != nil &#123; log.Errorf(&quot;failed to get answer score, questionID: [%d], answer: [%s]&quot;, questionID, answer) ctx.JSON(http.StatusInternalServerError, util.HandleError(err)) return &#125; totalScore += int(score) &#125; var result string switch &#123; case totalScore &gt;= 180: result = &quot;æ„å¿—åŠ›å¼ºï¼Œå¤´è„‘å†·é™ï¼Œæœ‰è¾ƒå¼ºçš„é¢†å¯¼æ¬²ï¼Œäº‹ä¸šå¿ƒå¼ºï¼Œä¸è¾¾ç›®çš„ä¸ç½¢ä¼‘ã€‚å¤–è¡¨å’Œå–„ï¼Œå†…å¿ƒè‡ªå‚²ï¼Œå¯¹æœ‰åˆ©äºè‡ªå·±çš„äººé™…å…³ç³»æ¯”è¾ƒçœ‹é‡ï¼Œæœ‰æ—¶æ˜¾å¾—æ€§æ ¼æ€¥å™ªï¼Œå’„å’„é€¼äººï¼Œå¾—ç†ä¸é¥¶äººï¼Œä¸åˆ©äºè‡ªå·±æ—¶é¡½å¼ºæŠ—äº‰ï¼Œä¸è½»æ˜“è®¤è¾“ã€‚æ€ç»´ç†æ€§ï¼Œå¯¹çˆ±æƒ…å’Œå©šå§»çš„çœ‹æ³•å¾ˆç°å®ï¼Œå¯¹é‡‘é’±çš„æ¬²æœ›ä¸€èˆ¬ã€‚&quot; case totalScore &gt;= 140 &amp;&amp; totalScore &lt; 179: result = &quot;èªæ˜ï¼Œæ€§æ ¼æ´»æ³¼ï¼Œäººç¼˜å¥½ï¼Œå–„äºäº¤æœ‹å‹ï¼Œå¿ƒæœºè¾ƒæ·±ã€‚äº‹ä¸šå¿ƒå¼ºï¼Œæ¸´æœ›æˆåŠŸã€‚æ€ç»´è¾ƒç†æ€§ï¼Œå´‡å°šçˆ±æƒ…ï¼Œä½†å½“çˆ±æƒ…ä¸å©šå§»å‘ç”Ÿå†²çªæ—¶ä¼šé€‰æ‹©æœ‰åˆ©äºè‡ªå·±çš„å©šå§»ã€‚é‡‘é’±æ¬²æœ›å¼ºçƒˆã€‚&quot; case totalScore &gt;= 100 &amp;&amp; totalScore &lt; 139: result = &quot;çˆ±å¹»æƒ³ï¼Œæ€ç»´è¾ƒæ„Ÿæ€§ï¼Œä»¥æ˜¯å¦ä¸è‡ªå·±æŠ•ç¼˜ä¸ºæ ‡å‡†æ¥é€‰æ‹©æœ‹å‹ã€‚æ€§æ ¼æ˜¾å¾—è¾ƒå­¤å‚²ï¼Œæœ‰æ—¶è¾ƒæ€¥å™ªï¼Œæœ‰æ—¶ä¼˜æŸ”å¯¡æ–­ã€‚äº‹ä¸šå¿ƒè¾ƒå¼ºï¼Œå–œæ¬¢æœ‰åˆ›é€ æ€§çš„å·¥ä½œï¼Œä¸å–œæ¬¢æŒ‰å¸¸è§„åŠäº‹ã€‚æ€§æ ¼å€”å¼ºï¼Œè¨€è¯­çŠ€åˆ©ï¼Œä¸å–„äºå¦¥åã€‚å´‡å°šæµªæ¼«çš„çˆ±æƒ…ï¼Œä½†æƒ³æ³•å¾€å¾€ä¸åˆ‡åˆå®é™…ã€‚é‡‘é’±æ¬²æœ›ä¸€èˆ¬ã€‚&quot; case totalScore &gt;= 70 &amp;&amp; totalScore &lt; 99: result = &quot;å¥½å¥‡å¿ƒå¼ºï¼Œå–œæ¬¢å†’é™©ï¼Œäººç¼˜è¾ƒå¥½ã€‚äº‹ä¸šå¿ƒä¸€èˆ¬ï¼Œå¯¹å¾…å·¥ä½œï¼Œéšé‡è€Œå®‰ï¼Œå–„äºå¦¥åã€‚å–„äºå‘ç°æœ‰è¶£çš„äº‹æƒ…ï¼Œä½†è€å¿ƒè¾ƒå·®ï¼Œæ•¢äºå†’é™©ï¼Œä½†æœ‰æ—¶è¾ƒèƒ†å°ã€‚æ¸´æœ›æµªæ¼«çš„çˆ±æƒ…ï¼Œä½†å¯¹å©šå§»çš„è¦æ±‚æ¯”è¾ƒç°å®ã€‚ä¸å–„ç†è´¢ã€‚&quot; case totalScore &gt;= 40 &amp;&amp; totalScore &lt; 69: result = &quot;æ€§æƒ…æ¸©è‰¯ï¼Œé‡å‹è°Šï¼Œæ€§æ ¼å¡Œå®ç¨³é‡ï¼Œä½†æœ‰æ—¶ä¹Ÿæ¯”è¾ƒç‹¡é» ã€‚äº‹ä¸šå¿ƒä¸€èˆ¬ï¼Œå¯¹æœ¬èŒå·¥ä½œèƒ½è®¤çœŸå¯¹å¾…ï¼Œä½†å¯¹è‡ªå·±ä¸“ä¸šä»¥å¤–äº‹ç‰©æ²¡æœ‰å¤ªå¤§å…´è¶£ï¼Œå–œæ¬¢æœ‰è§„å¾‹çš„å·¥ä½œå’Œç”Ÿæ´»ï¼Œä¸å–œæ¬¢å†’é™©ï¼Œå®¶åº­è§‚å¿µå¼ºï¼Œæ¯”è¾ƒå–„äºç†è´¢ã€‚&quot; default: result = &quot;æ•£æ¼«ï¼Œçˆ±ç©ï¼Œå¯Œäºå¹»æƒ³ã€‚èªæ˜æœºçµï¼Œå¾…äººçƒ­æƒ…ï¼Œçˆ±äº¤æœ‹å‹ï¼Œä½†å¯¹æœ‹å‹æ²¡æœ‰ä¸¥æ ¼çš„é€‰æ‹©æ ‡å‡†ã€‚äº‹ä¸šå¿ƒè¾ƒå·®ï¼Œæ›´å–„äºäº«å—ç”Ÿæ´»ï¼Œæ„å¿—åŠ›å’Œè€å¿ƒéƒ½è¾ƒå·®ï¼Œæˆ‘è¡Œæˆ‘ç´ ã€‚æœ‰è¾ƒå¥½çš„å¼‚æ€§ç¼˜ï¼Œä½†å¯¹çˆ±æƒ…ä¸å¤ŸåšæŒè®¤çœŸï¼Œå®¹æ˜“å¦¥åã€‚æ²¡æœ‰è´¢äº§è§‚å¿µã€‚&quot; &#125; ctx.JSON(http.StatusOK, gin.H&#123; &quot;totalScore&quot;: totalScore, &quot;result&quot;: result, &#125;)&#125; é…ç½®ä¸‹è·¯ç”± 1group.POST(&quot;&quot;, router.api.HandleAnswers) ç®€å•æµ‹è¯•èƒ½å¾—åˆ°ç»“æœ 1234&#123; &quot;result&quot;: &quot;æ•£æ¼«ï¼Œçˆ±ç©ï¼Œå¯Œäºå¹»æƒ³ã€‚èªæ˜æœºçµï¼Œå¾…äººçƒ­æƒ…ï¼Œçˆ±äº¤æœ‹å‹ï¼Œä½†å¯¹æœ‹å‹æ²¡æœ‰ä¸¥æ ¼çš„é€‰æ‹©æ ‡å‡†ã€‚äº‹ä¸šå¿ƒè¾ƒå·®ï¼Œæ›´å–„äºäº«å—ç”Ÿæ´»ï¼Œæ„å¿—åŠ›å’Œè€å¿ƒéƒ½è¾ƒå·®ï¼Œæˆ‘è¡Œæˆ‘ç´ ã€‚æœ‰è¾ƒå¥½çš„å¼‚æ€§ç¼˜ï¼Œä½†å¯¹çˆ±æƒ…ä¸å¤ŸåšæŒè®¤çœŸï¼Œå®¹æ˜“å¦¥åã€‚æ²¡æœ‰è´¢äº§è§‚å¿µã€‚&quot;, &quot;totalScore&quot;: 32&#125; æ­¤æ—¶ API å°±å®Œæˆäº†ï¼Œæ¥ç€å°±æ˜¯éƒ¨ç½² éƒ¨ç½²å¦‚æœæŒ‰ç…§å…¶ä»–è¯­è¨€ï¼Œä¸€èˆ¬éƒ½æ˜¯ FROM ä¸€ä¸ªå®˜æ–¹çš„åŸºç¡€é•œåƒï¼Œç„¶ååœ¨ä¸Šé¢å†è¿›è¡Œæ„å»ºï¼Œè¿™æ ·å°±æœ‰ç¬¬ä¸€ç§ 12FROM FROM golang:alpine... è¿™æ ·å‡ºæ¥çš„é•œåƒæ˜¯å¾ˆå¤§çš„ï¼Œå› ä¸º golang çš„ alpine é•œåƒæœ¬èº«å°±å¾ˆå¤§äº† 12REPOSITORY TAG IMAGE ID CREATED SIZEgolang alpine 5dd973625d31 4 weeks ago 352MB è€Œç”±äº go æœ¬èº«ç‰¹ç‚¹ï¼Œå¯ä»¥ç¼–è¯‘å‡ºæ¥ä¸€ä¸ªæ‘†è„±å…¶ä»–æŸç¼šçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä¸Š alpine 123456FROM alpineWORKDIR /appCOPY goquestionapi .EXPOSE 8080CMD [ &quot;/app/goquestionapi&quot; ] 123CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build .docker build -t goquestionapi . è¿™æ · build å‡ºæ¥çš„ç¨‹åºæœ‰ 13Mï¼Œè¿˜å¯ä»¥å†ä¼˜åŒ–ä¸‹ï¼Œ-s å¯ä»¥å»æ‰ç¬¦å·è¡¨ï¼Œ-w å¯ä»¥å»æ‰è°ƒè¯•ä¿¡æ¯ 1CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags=&quot;-w -s&quot; . è¿™æ · build å‡ºæ¥çš„ç¨‹åºåªæœ‰ 8.5M è·‘ä¸‹é•œåƒæµ‹è¯•ä¸‹ 1docker run --rm -p 8080:8080 -e DB_SOURCE=&quot;postgresql://postgres:postgres@192.168.31.60:5432/postgres?sslmode=disable&amp;search_path=question&quot; -d goquestionapi è®¿é—®æ­£å¸¸æ‹¿åˆ°æ•°æ® æ­¤æ—¶ docker é•œåƒå¤§å°ä¸º 14.4M 12REPOSITORY TAG IMAGE ID CREATED SIZEgoquestionapi latest 109360c6fafd 6 minutes ago 14.4MB ä¸Šé¢è¯´äº†ï¼Œç”±äº go è‡ªèº«çš„ç‰¹æ€§ï¼Œå¦‚æœæ²¡æœ‰é¢å¤–çš„éœ€æ±‚ï¼Œè¿˜å¯ä»¥ç”¨ scratch é•œåƒï¼Œåªæ˜¯è¿™æ ·å°±ä¸èƒ½ sh è¿›å»å®¹å™¨ï¼Œå¦‚æœæœ‰è®¿é—®å¤–ç½‘çš„éœ€æ±‚ï¼Œä¹Ÿä¼šæŠ¥ SSL è¯ä¹¦é”™è¯¯ï¼Œåˆæˆ–è€…æ—¶åŒºçš„é—®é¢˜ï¼Œå› ä¸ºé‡Œé¢ç¡®å®ä»€ä¹ˆéƒ½æ²¡æœ‰ è¿™ä¸ª scratch æ„Ÿè§‰æ›´åƒæ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œä¸æ˜¯å®é™…å¯ä»¥æ‘¸åˆ°çš„ä¸œè¥¿ï¼Œå› ä¸ºå¦‚æœåƒå…¶ä»–é•œåƒé‚£æ · pull çš„è¯ï¼Œä¼šæŠ¥é”™ 1234docker pull scratchUsing default tag: latestError response from daemon: &#x27;scratch&#x27; is a reserved name è¿™æ · build å‡ºæ¥çš„é•œåƒå¤§å°å°±åˆå°äº†äº› 12REPOSITORY TAG IMAGE ID CREATED SIZEgoquestionapi latest 7ac80b2a1ad0 3 seconds ago 8.86MB ä½†æ˜¯ä¸ºäº†åç»­æ–¹ä¾¿ sh è¿›å»ï¼Œè¿˜æ˜¯ä¹ æƒ¯ç”¨ alpineï¼Œä¹Ÿä¸å·®é‚£å‡ å…†ç¡¬ç›˜ ç°å¦‚ä»Šéƒ½åœ¨è°ˆ DevOpsï¼Œè°ˆäº‘åŸç”Ÿï¼Œä¸€èˆ¬ cicd éƒ½åœ¨äº‘ç«¯äº†ï¼Œå› æ­¤ä¼šæœ‰ç¬¬äºŒç§ï¼Œåˆ†é˜¶æ®µæ„å»º è¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸€ä¸ª go ç¯å¢ƒï¼Œæ‰€ä»¥è¦åˆ©ç”¨ golang é•œåƒæ¥åšç¼–è¯‘ï¼Œå®Œäº†å†æŠŠç¼–è¯‘å‡ºæ¥çš„ç¨‹åºï¼Œå†å¤åˆ¶åˆ°åŸºç¡€çš„ alpine é•œåƒä¸Š 123456789101112FROM golang:alpine AS builderWORKDIR /appCOPY . .RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags=&quot;-w -s&quot; .FROM alpineWORKDIR /appCOPY --from=builder /app/goquestionapi .COPY app.env .EXPOSE 8080CMD [ &quot;/app/goquestionapi&quot; ] æ­¤æ—¶ç¼–è¯‘æ­£å¸¸ï¼Œé•œåƒå°ï¼Œä¹Ÿèƒ½æ­£å¸¸è¿è¡Œ docker build çš„æ–¹å¼ä¼šäº§ç”Ÿå¾ˆå¤š &lt;none&gt; çš„æ²¡ç”¨çš„é•œåƒï¼Œæ¯æ¬¡è¿˜è¦è·‘ä¸€å¤§ä¸²å‘½ä»¤ï¼Œè¿™æœ‰ç‚¹ä¸æ–¹ä¾¿ï¼Œå› æ­¤å¯ä»¥ç”¨ Docker Compose 12345678910111213services: goquestionapi: container_name: goquestionapi image: goquestionapi ports: - 8080:8080 build: . environment: - TZ=Asia/Shanghai - GIN_MODE=release - DB_SOURCE=postgresql://postgres:postgres@192.168.31.60:5432/postgres?sslmode=disable&amp;search_path=question - LOG_LEVEL=info restart: unless-stopped åªè¦ docker-compose build å°±å¯ä»¥æŠŠé•œåƒ build å‡ºæ¥ï¼Œå¹¶ä¸”å¯ä»¥çµæ´»ä¿®æ”¹é…ç½®ï¼Œå‘½ä»¤ä¸å˜ï¼Œå’Œ Makefile çš„æ€æƒ³ä¸€æ · è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯æ²¡æœ‰ &lt;none&gt; é•œåƒï¼Œä»£ç æ´ç™–+å¼ºè¿«ç—‡æ‚£è€…è¡¨ç¤ºå¾ˆèˆ’æœ æ­¤æ—¶è·‘ docker-compose upï¼Œä¹Ÿèƒ½æ­£å¸¸çœ‹åˆ°æ•°æ® ä»¥ä¸Šæ˜¯æœ¬åœ°éƒ¨ç½²ï¼Œçº¿ä¸Šå¤§å¤šæ˜¯ Kubernetes ç¯å¢ƒ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859apiVersion: apps/v1kind: Deploymentmetadata: name: goquestionapispec: selector: matchLabels: app: goquestionapi template: metadata: labels: app: goquestionapi spec: containers: - name: goquestionapi image: goquestionapi imagePullPolicy: IfNotPresent resources: limits: memory: &quot;20Mi&quot; cpu: &quot;500m&quot; ports: - containerPort: 8080 env: - name: GIN_MODE value: release - name: DB_SOURCE value: postgresql://postgres:postgres@postgres-postgresql.default.svc.cluster.local:5432/postgres?sslmode=disable&amp;search_path=question---apiVersion: v1kind: Servicemetadata: name: goquestionapispec: selector: app: goquestionapi ports: - port: 8080 targetPort: 8080---apiVersion: networking.k8s.io/v1kind: Ingressmetadata: name: goquestionapi labels: name: goquestionapi annotations: nginx.ingress.kubernetes.io/rewrite-target: /$2spec: rules: - http: paths: - pathType: Prefix path: &quot;/api(/|$)(.*)&quot; backend: service: name: goquestionapi port: number: 8080 ç”±äºæˆ‘æœ¬åœ° K8s ç¯å¢ƒæ˜¯ kindï¼Œæ‰€ä»¥è¦æŠŠé•œåƒ load è¿›å» 1kind load docker-image goquestionapi æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼Œç¬¬ä¸€å°±æ˜¯ç¡®ä¿èƒ½æ‹¿åˆ°é•œåƒï¼Œè¦ä¹ˆç»™ä¸ª tag ä¸ç”¨ latest å†é€šè¿‡åŠ è½½é•œåƒçš„æ–¹å¼ï¼Œè¦ä¹ˆä¿®æ”¹ imagePullPolicy ä¸º IfNotPresent æˆ–è€… Neverï¼Œè¦ä¹ˆæ­£ç¡®é…ç½®ä»“åº“åœ°å€ï¼Œæ— è®ºç”¨ Docker Hub è¿˜æ˜¯è‡ªå»º è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ postgres è¦ç”¨ K8s å†…éƒ¨çš„è¿æ¥ï¼Œå› ä¸ºæˆ‘çš„ postgres æ˜¯ç”¨ helm å®‰è£…çš„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ helm status postgres æŸ¥çœ‹åˆ°é›†ç¾¤å†…éƒ¨é“¾æ¥ apply åè®¿é—® http://localhost/api/questionsï¼Œä¹Ÿèƒ½æ­£å¸¸çœ‹åˆ°æ•°æ® VSCode æˆ–è€… Goland è£…å¥½ Kubernetes æ’ä»¶åï¼Œéƒ½èƒ½å¾ˆæ–¹ä¾¿ç›´æ¥ apply VSCode çš„è¯ï¼Œé…ç½®å†™åœ¨ä¸€èµ·ä¼šæœ‰æç¤ºæ— æ³•å¯¹æ¯”ï¼Œåªèƒ½å¯¹æ¯”å•ä¸ªçš„ï¼Œä½†æ˜¯å•ä¸ªçš„è¯ï¼Œå·²ç» apply äº†çš„é…ç½®ä¼šè‡ªåŠ¨å¸¦ä¸Šæ—¶é—´ä¹‹ç±»çš„é¢å¤–çš„ä¸œè¥¿ï¼Œå¯¹æ¯”èµ·æ¥ä¹Ÿä¸æ˜¯å¾ˆç›´æ¥ï¼Œæ‰€ä»¥è¿™é‡Œè¿˜æ˜¯å†™åœ¨ä¸€èµ· è‡³æ­¤ï¼ŒAPI éƒ¨åˆ†å®Œ å‰ç«¯å‰æœŸå‡†å¤‡åˆ©ç”¨ create-react-app æ¥åˆ›å»º React é¡¹ç›® 1yarn create react-app reactquestionweb æ¥ç€é›†æˆç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œaxios åˆšå‘å¸ƒäº† 1.0.0 ç‰ˆæœ¬ï¼Œä¼šæœ‰å…¼å®¹é—®é¢˜ï¼Œå› æ­¤è¿˜æ˜¯ç”¨å›è€ç‰ˆæœ¬ 0.27.2 ç‰ˆæœ¬ 123yarn add antdyarn add axios@0.27.2yarn add use-axios-react ç¼–å†™ä¸šåŠ¡é€»è¾‘è¿™é‡Œæ²¡ä»€ä¹ˆå¥½è¯´çš„äº†ï¼Œç”¨å‡½æ•°å¼ç»„ä»¶ + hook å®Œæˆç½‘ç»œè¯·æ±‚ã€æ¡ä»¶æ¸²æŸ“ï¼Œå…¶ä»–çš„å°±æŒ‰ç…§åç«¯æ¥å£çº¦å®šçš„å‚æ•°æäº¤ ä¸ä¼š CSSï¼Œæ‰€ä»¥æ²¡æœ‰å¤ªå¤šåä¸½çš„è¾è—»æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š éƒ¨ç½²éƒ¨ç½²å¥½å¤šäººéƒ½å–œæ¬¢ç”¨ node çš„é•œåƒç„¶åç”¨ npm startï¼Œä½†å…¶å®æˆ‘è¿™è¾¹ä¹ æƒ¯ç”¨ nginxï¼Œé™¤äº† yarn build ä¼šæœ‰ä¼˜åŒ–å¤–ï¼Œä½ éƒ½ build å‡ºæ¥é™æ€æ–‡ä»¶äº†ï¼Œè¿˜è¦ node å¹²å•¥ Dockerfile 123456789FROM node:alpine AS builderWORKDIR /appCOPY . .RUN yarn &amp;&amp; yarn buildFROM nginx:alpineCOPY --from=builder /app/build /usr/share/nginx/htmlEXPOSE 80 compose.yaml 12345678services: reactquestionweb: container_name: reactquestionweb image: reactquestionweb ports: - 3000:80 build: . restart: unless-stopped k8s.yaml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051apiVersion: apps/v1kind: Deploymentmetadata: name: reactquestionwebspec: selector: matchLabels: app: reactquestionweb template: metadata: labels: app: reactquestionweb spec: containers: - name: reactquestionweb image: reactquestionweb resources: limits: memory: &quot;20Mi&quot; cpu: &quot;500m&quot; ports: - containerPort: 80---apiVersion: v1kind: Servicemetadata: name: reactquestionwebspec: selector: app: reactquestionweb ports: - port: 80 targetPort: 80---apiVersion: networking.k8s.io/v1kind: Ingressmetadata: name: reactquestionweb labels: name: reactquestionwebspec: rules: - http: paths: - pathType: Prefix path: &quot;/&quot; backend: service: name: reactquestionweb port: number: 80 ç„¶åè®¿é—® http://localhostï¼Œä¸€åˆ‡æ­£å¸¸ åˆ°è¿™é‡Œå°±å®Œäº†ï¼Œé™„ä¸Šé¡¹ç›®åœ°å€ API WEB çº¯å±æŠ›ç –ç‰ç‰ï¼Œå¦‚æœæœ‰ä¸åŒçš„æ„è§ï¼Œä»¥ä½ çš„ä¸ºå‡†","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Go","slug":"Go","permalink":"https://linweiyuan.github.io/tags/Go/"},{"name":"React","slug":"React","permalink":"https://linweiyuan.github.io/tags/React/"},{"name":"sqlc","slug":"sqlc","permalink":"https://linweiyuan.github.io/tags/sqlc/"},{"name":"Postgres","slug":"Postgres","permalink":"https://linweiyuan.github.io/tags/Postgres/"},{"name":"Gin","slug":"Gin","permalink":"https://linweiyuan.github.io/tags/Gin/"},{"name":"Ant Design","slug":"Ant-Design","permalink":"https://linweiyuan.github.io/tags/Ant-Design/"}]},{"title":"IntelliJ IDEA Conf 2022","slug":"IntelliJ-IDEA-Conf-2022","date":"2022-10-01T05:09:00.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2022/10/01/IntelliJ-IDEA-Conf-2022.html","link":"","permalink":"https://linweiyuan.github.io/2022/10/01/IntelliJ-IDEA-Conf-2022.html","excerpt":"","text":"çœ‹å®Œäº†çš„ IntelliJ IDEA Conf 2022 (day 1) å’Œ IntelliJ IDEA Conf 2022 (day 2)å†™ä¸€ä¸‹å°è±¡æ¯”è¾ƒæ·±çš„å’Œè§‚åæ„Ÿ day1Surviving Open Source, by Donald Raabä»‹ç»äº†è¿™ä½è€å“¥å‚ä¸å¼€æºé¡¹ç›®çš„å¿ƒè·¯å†ç¨‹ Letâ€™s Set Sail With Fleet!, by Vitaly Bragilevskyï¼ˆç”¨äº†è‹±æ–‡å•å¼•å·ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨å˜æˆäº†ä¸­æ–‡çš„ï¼Œå¯èƒ½å’Œé…ç½®æœ‰å…³ï¼‰ è¿™ä½è€å“¥éå¸¸é£è¶£å¹½é»˜ åœ¨æ¼”ç¤ºåˆ†å¸ƒå¼è®¡ç®—å™¨åº”ç”¨çš„åŠ æ³•åŠŸèƒ½æ—¶ï¼Œ2 + 3 = -1ï¼Œ5 + 6 = -1ï¼Œè¯„è®ºåŒºç‚¸äº†é”…ï¼Œçº·çº·æå‡ºè‡ªå·±çš„è§£å†³æ–¹æ¡ˆ 123456789â€‹Add is disabled...â€‹addition uses subtract microservice...â€‹you&#x27;re subtracting...â€‹Looks like &#x27;+&#x27; is mapped to &#x27;-&#x27; button...â€‹you have minus in your java implementation ä½†å…¶å®æ˜¯æ•…æ„è£…ä½œç¿»è½¦çš„æ ·å­ï¼ŒèŠ‚ç›®æ•ˆæœç½¢äº†ï¼Œå®åˆ™æ˜¯ä¸ºäº†å±•ç¤º Fleet çš„è¿œç¨‹ååŠ©åŠŸèƒ½ï¼ˆç±»ä¼¼ IDEA çš„ Code With Meï¼‰ 1give them both an Oscar already æœ€å QA ç¯èŠ‚ï¼Œå½“é—®åˆ° Fleet æ˜¯ä¸æ˜¯ä¸ºäº†æ›¿æ¢ IDEA è€Œå¼„å‡ºæ¥çš„æ—¶å€™ï¼Œä¸»æŒäººæŒ‘äº†æŒ‘çœ‰ï¼Œç„¶åè€å“¥åäº†ä¸‹å£æ°´ï¼Œä¹Ÿæ¯”è¾ƒæç¬‘ï¼Œæ„Ÿè§‰æœ‰ç‚¹åƒé€å‘½é¢˜ ä»¥ä¸‹æ˜¯ä»–çš„åŸè¯ï¼ˆè‡ªåŠ¨ç”Ÿæˆçš„å­—å¹•æœ‰éƒ¨åˆ†é”™è¯¯ï¼Œè¿™é‡Œåšäº†è°ƒæ•´å’Œåˆ äº†éƒ¨åˆ† uh è¯­æ°”è¯ï¼‰ 1234567891011I think Fleet is not designed to replace IntelliJ IDEA.So what I&#x27;ve showed you here is an IDE for working with polyglot projects with stuff like that, but I don&#x27;t think that when you have a project in Java or in Kotlin or in one language that Fleet will be enough for your experience.So I believe from my point of view, it&#x27;s not official statement from JetBrains by the way by no means.So what I feel, for me like when I have this dedicated project in one language, it&#x27;s great to use IDEA or maybe CLI with all that stuff and that very powerful IDE, but if you want to do something quickly, to edit something, to check something, then Fleet is great.So it&#x27;s not a replacement as I see, it&#x27;s a very nice addition.So that&#x27;s what I think. æ€»çš„æ¥è¯´ï¼ŒFleet ä¸æ˜¯ä¸ºäº†æ›¿æ¢ IDEA è€Œå¼„å‡ºæ¥çš„ï¼ˆæ±‚ç”Ÿæ¬²æ‹‰æ»¡ï¼‰ï¼Œåªæ˜¯ä½œä¸ºä¸€ä¸ªè¡¥å……ï¼Œæˆ–è€…è¾…åŠ©å·¥å…· ä½†æ˜¯æ”¯æŒå¤šè¯­ç§ï¼Œè½»é‡çº§çš„ç‰¹æ€§ï¼Œæ˜çœ¼äººéƒ½çœ‹å‡ºæ¥æ˜¯å¯¹æ ‡ VSCodeã€‚ã€‚ã€‚ Should I Upgrade to Java 17?, by Nikhil Nanivadekarä¸»è¦æ˜¯åšäº†ä¸€äº› Benchmarkï¼ŒJDK 8ï¼ŒJDK 11ï¼ŒJDK 17ï¼ŒJDK 17 çš„æ•°æ®æ€»ä½“æ¥è¯´æ¯”ä½ç‰ˆæœ¬çš„å¥½çœ‹ï¼Œæ€§èƒ½æ›´å¼ºï¼Œå†…å­˜å ç”¨æ›´ä½ ç„¶åä»‹ç»äº† JDK8 ä»¥åçš„æ–°ç‰¹æ€§ æ¯”å¦‚ var ç±»å‹æ¨æ–­ï¼Œswitch æ”¯æŒæšä¸¾å’Œè¡¨è¾¾å¼ï¼Œç©ºæŒ‡é’ˆå¼‚å¸¸æ‰“å°ï¼ˆä¸€ä¸ªå¯¹è±¡æ¯”å¦‚ a.b().c().d() æŠ¥ NPEï¼Œä¹‹å‰å¾ˆéš¾çœ‹å‡ºæ˜¯ a è¿˜æ˜¯ b() è¿˜æ˜¯ c() è¿”å› nullï¼Œè¿™é‡Œä¼šç›´æ¥æ‰“å°å‡ºæ¥å‡ºç° null çš„åœ°æ–¹ï¼Œæ–¹ä¾¿ debugï¼‰ï¼Œæ–‡æœ¬å—ï¼ŒInstanceof å¢å¼ºï¼ŒRecordï¼Œå¯†å°ç±» ä½†æˆ‘æ„Ÿè§‰ä»–çš„ PPT é‡Œæåˆ°çš„ JDK ç‰ˆæœ¬æ˜¯é”™çš„ã€‚ã€‚ã€‚ æ€»çš„æ¥è¯´ï¼ŒJDK 17 å·²ç» GA ä¸€å¹´å¤šäº†ï¼ŒJDK19 ä¹Ÿ GA äº†ï¼Œæ˜å¹´ JDK 21 LTS ä¹Ÿä¼š GAï¼Œè¿˜æ²¡å‡çº§çš„èµ¶å¿«å‡çº§ è¯æ˜¯è¿™ä¹ˆè¯´ï¼Œé™ˆå¹´è€ç è°å‡è°çŸ¥é“ï¼Œåªè¦ Spring Boot ä¸å‡ºä¸ª log4j çº§åˆ«çš„æ¼æ´ï¼Œé‚£å¤§ç¯å¢ƒä¸‹ JDK 8 è¿˜ä¼šå­˜åœ¨å¾ˆä¹…ï¼Œè¿™ä¸ªæ˜¯æˆ‘æ„Ÿè§‰çš„ï¼Œå¦‚æœæœ‰ä¸åŒçš„æƒ³æ³•æˆ–æ„è§ï¼Œä»¥ä½ çš„ä¸ºå‡† æ–°é¡¹ç›®æ˜¯å¯ä»¥ç”¨çš„ï¼Œå¦‚æœæ²¡ç”¨ JDK 11ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¸Š JDK 17 Spring 6ï¼ŒSpring Boot 3ï¼Œä¹Ÿè¦ JDK 17 èµ·æ­¥ è¯´å¥é¢˜å¤–è¯ï¼Œå¦‚æœä½ ç”¨è¿‡ Kotlinï¼Œä¼šå‘ç°è¿™äº›æ‰€è°“æ–°ç‰¹æ€§ï¼Œåœ¨ Kotlin åˆšå‡ºé“çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šæ˜¯è‡ªå¸¦çš„ï¼ŒJava ç°åœ¨å·²ç»æ…¢æ…¢å˜æˆ Kotlin çš„æ¨¡æ · ğŸ¶ æ­¤å¤–ï¼Œç”¨æ¥å¯¹æ ‡ Go åç¨‹çš„ Java è™šæ‹Ÿçº¿ç¨‹ï¼Œå…¶å®äººå®¶ Kotlin ä¹Ÿæ—©å°±æœ‰åç¨‹å’Œ Channel çš„å®ç°äº†ï¼Œåœ¨ Dockerã€äº‘åŸç”Ÿç­‰çš„ buff åŠ æŒä¸‹ï¼ŒJava é€æ¸å¤±å»äº†è·¨å¹³å°çš„ä¼˜åŠ¿ï¼Œæ‰€ä»¥æäº†ä¸ª Spring Native æ„Ÿè§‰ä½œä¸º 20 å¤šå¹´çš„è€å¤§å“¥ï¼ŒJava èµ·äº†ä¸ªå¤§æ—©ï¼Œèµ¶äº†ä¸ªæ™šé›†ï¼Œåœ¨é¢å¯¹åè¾ˆå¼‚å†›çªèµ·çš„æ—¶å€™ï¼Œå±æœºæ„Ÿä¹ŸæŒºå¼ºçš„ï¼Œè¿˜æ˜¯ä¸ªäººè§‚ç‚¹ï¼Œæœ‰ä¸åŒçš„ä»¥ä½ çš„ä¸ºå‡† Event Streaming and Processing Using Apache Pulsar, by Mary Grygleskiæ²¡æ€ä¹ˆäº†è§£è¿‡è¿™ä¸ªäº§å“ï¼Œæ²¡æœ‰å¯¹åº”çš„çŸ¥è¯†å‚¨å¤‡ï¼Œè®²å¾—å¾ˆæ¸…æ¥šï¼Œå¬èµ·æ¥ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œåé¢ç”¨åˆ°äº†å†å›å¤´é‡çœ‹ä¸€é å£éŸ³éå¸¸ç†Ÿæ‚‰å’Œäº²åˆ‡ï¼Œä¸å¼€å­—å¹•å¯ä»¥ç»ƒä¸‹å¬åŠ› Kubernetes Native Java, by Josh Longè¯­é€Ÿä¸€å¦‚æ—¢å¾€åœ°å¿«ï¼Œä¸å¼€å­—å¹•å¥½å¤šæ—¶å€™éƒ½è·Ÿä¸ä¸Š ä¸ºä»€ä¹ˆè¦å‡çº§ JDK 17ï¼Œä»–æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„æ¯”å–»ï¼ˆä¿®å¤ bug å’Œå»æ‰ä¸€äº›è¯­æ°”è¯ï¼‰ 123456789101112131415You know, for Spring Framework 6 as we mentioned, you can&#x27;t use Java 8 and Java 11 now, this is for good reason, they are terrible versions to use in production today, there is no situation which using Java 8 or 11, even ironically, is appropriate.Java 17 is technically superior to Java 8 in every conceivable way, it&#x27;s faster, more memory efficient, more observable, more secure, more robust, more syntax switch, more performant, more operations, friendly etc.It&#x27;s just a better piece of software in every conceivable way.It&#x27;s also morally superior to Java 8 in every conceivable way.You won&#x27;t like the look of despair and chagrin in your children&#x27;s faces when they find out that you&#x27;re using Java 8 in production.Don&#x27;t do it, be the change you want to see in the world, do the right thing.Java 17 is the right thing to do in 2022.My friends, I don&#x27;t think I need to go on about why Java 17 is an appropriate choice, or Java 17 or later is an appropriate choice, but just, if nothing else, just judging by the version number alone, I think it&#x27;s fair to say that Java 17 is more than twice as good as Java 8. é‡ç‚¹åœ¨æœ€åä¸€å¥è¯ï¼Œå¥½åƒæ²¡æ¯›ç—… æ¥ç€è®²äº†è‡ªå®šä¹‰ banner çš„æ”¹åŠ¨ï¼ŒSpring Boot 3 ä¸æ”¯æŒå›¾ç‰‡æ ¼å¼çš„è‡ªåŠ¨è½¬æ¢äº†ï¼Œä½†æ˜¯çº¯æ–‡å­—ä¸å½±å“ï¼Œä¸»è¦æ˜¯ç”¨çš„äººå°‘ï¼Œä¹Ÿå‡ºäºæ€§èƒ½è€ƒè™‘ åé¢ä¸»è¦æ˜¯ Spring Native ç›¸å…³ï¼Œå¦‚ä½•é€šè¿‡è‡ªå®šä¹‰ actuator æ¥å£è®© K8s çš„ Liveness å’Œ Readiness æ„ŸçŸ¥ï¼Œä»è€Œä½¿åº”ç”¨ä¿æŒå¥åº·çŠ¶æ€ Spring Native æˆ‘ä¹Ÿå°è¯•è¿‡ï¼Œbuild çš„æ—¶å€™ CPU å’Œå†…å­˜å…¨éƒ¨è·‘æ»¡ï¼ŒèŠ±è´¹ä¸€åˆ†å¤šé’Ÿæ‰“åŒ… Docker é•œåƒï¼Œä»…ä»…æ˜¯ä¸€ä¸ª Hello Worldï¼Œä½†æ˜¯å¯åŠ¨ç¡®å®å¾ˆå¿«ï¼Œå†…å­˜å ç”¨ä¹Ÿå¾ˆä½ï¼ˆå’Œ Spring Boot Jar ç›¸æ¯”ï¼‰ï¼Œä½†æ˜¯è¦åœ¨äº‘åŸç”Ÿè¿™å—æ‰“å¾—è¿‡ Goï¼Œè¿˜è¦å†ä¸‹ç‚¹åŠŸå¤«ï¼ŒGo WEB åº”ç”¨çš„å†…å­˜å ç”¨ + é™æ€ç¼–è¯‘ + Docker æ‰“åŒ…ä¸€å¥—ç»„åˆæ‹³ç¡®å®å¾ˆèˆ’æœï¼Œæœ‰ä¸åŒæ„è§ä»¥ä½ çš„ä¸ºå‡† æœ€åä»‹ç»äº†ä¸‹ Graphqlï¼Œè¿™ä¸ªå¾ˆæ—©å°±å¬è¿‡ä½†å…¶å®æ²¡å®é™…ç”¨è¿‡ï¼Œå¿ƒè¡€æ¥æ½®æ—¶å†æ¥ç ”ç©¶ä¸€ç•ªï¼Œåªæ˜¯ç¬¬ä¸€æ„Ÿè§‰å°±æ˜¯æ•°æ®çš„æƒé™ç²’åº¦é—®é¢˜ï¼Œåˆ«çš„ç”¨æˆ·ä¼šä¸ä¼šè®¿é—®åˆ°ä¸åº”è¯¥çœ‹åˆ°çš„æ•°æ®ï¼Œåé¢ç”¨åˆ°å†è¯¦ç»†å­¦ä¹  day 2Idiomatic Kotlin, by Anton Arhipovä¸»è¦æ˜¯ä»‹ç»äº†ä¸€äº›å¸¸è§çš„ç”¨é”™çš„ Kotlin å†™æ³•ï¼Œä¹Ÿä¸èƒ½è¯´é”™ï¼Œåªæ˜¯è¦æ€æ ·å†™æ‰ä¼šæ›´åœ°é“æ˜¾å¾—ä¸“ä¸šï¼Œå¥½æ¯”è‹±è¯­æ¯è¯­è€…è¯´ä¸œè¥¿å–œæ¬¢ä¸­é—´åŠ ä¸ª you know æˆ–è€… I meanï¼Œéæ¯è¯­è€…ä¸€èˆ¬ä¸ä¼šè¿™æ ·è¯´ï¼Œä½†æ˜¯å¯èƒ½åœ¨å£è¯­ä¸­åŠ ä¸Šå°±ä¼šæ˜¾å¾—åœ°é“ ä½œä¸ºæœ‰è¿‡å¤šé—¨ç¼–ç¨‹ç»éªŒçš„å¼€å‘è€…ï¼Œæœ‰æ—¶ç¡®å®ä¼šå…ˆå…¥ä¸ºä¸»ï¼ŒæŠŠä¹‹å‰ç”¨è¿‡çš„è¯­è¨€çš„å†™æ³•ç”¨åˆ°æ–°å­¦è¯­è¨€ä¸Šï¼Œèƒ½è·‘ï¼Œä½†æ˜¯å°±æ˜¯æ˜¾å¾—ä¸ä¸“ä¸š å¥½å¤šç¼–ç¨‹è¯­è¨€è¦è§£å†³çš„é—®é¢˜ä¸€æ ·ï¼Œåªæ˜¯å®ç°çš„è¿‡ç¨‹ä¸åŒï¼Œæˆ–è€…æœ‰è‡ªå·±çš„ä¸“æœ‰åè¯ï¼Œæ¯”å¦‚åš WEB å¼€å‘ï¼ŒSpring é‡Œçš„ AOPï¼Œåœ¨ Python é‡Œé¢å«è£…é¥°å™¨ï¼Œåœ¨ Go é‡Œå«ä¸­é—´ä»¶ï¼Œä¸èƒ½è¯´å®Œå…¨ä¸€è‡´ï¼Œåªèƒ½è¯´å¤§éƒ¨åˆ†è¦å®ç°çš„åŠŸèƒ½éƒ½æ˜¯ç›¸åŒçš„ åš Go å¼€å‘çš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“å°† Java çš„é¢å‘å¯¹è±¡çš„æ€ç»´å»åšï¼Œé‡åˆ°é—®é¢˜ï¼Œä»€ä¹ˆéƒ½ä¸è¯´å…ˆåˆ›å»ºä¸€ä¸ªç±»ï¼Œä½†æ˜¯ Go ä¸æ˜¯å®Œå…¨é¢å‘å¯¹è±¡ï¼Œè™½ç„¶å¯ä»¥å®ç°é¢å‘å¯¹è±¡ï¼Œæ‰€ä»¥æœ‰æ—¶å€™å¼€å‘å‰æœ‰å¿…è¦å¥½å¥½è¿‡ä¸€éå®˜æ–¹æ–‡æ¡£ï¼Œè¦æ€ä¹ˆå†™æ‰èƒ½æ›´åŠ  &quot;Gopher&quot; Stories of Building a Remote Development IDE, by Matt Ellisä¸»è¦ä»‹ç»äº†è¿œç¨‹å¼€å‘å’Œå®ç°è¿™ä¸ªåŠŸèƒ½çš„å¿ƒè·¯å†ç¨‹ è¿™ä¸ªè¿œç¨‹å¼€å‘æ˜¯ä»£ç ã€ç³»ç»Ÿèµ„æºç­‰ç­‰å…¨åœ¨äº‘ç«¯ï¼Œæ¼”ç¤ºé‡Œæ˜¯ç”¨ AWSï¼Œå›½å¤–ä¼ä¸šç”¨ AWS è¾ƒå¤šï¼Œç›®å‰æˆ‘ä¹Ÿè¿˜æ²¡å°è¯•è¿‡ï¼Œå›½å†…ä¸€å…†å°æ°´ç®¡èƒ½å¹²å•¥ï¼Ÿ è¿œç¨‹å¼€å‘ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œè°ƒè¯•çš„æ—¶å€™å¦‚ä½•è®¿é—® localhostï¼Ÿè§£å†³æ–¹æ³•æ˜¯åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œç«¯å£è½¬å‘ï¼Œé€šè¿‡è®¿é—®æœåŠ¡å™¨çš„ç›¸å…³ç«¯å£ è¿˜æœ‰ä»‹ç» Code With Me çš„åŠŸèƒ½ è¿™ä¸ªå®ç°è¿œç¨‹å¼€å‘çš„åŠŸèƒ½çš„æ¶æ„ï¼Œæœ‰ç‚¹åƒ MMORPG Evolving JUnit 5, by Marc Philippè€å®è¯´ï¼Œå¯¹ JUnit çš„ç ”ç©¶ä¸å¤šï¼Œæ‰€ä»¥å¯¹äºè§†é¢‘çš„ä¸œè¥¿å¥½å¤šéƒ½æ˜¯éå¸¸é™Œç”Ÿï¼Œç•™ä¸‹çš„å°è±¡ä¹Ÿä¸æ·±ï¼ˆæ˜¯æˆ‘ä¸ªäººé—®é¢˜ï¼Œè§†é¢‘æ¼”ç¤ºå¾ˆå¥½ï¼‰ Project Loom: Revolution in Concurrency or Obscure Implementation Detail?, by Tomasz Nurkiewiczå…¶å®å¾ˆå¤šæ¦‚å¿µéƒ½å’Œå…¶ä»–è¯­è¨€çš„åç¨‹ç›¸ä¼¼ï¼ŒJava é‡Œå«è™šæ‹Ÿçº¿ç¨‹ï¼Œæ˜¯ä¸€ä¸ªå¼€å‘ä¸­çš„åŠŸèƒ½ï¼Œéœ€è¦åŠ å‚æ•°æ‰èƒ½å°è¯•ï¼ŒJDK 19 1java --enable-preview ä»ç”¨æˆ·çº¿ç¨‹è®²åˆ°å†…æ ¸çº¿ç¨‹ï¼Œåœ¨ Java çš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼ŒJVM è‡ªå·±å®ç°äº†ä¸€å¥—è°ƒåº¦å™¨ï¼Œé‚£æ—¶è®¡ç®—æœºè¿˜ä¸æ˜¯éå¸¸æ™®åŠï¼Œä¸€èˆ¬æ˜¯å•æ ¸ CPUï¼Œä½† Java ä¹Ÿèƒ½å®ç°å¤šçº¿ç¨‹çš„æ•ˆæœï¼Œè¿™ç§æ˜¯å¤šå¯¹ä¸€çš„æ¨¡å‹ï¼Œä¹Ÿå«ç»¿è‰²çº¿ç¨‹ï¼Œç»¿è‰²çº¿ç¨‹å¹¶ä¸ä¾èµ–åº•å±‚çš„æ“ä½œç³»ç»Ÿï¼Œçº¿ç¨‹çš„è°ƒåº¦éƒ½å‘ç”Ÿåœ¨ç”¨æˆ·ç©ºé—´ åœ¨å¤šæ ¸çš„ç¯å¢ƒä¸‹ï¼Œè¿™ç§å¤šå¯¹ä¸€çš„æ¨¡å‹å°±ä¸èƒ½å‘æŒ¥ä¼˜åŠ¿äº†ï¼Œä»å®ç°çš„æ•ˆæœæ¥è¯´ï¼Œç»¿è‰²çº¿ç¨‹å®ç°çš„æ˜¯å¹¶å‘ä¸æ˜¯å¹¶è¡Œï¼Œå› æ­¤å‡ºç°ç¬¬äºŒç§æ¨¡å‹ å¤šå¯¹å¤šæ¨¡å‹ï¼Œä¸€å †ç”¨æˆ·çº¿ç¨‹å¯¹åº”ä¸€å †å†…æ ¸çº¿ç¨‹ï¼Œä¹Ÿæ˜¯ç”± JVM è¿›è¡Œè°ƒåº¦ï¼Œç”¨å¾—ä¸å¤š éšç€ JVM å’Œæ“ä½œç³»ç»Ÿçš„æ—¥æ¸æˆç†Ÿä»¥åŠè®¡ç®—æœºçš„å‘å±•ï¼Œæœ€åå‡ºç°çš„æ˜¯ä¸€å¯¹ä¸€æ¨¡å‹ï¼Œä¸€ä¸ªç”¨æˆ·çº¿ç¨‹å¯¹åº”ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œè€Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒLinux ç³»ç»Ÿä¼šå°†çº¿ç¨‹çœ‹ä½œè¿›ç¨‹ï¼ˆå…¶ä»–ç³»ç»Ÿä¸æ˜¯ï¼‰ï¼Œæ‰€ä»¥çº¿ç¨‹çš„åˆ›å»ºæ˜¯æ¯”è¾ƒè€—è´¹ç³»ç»Ÿèµ„æºçš„ï¼ˆé»˜è®¤ 1Mï¼‰ Java é‡Œçš„è™šæ‹Ÿçº¿ç¨‹ï¼Œä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š Virtual threadï¼šéå¸¸è½»é‡çš„ç”¨æˆ·çº¿ç¨‹ï¼ˆç›¸å½“äºå…¶ä»–è¯­è¨€çš„åç¨‹ã€æˆ–è€… Taskï¼‰ Carrier threadï¼šJDK 19 å‰çš„ Java çº¿ç¨‹ï¼Œå¯¹åº”ç€ä¸€æ¡å†…æ ¸çº¿ç¨‹ï¼Œè™šæ‹Ÿçº¿ç¨‹ pin åœ¨è¿™é‡Œè¿›è¡Œå¤„ç† Continuationï¼šä¸€å †å¯ä»¥è¢«æš‚åœçš„ä»£ç ï¼Œå½“åœ¨æ–¹æ³•ä¸­æš‚åœï¼Œå†æ‰§è¡Œï¼Œä¸ä¼šä»å¤´æ‰§è¡Œæ–¹æ³•ï¼Œè€Œæ˜¯åœ¨æš‚åœå¤„æ¥ç€æ‰§è¡Œï¼ˆPPT åŸæ–‡ï¼šA piece of code that can be paused, at almost no costï¼‰ æœ‰ç§ IO å¤šè·¯å¤ç”¨çš„æ„Ÿè§‰ è™šæ‹Ÿçº¿ç¨‹å’Œæ™®é€šçº¿ç¨‹çš„ç”¨æ³•åŸºæœ¬ä¸€æ ·ï¼Œä½†æ˜¯çº¿ç¨‹æ± å¯ä»¥å…äº†ï¼Œå› ä¸ºå¯ä»¥åˆ›å»ºéå¸¸å¤šçš„è™šæ‹Ÿçº¿ç¨‹ 1234567891011121314Thread t = Thread.startVirtualThread(() -&gt; &#123; System.out.println(&quot;Hello World&quot;);&#125;)Thread t = Thread .ofVirtual() .name(&quot;MyThread&quot;) .unstarted(() -&gt; task());ExecutorService es = Executors.newVirtualThreadPerTaskExecutor();ThreadFactory factory = Thread .ofVirtual() .factory(); JavaFX for Mobile Development, by Gail Andersonä¸»è¦ä»‹ç» JavaFX å’Œ Gluonï¼Œä½†æ˜¯å·²ç»åäº† WEB è¿™æ¡è·¯äº†ï¼Œæ‰€ä»¥æ²¡æœ‰å¤ªè®¤çœŸå¬ åˆšå­¦ Java æ—¶å€’æ˜¯åšè¿‡ä¸€äº› GUI åº”ç”¨ï¼Œä¹Ÿå†™è¿‡ Androidï¼Œæœ€åè¿˜æ˜¯å›åˆ°äº† WEB æ‰¾æœºä¼šé‡æ–°çœ‹ä¸€é æœ€åé™„ä¸ŠåŸè§†é¢‘ï¼ˆç§‘å­¦ï¼‰ï¼š day 1Agenda: 0:00 â€“ Countdown0:53 â€“ Introduction4:35 â€“ Keynote: Surviving Open Source, by Donald Raab1:01:27 â€“ Letâ€™s Set Sail With Fleet!, by Vitaly Bragilevsky1:59:46 â€“ Should I Upgrade to Java 17?, by Nikhil Nanivadekar3:01:06 â€“ Event Streaming and Processing Using Apache Pulsar, by Mary Grygleski4:00:19 â€“ Kubernetes Native Java, by Josh Long day 2Agenda: 0:00 â€“ Countdown0:53 â€“ Introduction5:49 â€“ Idiomatic Kotlin, by Anton Arhipov1:03:12 â€“ Wish You Were Here: Stories of Building a Remote Development IDE, by Matt Ellis2:01:22 â€“ Evolving JUnit 5, by Marc Philipp3:01:18 â€“ Project Loom: Revolution in Concurrency or Obscure Implementation Detail?, by Tomasz Nurkiewicz4:02:37 â€“ JavaFX for Mobile Development, by Gail Anderson","categories":[{"name":"ç¤¾åŒºæ´»åŠ¨","slug":"ç¤¾åŒºæ´»åŠ¨","permalink":"https://linweiyuan.github.io/categories/%E7%A4%BE%E5%8C%BA%E6%B4%BB%E5%8A%A8/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"Kotlin","slug":"Kotlin","permalink":"https://linweiyuan.github.io/tags/Kotlin/"},{"name":"IntelliJ IDEA Conf","slug":"IntelliJ-IDEA-Conf","permalink":"https://linweiyuan.github.io/tags/IntelliJ-IDEA-Conf/"}]},{"title":"Goå®ç°Podåå°ç«¯å£è½¬å‘","slug":"Goå®ç°Podåå°ç«¯å£è½¬å‘","date":"2022-09-27T18:39:50.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2022/09/27/Goå®ç°Podåå°ç«¯å£è½¬å‘.html","link":"","permalink":"https://linweiyuan.github.io/2022/09/27/Go%E5%AE%9E%E7%8E%B0Pod%E5%90%8E%E5%8F%B0%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91.html","excerpt":"","text":"GitHub: https://github.com/linweiyuan/goportforwarder åœ¨Kubernetes in docker (kind) çš„ç¯å¢ƒä¸‹ï¼Œæ²¡æœ‰æ‰¾åˆ°å¥½ç”¨çš„æ”¯æŒåå°è¿è¡Œçš„ç«¯å£è½¬å‘æ–¹æ¡ˆï¼Œè‡ªå·±å®ç°äº†ä¸ªç®€å•çš„","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://linweiyuan.github.io/tags/Kubernetes/"},{"name":"Golang","slug":"Golang","permalink":"https://linweiyuan.github.io/tags/Golang/"},{"name":"Pod","slug":"Pod","permalink":"https://linweiyuan.github.io/tags/Pod/"}]},{"title":"Ingressé…ç½®pgAdminéœ€è¦æ³¨æ„çš„é—®é¢˜","slug":"Ingressé…ç½®pgAdminéœ€è¦æ³¨æ„çš„é—®é¢˜","date":"2022-09-23T17:32:34.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2022/09/23/Ingressé…ç½®pgAdminéœ€è¦æ³¨æ„çš„é—®é¢˜.html","link":"","permalink":"https://linweiyuan.github.io/2022/09/23/Ingress%E9%85%8D%E7%BD%AEpgAdmin%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E9%97%AE%E9%A2%98.html","excerpt":"","text":"å½“ä½¿ç”¨ Docker æˆ–è€… Docker Compose éƒ¨ç½² pgAdmin æ¥æ–¹ä¾¿æœ¬åœ°å¼€å‘è®¿é—®ä½¿ç”¨çš„æ—¶å€™ï¼Œæ˜¯ä¸éœ€è¦é¢å¤–æ³¨æ„çš„ï¼Œå› ä¸ºé€šå¸¸éƒ½æ˜¯ç›´æ¥æš´éœ²ç«¯å£å‡ºå» ä½†æ˜¯åŸºäº K8s ç¯å¢ƒä¸‹éƒ¨ç½²çš„æ—¶å€™ï¼Œéœ€è¦ç¨å¾®æ³¨æ„ä¸€ç‚¹åœ°æ–¹ K8s é›†ç¾¤å‡†å¤‡K8s çš„æ­å»ºæ–¹å¼å¤šç§å¤šæ ·ï¼Œæ¯”å¦‚ k3dã€kubeadmã€kind ç­‰ï¼Œç”±äºå¤šå¹´ä¹‹å‰æœ‰è£¸è£… Oracle æŠŠç³»ç»Ÿæçƒ‚çš„ç»å†ï¼Œå¯¹äºä¸€äº›è½¯ä»¶çš„å®‰è£…ï¼Œæˆ‘è¿™è¾¹æ˜¯æ¯”è¾ƒè°¨æ…çš„ã€‚å†µä¸”åé¢æ¥è§¦äº†å®¹å™¨ï¼Œèƒ½åœ¨é‡Œé¢è·‘å°±é‡Œé¢è·‘ï¼Œä»€ä¹ˆä¸¤å€è¯»å†™çš„é—®é¢˜ä¸è€ƒè™‘ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨çš„æ˜¯ kind æ¥æ­å»ºé›†ç¾¤ ä¸ºäº†æœåŠ¡åœ¨å®¹å™¨å¤–èƒ½è®¿é—®ï¼Œkind åˆ›å»º K8s é›†ç¾¤çš„æ—¶å€™è¿˜éœ€è¦ä¸€äº›é¢å¤–çš„é…ç½® 1234567891011121314151617181920kind: ClusterapiVersion: kind.x-k8s.io/v1alpha4networking: apiServerAddress: 127.0.0.1 apiServerPort: 6443nodes: - role: control-plane kubeadmConfigPatches: - | kind: InitConfiguration nodeRegistration: kubeletExtraArgs: node-labels: &quot;ingress-ready=true&quot; extraPortMappings: - containerPort: 80 hostPort: 80 protocol: TCP - containerPort: 443 hostPort: 443 protocol: TCP Ingress Controller å‡†å¤‡K8s æš´éœ²æœåŠ¡çš„æ–¹å¼ä¹Ÿå¤šç§å¤šæ ·ï¼Œæ¯”å¦‚ NodePortã€LoadBalancerã€Ingressã€‚ç”±äº kind çš„ç‰¹æ®Šæ€§ï¼Œæ•´ä¸ª K8s é›†ç¾¤éƒ½è·‘åœ¨å®¹å™¨ä¸­ï¼Œæ‰€ä»¥å°±ç®— NodePort ä¹Ÿæ˜¯å®¹å™¨é‡Œçš„ç«¯å£ï¼Œæ‰€ä»¥è¿™æ¬¡ä¸»è¦è®¨è®º Ingressï¼Œä½¿ç”¨çš„æ˜¯ Nginx ä½¿ç”¨ Ingressï¼Œé¦–å…ˆéœ€è¦åœ¨é›†ç¾¤ä¸­å®‰è£…ä¸€ä¸ª Ingress Controllerï¼Œç„¶åé€šè¿‡ Ingress æ¥è¿›è¡Œä¸€äº›é…ç½®ï¼Œå½“ apply çš„æ—¶å€™ï¼ŒIngress Controller ä¼šè‡ªåŠ¨æ›´æ–° nginx.conf å¹¶è¿›è¡Œ reload å¦‚æœä¹‹å‰é…ç½®è¿‡ Nginxï¼Œå…¶å®ç±»æ¯”èµ·æ¥æ˜¯å¾ˆåƒçš„ï¼Œä¸€ä¸ª Ingress Controller ç›¸å½“äºä¸€ä¸ª Nginxï¼Œä¸€ä¸ª Ingress åˆ™å¥½æ¯” Nginx çš„é…ç½®æ–‡ä»¶ å½“ Ingress Controller å‡†å¤‡å¥½åï¼Œä¼šä»¥ NodePort çš„æ–¹å¼æš´éœ² 80 å’Œ 443 ç«¯å£ 123NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEingress-nginx-controller NodePort 10.96.30.54 &lt;none&gt; 80:30860/TCPï¼Œ443:31875/TCP 3d pgAdmin å‡†å¤‡ä¸ºäº†ç®€å•èµ·è§ï¼Œä½¿ç”¨ helm æ¥å®‰è£… pgAdmin 1helm install pgadmin runix/pgadmin4 --set env.email=root@linweiyuan.com --set env.password=toor Ingress å‡†å¤‡é…ç½®å¥½ Ingress è§„åˆ™ï¼Œå› ä¸ºæƒ³åšåˆ°è®¿é—®ä¸åŒçš„ path è·¯ç”±åˆ°ä¸åŒçš„æœåŠ¡ï¼Œæ‰€ä»¥è¿™é‡Œç”¨ &#x2F;pgAdmin æ¥è®¾ç½® 123456789101112131415apiVersion: networking.k8s.io/v1kind: Ingressmetadata: name: pgadmin-ingressspec: rules: - http: paths: - pathType: Prefix path: &quot;/pgAdmin&quot; backend: service: name: pgadmin-pgadmin4 port: number: 80 ä½†æ˜¯æ­¤æ—¶è®¿é—® http://localhost/pgAdmin çš„æ—¶å€™ï¼Œä¼šè¿”å› 404 12Not Found The requested URL was not found on the server. If you entered the URLmanually please check your spelling and try again. pgAdmin è®¿é—®è§£å†³æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œä¼šå‘ç°è¿™ä¹ˆä¸€å¥è¯ 1If you wish to host pgAdmin under a subdirectory rather than on the root of the server, you must specify the location and set the X-Script-Name header which tells the pgAdmin container how to rewrite paths å°±æ˜¯è¯´ Nginx çš„é…ç½®é‡Œè¦åŠ  X-Script-Nameï¼Œä½†æ˜¯åœ¨ K8s é‡Œè¦æ€ä¹ˆåŠ ï¼Ÿ å‰é¢æè¿‡ï¼Œå…¶å®æ— éæ˜¯ä¿®æ”¹ Ingress çš„é…ç½®ï¼Œæ­¤æ—¶å¦‚æœè¿›å…¥ Ingress Controller çš„ pod ä¸­æŸ¥çœ‹é…ç½®æ–‡ä»¶ï¼Œä¼šå‘ç°å½“å‰é…ç½® 1234567bash-5.1$ hostnameingress-nginx-controller-65b4b4df7d-rhd2kbash-5.1$ cat -n nginx.conf | grep pgAdmin 297 location /pgAdmin/ &#123; 303 set $location_path &quot;/pgAdmin&quot;; 415 location = /pgAdmin &#123; 421 set $location_path &quot;/pgAdmin&quot;; è€Œæ ¹æ® pgAdmin å®˜æ–¹æ–‡æ¡£çš„æŒ‡å¼•ï¼Œéœ€è¦æŠŠé…ç½®åŠ åˆ° location ä¸‹ï¼Œå›å¤´æŸ¥çœ‹ K8s å®˜æ–¹æ–‡æ¡£ï¼Œå‘ç°å…¶å®æ˜¯é…ç½® nginx.ingress.kubernetes.io/configuration-snippet å› æ­¤é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œå®Œæ•´é…ç½®æ–‡ä»¶å¦‚ä¸‹ 123456789101112131415161718apiVersion: networking.k8s.io/v1kind: Ingressmetadata: name: pgadmin-ingress annotations: nginx.ingress.kubernetes.io/configuration-snippet: | proxy_set_header X-Script-Name /pgAdmin;spec: rules: - http: paths: - pathType: Prefix path: &quot;/pgAdmin&quot; backend: service: name: pgadmin-pgadmin4 port: number: 80 å† apply 12kaf pgadmin-ingress.yamlingress.networking.k8s.io/pgadmin-ingress configured å†æŸ¥çœ‹ nginx.confï¼Œå·²ç»ç”Ÿæ•ˆäº† 1234567bash-5.1$ cat -n nginx.conf | grep pgAdmin 297 location /pgAdmin/ &#123; 303 set $location_path &quot;/pgAdmin&quot;; 409 proxy_set_header X-Script-Name /pgAdmin; 417 location = /pgAdmin &#123; 423 set $location_path &quot;/pgAdmin&quot;; 529 proxy_set_header X-Script-Name /pgAdmin; æ­¤æ—¶å†è®¿é—® http://localhost/pgAdmin ä¼šè‡ªåŠ¨è·³è½¬ http://localhost/pgAdmin/login?next=%2FpgAdmin%2F ç”¨ä¸Šé¢ helm è®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç å³å¯ç™»å½•è¿›å»ï¼Œé—®é¢˜è§£å†³","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"},{"name":"Kubernetes","slug":"å®¹å™¨æŠ€æœ¯/Kubernetes","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Kubernetes/"}],"tags":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://linweiyuan.github.io/tags/Kubernetes/"},{"name":"pgAdmin","slug":"pgAdmin","permalink":"https://linweiyuan.github.io/tags/pgAdmin/"},{"name":"Ingress","slug":"Ingress","permalink":"https://linweiyuan.github.io/tags/Ingress/"}]},{"title":"åˆ©ç”¨ Github Actions å®ç°ä»£ç æäº¤è‡ªåŠ¨éƒ¨ç½²æ›´æ–° Kubernetes","slug":"åˆ©ç”¨GithubActionså®ç°ä»£ç æäº¤è‡ªåŠ¨éƒ¨ç½²æ›´æ–°Kubernetes","date":"2022-09-13T04:31:35.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2022/09/13/åˆ©ç”¨GithubActionså®ç°ä»£ç æäº¤è‡ªåŠ¨éƒ¨ç½²æ›´æ–°Kubernetes.html","link":"","permalink":"https://linweiyuan.github.io/2022/09/13/%E5%88%A9%E7%94%A8GithubActions%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E6%8F%90%E4%BA%A4%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%9B%B4%E6%96%B0Kubernetes.html","excerpt":"","text":"GitHub: https://github.com/linweiyuan/github-actions-tests å¯ä»¥æ¢æ‰å¤§éƒ¨åˆ† Jenkins + webhooks çš„åœºæ™¯","categories":[{"name":"Github Actions","slug":"Github-Actions","permalink":"https://linweiyuan.github.io/categories/Github-Actions/"}],"tags":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://linweiyuan.github.io/tags/Kubernetes/"},{"name":"Golang","slug":"Golang","permalink":"https://linweiyuan.github.io/tags/Golang/"},{"name":"Github Actions","slug":"Github-Actions","permalink":"https://linweiyuan.github.io/tags/Github-Actions/"}]},{"title":"Go å®ç° i3bar æ˜¾ç¤ºæ­Œè¯","slug":"Goå®ç°i3baræ˜¾ç¤ºæ­Œè¯","date":"2022-09-06T04:31:35.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2022/09/06/Goå®ç°i3baræ˜¾ç¤ºæ­Œè¯.html","link":"","permalink":"https://linweiyuan.github.io/2022/09/06/Go%E5%AE%9E%E7%8E%B0i3bar%E6%98%BE%E7%A4%BA%E6%AD%8C%E8%AF%8D.html","excerpt":"","text":"åŸºäº Go å®ç°çš„ i3bar æ­Œè¯æ˜¾ç¤ºç¨‹åº1git clone https://github.com/linweiyuan/goi3barlyric.git 1go build 123bar &#123; status_command goi3barlyric&#125; é™åˆ¶è¾ƒå¤šï¼Œå®éªŒæ€§è´¨","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Golang","slug":"Golang","permalink":"https://linweiyuan.github.io/tags/Golang/"},{"name":"i3","slug":"i3","permalink":"https://linweiyuan.github.io/tags/i3/"},{"name":"i3bar","slug":"i3bar","permalink":"https://linweiyuan.github.io/tags/i3bar/"}]},{"title":"Docker å¸¸ç”¨æœåŠ¡","slug":"Docker-å¸¸ç”¨æœåŠ¡","date":"2022-07-26T18:42:48.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2022/07/26/Docker-å¸¸ç”¨æœåŠ¡.html","link":"","permalink":"https://linweiyuan.github.io/2022/07/26/Docker-%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1.html","excerpt":"","text":"æ•´ç†äº†ä¸‹å¸¸ç”¨çš„ Docker æœåŠ¡ï¼š https://github.com/linweiyuan/docker-services","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"}]},{"title":"Docker ä½¿ç”¨å›½å†…é•œåƒæºæ—¶é‡åˆ°çš„å‘","slug":"Docker-ä½¿ç”¨å›½å†…é•œåƒæºæ—¶é‡åˆ°çš„å‘","date":"2022-07-25T02:50:47.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2022/07/25/Docker-ä½¿ç”¨å›½å†…é•œåƒæºæ—¶é‡åˆ°çš„å‘.html","link":"","permalink":"https://linweiyuan.github.io/2022/07/25/Docker-%E4%BD%BF%E7%94%A8%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90%E6%97%B6%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91.html","excerpt":"","text":"è¯¦è§ï¼šhttps://github.com/ustclug/discussions/issues/396 â€œæ•…ä» 2020 å¹´ 4 æœˆèµ·ï¼Œä»ç§‘å¤§æ ¡å¤–å¯¹ Docker Hub é•œåƒç¼“å­˜çš„è®¿é—®ä¼šè¢« 302 é‡å®šå‘è‡³å…¶ä»–å›½å†… Docker Hub é•œåƒæºâ€ å¯ä»¥çœ‹åˆ°æ˜¯é‡å®šå‘åˆ°é˜¿é‡Œäº‘ https://docker.mirrors.ustc.edu.cn -&gt; https://ustc-edu-cn.mirror.aliyuncs.com ä½†æ˜¯æ ¡å¤–è®¿é—®è¿™ä¸ªä»“åº“å·²ç»æ˜¯æ—§çš„äº† æ›¿ä»£å“ ç›´è¿ é˜¿é‡Œäº‘ï¼ˆå¹¿å·æˆ–æ­å·ï¼Œæˆ–è‡ªå·±è´¦å·ï¼‰ï¼šhttps://registry.cn-guangzhou.aliyuncs.com ç½‘æ˜“ï¼ˆå®¹æ˜“è¿ç€è¿ç€è‡ªåŠ¨æ–­å¼€ï¼‰ï¼šhttps://hub-mirror.c.163.com","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"}]},{"title":"30åˆ†é’Ÿä»0åˆ°1æ­å»ºä¸€ä¸ªæœ€åŸºç¡€çš„Rancher","slug":"30åˆ†é’Ÿä»0åˆ°1æ­å»ºä¸€ä¸ªæœ€åŸºç¡€çš„Rancher","date":"2022-06-04T04:31:35.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2022/06/04/30åˆ†é’Ÿä»0åˆ°1æ­å»ºä¸€ä¸ªæœ€åŸºç¡€çš„Rancher.html","link":"","permalink":"https://linweiyuan.github.io/2022/06/04/30%E5%88%86%E9%92%9F%E4%BB%8E0%E5%88%B01%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%9C%80%E5%9F%BA%E7%A1%80%E7%9A%84Rancher.html","excerpt":"","text":"å®¿ä¸»æœº Arch Linuxï¼Œcgroup v2, å®‰è£…ä¼šæŠ¥é”™ï¼Œè§£å†³æ–¹æ¡ˆ -&gt; systemd.unified_cgroup_hierarchy&#x3D;0 ç®€å•èµ·è§ï¼ŒåŸºäºè™šæ‹Ÿæœº CentOS 7.9ï¼Œä¸€ä¸»ä¸¤ä»rancher ç®¡ç†æœºï¼š192.168.31.240k8s ä¸€ä¸»èŠ‚ç‚¹ï¼š192.168.31.250k8s ä¸¤ä»èŠ‚ç‚¹ï¼š192.168.31.251, 192.168.31.252 docker ç§æœ‰ä»“åº“ï¼š distribution&#x2F;registry å†…ç½‘ dnsï¼šdnsmasq","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"},{"name":"Rancher","slug":"Rancher","permalink":"https://linweiyuan.github.io/tags/Rancher/"},{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://linweiyuan.github.io/tags/Kubernetes/"},{"name":"CentOS","slug":"CentOS","permalink":"https://linweiyuan.github.io/tags/CentOS/"}]},{"title":"åˆ†å¸ƒå¼ç›¸å…³ç†è®º","slug":"åˆ†å¸ƒå¼ç›¸å…³ç†è®º","date":"2022-05-22T09:42:15.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2022/05/22/åˆ†å¸ƒå¼ç›¸å…³ç†è®º.html","link":"","permalink":"https://linweiyuan.github.io/2022/05/22/%E5%88%86%E5%B8%83%E5%BC%8F%E7%9B%B8%E5%85%B3%E7%90%86%E8%AE%BA.html","excerpt":"","text":"CAP Cï¼šConsistencyï¼ˆä¸€è‡´æ€§ï¼‰è®¿é—®åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¾—åˆ°çš„æ•°æ®éƒ½æ˜¯ä¸€æ ·çš„ï¼ˆéœ€è¦è¿›è¡Œæ•°æ®åŒæ­¥ï¼‰ Aï¼šAvailabilityï¼ˆå¯ç”¨æ€§ï¼‰è®¿é—®åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä»»ä½•ä¸€ä¸ªå¥åº·èŠ‚ç‚¹ï¼Œå¿…é¡»èƒ½å¾—åˆ°å“åº”ï¼Œè€Œä¸æ˜¯è¶…æ—¶æˆ–æ‹’ç»ï¼ˆéœ€è¦ç¡®ä¿ç½‘ç»œç•…é€šï¼‰ Pï¼šPartition toleranceï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰ åˆ†åŒºï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­éƒ¨åˆ†èŠ‚ç‚¹ç”±äºå‘ç”Ÿç½‘ç»œæ•…éšœæˆ–å…¶ä»–åŸå› å¯¼è‡´å’Œå…¶ä»–èŠ‚ç‚¹å¤±å»è¿æ¥ï¼Œå½¢æˆç‹¬ç«‹åˆ†åŒº å®¹é”™ï¼šå‡ºç°ç‹¬ç«‹åˆ†åŒºæ—¶ï¼Œæ•´ä¸ªç³»ç»Ÿä¹Ÿè¦æŒç»­å¯¹å¤–æä¾›æœåŠ¡ åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç½‘ç»œæ˜¯ä¸€ä¸ªä¸ç¡®å®šçš„å› ç´ ï¼Œä½†æ˜¯å‘ç”Ÿç½‘ç»œæ•…éšœçš„æ—¶å€™ï¼ŒæœåŠ¡è¿˜è¦æŒç»­å¯¹å¤–æä¾›æœåŠ¡ï¼Œæ‰€ä»¥åˆ†åŒºå®¹é”™æ€§ä¸å¯é¿å… å‡å¦‚ç½‘ç»œä¸ä½³ï¼Œå¯¼è‡´æœ‰èŠ‚ç‚¹æ•…éšœæ‰çº¿ï¼Œæ­¤æ—¶æ¥æ”¶åˆ°æ–°çš„æ•°æ®å˜æ›´æ—¶ï¼š å¦‚æœè¦ä¿è¯å¯ç”¨æ€§ï¼Œå°±ä¸èƒ½ç­‰å¾…ç½‘ç»œæ¢å¤ï¼Œé‚£èŠ‚ç‚¹ä¹‹é—´å°±ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå› ä¸ºæ•°æ®åŒæ­¥éœ€è¦æ—¶é—´ å¦‚æœè¦ä¿è¯ä¸€è‡´æ€§ï¼Œå°±å¿…é¡»ç­‰å¾…ç½‘ç»œæ¢å¤ï¼Œå®Œæˆæ•°æ®åŒæ­¥åï¼Œæ•´ä¸ªé›†ç¾¤æ‰å¯¹å¤–æä¾›æœåŠ¡ï¼Œåœ¨è¿™ä¸ªæ•°æ®åŒæ­¥çš„è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ P ä¸€å®šå‡ºç°çš„æƒ…å†µä¸‹ï¼ŒA å’Œ C ä¹‹é—´åªèƒ½å®ç°ä¸€ä¸ªï¼Œè¦ä¹ˆ APï¼Œè¦ä¹ˆ CP BASEBASE æ˜¯å¯¹ CAP çš„ä¸€ç§æ‰©å±• Basically Availableï¼ˆåŸºæœ¬å¯ç”¨ï¼‰ï¼šå½“åˆ†å¸ƒå¼ç³»ç»Ÿå‡ºç°æ•…éšœæ—¶ï¼Œå…è®¸ä¸¢å¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼Œä¿è¯æ ¸å¿ƒä¸šåŠ¡å¯ç”¨ Soft Stateï¼ˆè½¯çŠ¶æ€ï¼‰ï¼šåœ¨ä¸€å®šçš„æ—¶é—´å†…ï¼Œå…è®¸å‡ºç°æ•°æ®ä¸ä¸€è‡´çš„çŠ¶æ€ Eventually Consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ï¼šå½“è½¯çŠ¶æ€ç»“æŸåï¼Œç¡®ä¿æ•°æ®æœ€ç»ˆæ˜¯ä¸€è‡´çš„","categories":[{"name":"æ¶æ„è®¾è®¡","slug":"æ¶æ„è®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"CAP","slug":"CAP","permalink":"https://linweiyuan.github.io/tags/CAP/"},{"name":"BASE","slug":"BASE","permalink":"https://linweiyuan.github.io/tags/BASE/"}]},{"title":"Javaé«˜å¹¶å‘æ ¸å¿ƒç¼–ç¨‹å·1è¯»ä¹¦ç¬”è®°","slug":"Javaé«˜å¹¶å‘æ ¸å¿ƒç¼–ç¨‹å·1è¯»ä¹¦ç¬”è®°","date":"2022-05-01T04:13:20.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2022/05/01/Javaé«˜å¹¶å‘æ ¸å¿ƒç¼–ç¨‹å·1è¯»ä¹¦ç¬”è®°.html","link":"","permalink":"https://linweiyuan.github.io/2022/05/01/Java%E9%AB%98%E5%B9%B6%E5%8F%91%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B%E5%8D%B71%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html","excerpt":"","text":"NettyåŸºæœ¬ç»„ä»¶ Channel Reactor Handler Pipelineï¼ˆåŒå‘é“¾è¡¨ï¼‰ EventLoopGroup parentGroup: è´Ÿè´£æ–°è¿æ¥çš„ç›‘å¬å’Œæ¥æ”¶ childGroupï¼šè´Ÿè´£ IO äº‹ä»¶çš„è½®è¯¢å’Œåˆ†å‘å¦‚æœä¸åˆ†å¼€ parent å’Œ child,åˆ™ä¼šå¸¦æ¥ä¸€ä¸ªé£é™©ï¼šæ–°è¿æ¥çš„æ¥æ”¶è¢«æ›´åŠ è€—æ—¶çš„æ•°æ®ä¼ è¾“æˆ–ä¸šåŠ¡å¤„ç†æ‰€é˜»å¡ ChannelOption ä¼˜ç‚¹ API ä½¿ç”¨èµ·æ¥ç›¸å¯¹ç®€å•ï¼Œé™ä½äº†å¼€å‘é—¨æ§› å¯¹å¤šç§ä¸»æµåè®®éƒ½æœ‰å¾ˆå¥½çš„æ”¯æŒï¼ˆç¼–è§£ç åŠŸèƒ½ï¼‰ æ”¯æŒè‡ªå®šä¹‰é…ç½®ï¼Œé€šè¿‡ ChannelHandler å¯ä»¥çµæ´»åœ°æ‰©å±•é€šä¿¡æ¡†æ¶ å…¶ä»–ä¸šç•Œä¸»æµçš„ NIO æ¡†æ¶ç›¸æ¯”ï¼ŒNetty çš„ç»¼åˆæ€§èƒ½æœ€ä¼˜ï¼ˆè°å‡ºä¹¦éƒ½ä¼šè¯´è‡ªå·±çš„å¥½ï¼‰ æˆç†Ÿç¨³å®šï¼ŒNetty ä¿®å¤äº†åœ¨ JDK NIO ä¸­æ‰€æœ‰å·²å‘ç°çš„ bugï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“æœ‰ä»€ä¹ˆ bugï¼‰ æœ‰æ´»è·ƒçš„ç¤¾åŒºï¼Œç‰ˆæœ¬è¿­ä»£å‘¨æœŸçŸ­ï¼Œbug ä¿®å¤åŠæ—¶ ZooKeeperæ ¸å¿ƒä¼˜åŠ¿å°±æ˜¯è§£å†³äº†åˆ†å¸ƒå¼ç¯å¢ƒçš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œæ¯æ—¶æ¯åˆ»è®¿é—® ZooKeeper çš„æ ‘ç»“æ„æ—¶ï¼Œè¿”å›çš„æ•°æ®éƒ½æ˜¯ä¸€è‡´çš„ï¼Œä¸ä¼šå¼•èµ·è„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯» è„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯» è„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡ä¸­è®¿é—®åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ® å¹»è¯»ï¼šå½“ä¸¤ä¸ªå®Œå…¨ç›¸åŒçš„æŸ¥è¯¢æ‰§è¡Œæ—¶ï¼Œä¸¤æ¬¡è¿”å›çš„ç»“æœé›†ä¸ä¸€æ ·ï¼ŒåŸå› å¦ä¸€ä¸ªäº‹åŠ¡æ–°å¢æˆ–åˆ é™¤äº†ç¬¬ä¸€ä¸ªäº‹åŠ¡çš„ç»“æœé›†ä¸­çš„æ•°æ® ä¸å¯é‡å¤è¯»ï¼šåœ¨ä¸€ä¸ªäº‹åŠ¡å†…æ ¹æ®åŒä¸€ä¸ªæ¡ä»¶å¯¹æ•°æ®è¿›è¡Œå¤šæ¬¡æŸ¥è¯¢ï¼Œè¿”å›çš„ç»“æœä¸ä¸€è‡´ï¼ŒåŸå› æ˜¯å…¶ä»–äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ ä¸å¯é‡å¤è¯»å’Œå¹»è¯»çš„åŒºåˆ«ï¼š ä¸å¯é‡å¤è¯»å…³å¿ƒçš„æ˜¯è®°å½•çš„æ›´æ–°æ“ä½œï¼Œå¯¹åŒæ ·çš„è®°å½•ï¼Œå†æ¬¡è¯»å–æ•°æ®å‘ç”Ÿå˜åŒ– å¹»è¯»å…³æ³¨çš„æ˜¯è®°å½•çš„å¢åˆ æ“ä½œï¼Œæ¡æ•°å‘ç”Ÿäº†å˜åŒ– é«˜å¹¶å‘ç¯å¢ƒä¸‹çš„æ¥å…¥å±‚ç½‘å…³ä¸å¤–ä¹å®Œæˆä»¥ä¸‹å·¥ä½œï¼š é‰´æƒ é™æµ åå‘ä»£ç† è´Ÿè½½å‡è¡¡ æ“ä½œç³»ç»Ÿå°†å†…å­˜åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå†…æ ¸æ¨¡å—è¿è¡Œåœ¨å†…æ ¸ç©ºé—´ï¼Œå¯¹åº”çš„è¿›ç¨‹å¤„äºå†…æ ¸æ€ï¼›ç”¨æˆ·ç¨‹åºè¿è¡Œåœ¨ç”¨æˆ·ç©ºé—´ï¼Œå¯¹åº”çš„è¿›ç¨‹å¤„äºç”¨æˆ·æ€ IO è¯»å†™ï¼š ä¸Šå±‚åº”ç”¨é€šè¿‡æ“ä½œç³»ç»Ÿçš„ read ç³»ç»Ÿè°ƒç”¨ï¼ŒæŠŠæ•°æ®ä»å†…æ ¸ç¼“å†²åŒºå¤åˆ¶åˆ°åº”ç”¨ç¨‹åºçš„è¿›ç¨‹ç¼“å†²åŒºï¼Œé€šè¿‡æ“ä½œç³»ç»Ÿçš„ write ç³»ç»Ÿè°ƒç”¨ï¼ŒæŠŠæ•°æ®ä»åº”ç”¨ç¨‹åºçš„è¿›ç¨‹ç¼“å†²åŒºå¤åˆ¶åˆ°æ“ä½œç³»ç»Ÿçš„å†…æ ¸ç¼“å†²åŒº é‚£ä¹ˆä¸ºä»€ä¹ˆè¦è®¾ç½®ç¼“å†²åŒºå‘¢ï¼Ÿ æ˜¯ä¸ºäº†å‡å°‘è®¾å¤‡ä¹‹é—´çš„é¢‘ç¹ç‰©ç†äº¤æ¢ï¼Œå› ä¸ºå¤–éƒ¨ç‰©ç†è®¾å¤‡ä¸å†…å­˜å’Œ CPU ç›¸æ¯”ï¼Œæœ‰ç€éå¸¸å¤§çš„å·®è· å››ç§ä¸»è¦çš„ IO æ¨¡å‹é˜»å¡ IO æŒ‡çš„æ˜¯ï¼Œéœ€è¦å†…æ ¸ IO æ“ä½œå½»åº•å®Œæˆåï¼Œæ‰è¿”å›ç”¨æˆ·ç©ºé—´æ‰§è¡Œç”¨æˆ·ç¨‹åºçš„æ“ä½œæŒ‡ä»¤ï¼Œéé˜»å¡åˆ™æ— éœ€ç­‰å¾… åŒæ­¥æŒ‡çš„æ˜¯ç”¨æˆ·ç©ºé—´ï¼ˆè¿›ç¨‹æˆ–çº¿ç¨‹ï¼‰æ˜¯ä¸»åŠ¨å‘èµ· IO è¯·æ±‚çš„ä¸€æ–¹ï¼Œç³»ç»Ÿå†…æ ¸æ˜¯è¢«åŠ¨æ¥æ”¶æ–¹ï¼›å¼‚æ­¥ IO åˆ™åè¿‡æ¥ åŒæ­¥é˜»å¡ IOï¼šç”¨æˆ·ç©ºé—´ä¸»åŠ¨å‘èµ·ï¼Œéœ€è¦ç­‰å¾…å†…æ ¸ IO æ“ä½œå½»åº•å®Œæˆåï¼Œæ‰è¿”å›åˆ°ç”¨æˆ·ç©ºé—´çš„ IO æ“ä½œ ä¼˜ç‚¹ï¼šåº”ç”¨ç¨‹åºå¼€å‘éå¸¸ç®€å•ï¼Œåœ¨é˜»å¡ç­‰å¾…æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·çº¿ç¨‹æŒ‚èµ·ï¼ŒåŸºæœ¬ä¸ä¼šå ç”¨ CPU èµ„æº ç¼ºç‚¹ï¼šä¸€èˆ¬æƒ…å†µä¸‹ä¼šä¸ºæ¯ä¸ªè¿æ¥é…å¤‡ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œéœ€è¦å¤§é‡çº¿ç¨‹ï¼Œå†…å­˜å’Œçº¿ç¨‹åˆ‡æ¢å¼€é”€ä¼šéå¸¸å¤§ åŒæ­¥éé˜»å¡ IOï¼šç”¨æˆ·ç©ºé—´å‘èµ·ï¼Œä¸éœ€è¦ç­‰å¾…å†…æ ¸ IO æ“ä½œå½»åº•å®Œæˆï¼Œå°±å¯ä»¥ç«‹å³è¿”å›ç”¨æˆ·ç©ºé—´å»æ‰§è¡Œåç»­çš„æŒ‡ä»¤ï¼ˆè¿™ä¸ªä¹Ÿå« NIOï¼Œä½†æ˜¯å’Œ Java é‡Œé¢çš„ NIO æœ‰åŒºåˆ«ï¼ŒJava é‡Œçš„ NIO æŒ‡çš„æ˜¯ NewIOï¼Œç”¨çš„æ˜¯ IO å¤šè·¯å¤ç”¨æ¨¡å‹ï¼‰ï¼Œç‰¹ç‚¹æ˜¯éœ€è¦ä¸æ–­è¿›è¡Œè½®è¯¢ ä¼˜ç‚¹ï¼šçº¿ç¨‹ä¸ä¼šé˜»å¡ï¼Œå®æ—¶æ€§è¾ƒå¥½ ç¼ºç‚¹ï¼šéœ€è¦ä¸æ–­è½®è¯¢ï¼Œå ç”¨ CPU èµ„æºï¼Œæ•ˆç‡ä½ä¸‹ IO å¤šè·¯å¤ç”¨ï¼šåœ¨ Linux ç³»ç»Ÿä¸­ï¼ŒIO å¤šè·¯å¤ç”¨çš„ç³»ç»Ÿè°ƒç”¨ä¸º select&#x2F;epollï¼Œé€šè¿‡è¯¥ç³»ç»Ÿè°ƒç”¨ï¼Œä¸€ä¸ªç”¨æˆ·è¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰å¯ä»¥ç›‘è§†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä¸€æ—¦æŸä¸ªæ–‡ä»¶æè¿°ç¬¦å°±ç»ªï¼ˆä¸€èˆ¬æ˜¯æŒ‡å†…æ ¸ç¼“å†²åŒºå¯è¯»&#x2F;å¯å†™ï¼‰ï¼Œå†…æ ¸å°±èƒ½å¤Ÿå°†æ–‡ä»¶æè¿°ç¬¦çš„å°±ç»ªçŠ¶æ€è¿”å›ç»™ç”¨æˆ·è¿›ç¨‹ï¼ˆæˆ–çº¿ç¨‹ï¼‰ï¼Œç”¨æˆ·ç©ºé—´å°±å¯ä»¥æ ¹æ®æ–‡ä»¶æè¿°ç¬¦çš„å°±ç»ªçŠ¶æ€è¿›è¡Œå¯¹åº”çš„ IO ç³»ç»Ÿè°ƒç”¨ï¼ˆReactorï¼‰ ä¼˜ç‚¹ï¼šä¸€ä¸ªé€‰æ‹©å™¨æŸ¥è¯¢çº¿ç¨‹å¯ä»¥åŒæ—¶å¤„ç†æˆåƒä¸Šä¸‡çš„ç½‘ç»œè¿æ¥ï¼Œä¸å¿…åˆ›å»ºå¤§é‡çš„çº¿ç¨‹ ç¼ºç‚¹ï¼šselect&#x2F;epoll ç³»ç»Ÿè°ƒç”¨æ˜¯é˜»å¡çš„ï¼Œå±äºåŒæ­¥ IO å¼‚æ­¥ IOï¼šæŒ‡çš„æ˜¯ç”¨æˆ·ç©ºé—´çš„çº¿ç¨‹å˜æˆè¢«åŠ¨æ¥æ”¶è€…ï¼Œè€Œå†…æ ¸ç©ºé—´æˆä¸ºä¸»åŠ¨è°ƒç”¨è€…ï¼›ç”¨æˆ·çº¿ç¨‹é€šè¿‡ç³»ç»Ÿè°ƒç”¨å‘å†…æ ¸æ³¨å†ŒæŸä¸ª IO æ“ä½œï¼Œå†…æ ¸åœ¨è¿™ä¸ª IO æ“ä½œå®Œæˆåé€šçŸ¥ç”¨æˆ·ç¨‹åºï¼Œç”¨æˆ·ç¨‹åºæ‰§è¡Œåç»­çš„ä¸šåŠ¡æ“ä½œï¼ˆå›è°ƒï¼‰ ä¼˜ç‚¹ï¼šéé˜»å¡ ç¼ºç‚¹ï¼šåº”ç”¨ç¨‹åºä»…éœ€è¦è¿›è¡Œäº‹ä»¶çš„æ³¨å†Œå’Œæ¥æ”¶ï¼Œå…¶ä½™çš„å·¥ä½œéƒ½ç•™ç»™äº†æ“ä½œç³»ç»Ÿï¼Œä¹Ÿå°±æ˜¯éœ€è¦åº•å±‚å†…æ ¸æä¾›æ”¯æŒ è¿æ¥æé™å€¼1ulimit -n 1000000ï¼ˆé»˜è®¤ 1024ï¼‰ 1ulimit -SHnï¼ˆS è½¯æ€§æé™å€¼ï¼Œè¶…è¿‡è­¦å‘Šï¼›H ç¡¬æ€§æé™å€¼ï¼Œè¶…è¿‡æŠ¥é”™ï¼‰ å¦‚ä½•å½»åº•è§£é™¤é™åˆ¶ï¼Ÿ ç¼–è¾‘æ–‡ä»¶ /etc/security/limits.conf 12soft nofile 1000000hard nofile 1000000 Java NIOåŸºæœ¬ç»„ä»¶ Channel Buffer Selector OIO å’Œ NIO çš„åŒºåˆ« OIOï¼ˆOld IOï¼‰ é¢å‘æµï¼ŒNIOï¼ˆNew IOï¼‰é¢å‘ç¼“å­˜åŒº OIO æ˜¯é˜»å¡çš„ï¼ŒNIO éé˜»å¡ OIO æ²¡æœ‰ Selector æ¦‚å¿µï¼ŒNIO æœ‰ NIO Bufferå¸¸ç”¨æ–¹æ³• allocate(int capacity)ï¼š é»˜è®¤æ˜¯å†™æ¨¡å¼ï¼Œä»æ•°ç»„ä¸‹æ ‡ 0 å¼€å§‹ï¼Œé•¿åº¦é™åˆ¶æ˜¯ capacity put(int i)ï¼šå†™ i è¿›æ•°ç»„é‡Œï¼Œå¦‚æœè¶…è¿‡é•¿åº¦ï¼Œåˆ™æŠ›å‡º BufferOverflowExceptionï¼ˆå¯ä½¿ç”¨ remaining() æ¥åˆ¤æ–­å‰©ä½™å¯å†™é•¿åº¦ï¼›å¦‚æœæ˜¯è¯»æ¨¡å¼ï¼Œåˆ™æŠ›å‡º ReadOnlyBufferExceptionï¼ˆå¯ä½¿ç”¨ isReadOnly() æ¥åˆ¤æ–­æ˜¯å¦å¯å†™ï¼‰ filp()ï¼šè¯»å†™æ¨¡å¼è½¬æ¢ 123456public Buffer flip() &#123; limit = position; position = 0; mark = -1; return this;&#125; get() rewind()ï¼šå€’å¸¦ 12345public Buffer rewind() &#123; position = 0; mark = -1; return this;&#125; flip() å’Œ rewind() çš„åŒºåˆ«å°±æ˜¯ limit å‚æ•° mark() å’Œ reset(): mark() æ ‡è®°å½“å‰ä½ç½®ï¼Œå½“è°ƒç”¨ reset() çš„æ—¶å€™ï¼Œå›åˆ°æ ‡è®°çš„ä½ç½® clear() 123456public Buffer clear() &#123; position = 0; limit = capacity; mark = -1; return this;&#125; ä½¿ç”¨ clear() æˆ–è€… compact() å¯ä»¥å°†è¯»æ¨¡å¼æ”¹ä¸ºå†™æ¨¡å¼ ç”Ÿå‘½å‘¨æœŸallocate() -&gt; put() -&gt; flip() -&gt; get() -&gt; clear() &#x2F; compoact() -&gt; put() ç”³è¯·å†…å­˜çš„ä¸¤ç§æ–¹å¼ç”³è¯·å †å†…å­˜ï¼Œè¯»å†™æ•ˆç‡è¾ƒä½ï¼Œå—åˆ° GC å½±å“ 1ByteBuffer.allocate() -&gt; java.nio.HeapByteBuffer ç”³è¯·ç›´æ¥å†…å­˜ï¼Œè¯»å†™æ•ˆç‡é«˜ï¼ˆå°‘ä¸€æ¬¡æ‹·è´ï¼‰ï¼Œä¸ä¼šå—åˆ° GC å½±å“ï¼Œåˆ†é…å†…å­˜çš„æ—¶å€™æ•ˆç‡ä½ï¼Œä½¿ç”¨ä¸å½“å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ 1ByteBuffer.allocateDirect() -&gt; java.nio.DirectByteBuffer NIO Channelså¸¸ç”¨ Channel FileChannel (FileInputStream() &#x2F; FileOutputStream()).geChannel(), ByteBuffer.flip(), channel.force(true), channel.close() transferTo(position, length, target)ï¼šé›¶æ‹·è´, æ¯æ¬¡ 2G ä¸Šé™ ServerSocketChannel SocketChannel socketChannel.configureBlocking(true &#x2F; false)ï¼Œé»˜è®¤æ˜¯ blocking, å› ä¸ºæœ‰ä¸ªå±æ€§è®¾ç½® nonBlocking ä¸º false DatagramChannael NIO Selectoré€‰æ‹©å™¨çš„ä½¿å‘½æ˜¯å¤„ç† IO çš„å¤šè·¯å¤ç”¨ï¼Œå®Œæˆé€šé“çš„æ³¨å†Œï¼Œç›‘å¬ï¼Œäº‹ä»¶æŸ¥è¯¢ é€‰æ‹©å™¨å’Œé€šé“çš„å…³ç³»æ˜¯ç›‘æ§å’Œè¢«ç›‘æ§çš„å…³ç³» IO äº‹ä»¶ç±»å‹ SelectionKey.OP_READ SelectionKey.OP_WRITE SelectionKey.OP_CONNECT SelectionKey.OP_ACCEPT SelectionKeyå¦‚ä½•çŸ¥é“ä¸€ä¸ª Channel æ˜¯å¦èƒ½è¢«ç›‘æµ‹ï¼Ÿ çœ‹è¿™ä¸ª Channel æ˜¯å¦ç›´æ¥æˆ–é—´æ¥ç»§æ‰¿ SelectableChannelï¼Œæ¯”å¦‚ FileChannel å°±ä¸æ˜¯ï¼Œè€Œ SocketChannel å°±æ˜¯ æ³¨å†Œåˆ° Selector çš„ Channel å¿…é¡»æ˜¯å¤„äºéé˜»å¡æ¨¡å¼ä¸‹ï¼Œå› ä¸º FileChannel åªæœ‰é˜»å¡æ¨¡å¼ï¼Œä¸èƒ½åˆ‡æ¢åˆ°éé˜»å¡æ¨¡å¼ï¼Œæ‰€ä»¥ FileChannel ä¸èƒ½å’Œé€‰æ‹©å™¨ä¸€èµ·ä½¿ç”¨ Selector.select() æœ¬èº«æ˜¯é˜»å¡çš„ï¼Œæ‰€ä»¥æ”¾åœ¨ while true é‡Œä¸ç”¨æ‹…å¿ƒ CPU ç©ºè½¬ Reactor æ¨¡å¼Reactor æ¨¡å¼ç”± Reactor çº¿ç¨‹ï¼ŒHandlers å¤„ç†å™¨ä¸¤å¤§è§’è‰²ç»„æˆ Reactor çº¿ç¨‹ï¼šè´Ÿè´£å“åº” IO äº‹ä»¶ï¼Œå¹¶ä¸”åˆ†å‘åˆ° Handlers å¤„ç†å™¨ Handlers å¤„ç†å™¨ï¼šéé˜»å¡åœ°æ‰§è¡Œä¸šåŠ¡é€»è¾‘å¤„ç† æ‰§è¡Œæµç¨‹channel -&gt; selector -&gt; reactor -&gt; handler ä¼˜ç‚¹ å“åº”é€Ÿåº¦å¿«ï¼Œè™½ç„¶åŒä¸€ Reactor çº¿ç¨‹æœ¬èº«æ˜¯åŒæ­¥çš„ï¼Œä½†æ˜¯ä¸ä¼šè¢«å•ä¸ªè¿æ¥çš„ IO æ“ä½œæ‰€é˜»å¡ é¿å…äº†å¤šçº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹ä¹‹å‰é¢‘ç¹åˆ‡æ¢çš„å¼€é”€ é€šè¿‡å¢åŠ  Reactor çº¿ç¨‹çš„ä¸ªæ•°ï¼Œå¯ä»¥è¿›è¡Œçµæ´»æ‰©å±•ï¼Œå……åˆ†åˆ©ç”¨ CPU èµ„æº ç¼ºç‚¹ æ¯æ¬¡å¼•å…¥æ–°ä¸œè¥¿è‚¯å®šæ˜¯å¢åŠ äº†åŸç³»ç»Ÿçš„å¤æ‚æ€§ éœ€è¦æ“ä½œç³»ç»Ÿåº•å±‚æ”¯æŒ IO å¤šè·¯å¤ç”¨ç³»ç»Ÿè°ƒç”¨æ‰å¯ä»¥ ä¸ºä»€ä¹ˆåœ¨æµ·é‡è¿æ¥çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æ± çš„æ–¹å¼ä¸å¥½ä½¿ çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯æˆæœ¬å¾ˆé«˜ çº¿ç¨‹æœ¬èº«å ç”¨è¾ƒå¤§å†…å­˜ï¼ŒJava çº¿ç¨‹æ ˆå†…å­˜åˆ†é… 512K - 1M çº¿ç¨‹åˆ‡æ¢çš„æˆæœ¬å¾ˆé«˜ï¼Œå› ä¸ºéœ€è¦ä¿å­˜ä¸Šä¸‹æ–‡ï¼Œå¦‚æœçº¿ç¨‹åˆ‡æ¢çš„æ—¶é—´æ¯”çº¿ç¨‹æœ¬èº«æ‰§è¡Œæ‰€éœ€è¦çš„æ—¶é—´è¿˜å¤šï¼Œå°±æ˜¯è´Ÿä¼˜åŒ– åºåˆ—åŒ–ä¸ååºåˆ—åŒ– æ•°æ®ç»“æ„å¤§å°ï¼šåŸåˆ™ä¸Šï¼Œè¶Šå°ï¼Œæ•ˆç‡è¶Šé«˜ ç»“æ„å¤æ‚åº¦ï¼šè¶Šå¤æ‚ï¼Œæ•ˆç‡è¶Šä½","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"Netty","slug":"Netty","permalink":"https://linweiyuan.github.io/tags/Netty/"},{"name":"NIO","slug":"NIO","permalink":"https://linweiyuan.github.io/tags/NIO/"}]},{"title":"Arch Linuxç®€æ˜“å®‰è£…è„šæœ¬ï¼ˆi3, kde, deepinï¼‰","slug":"Arch-Linuxç®€æ˜“å®‰è£…è„šæœ¬ï¼ˆi3-kde-deepinï¼‰","date":"2022-04-08T04:19:56.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2022/04/08/Arch-Linuxç®€æ˜“å®‰è£…è„šæœ¬ï¼ˆi3-kde-deepinï¼‰.html","link":"","permalink":"https://linweiyuan.github.io/2022/04/08/Arch-Linux%E7%AE%80%E6%98%93%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC%EF%BC%88i3-kde-deepin%EF%BC%89.html","excerpt":"","text":"è„šæœ¬ï¼šhttps://github.com/linweiyuan/archlinux-install-scripttodo: å¼‚å¸¸åˆ¤æ–­ï¼Œé€‰é¡¹æ”¹ whiptail åŒ…ç¼“å­˜ï¼šflexo å†…ç½‘ dnsï¼šdnsmasq","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"}]},{"title":"å…³äºJDK18çš„UTF-8","slug":"å…³äºJDK18çš„UTF-8","date":"2022-03-24T07:07:34.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2022/03/24/å…³äºJDK18çš„UTF-8.html","link":"","permalink":"https://linweiyuan.github.io/2022/03/24/%E5%85%B3%E4%BA%8EJDK18%E7%9A%84UTF-8.html","excerpt":"","text":"JEP 400: UTF-8 by DefaultJDK18 é‡Œæœ‰ä¸€é¡¹æ”¹è¿›å«ï¼šJEP 400: UTF-8 by Default å…¶å®æ˜¯å°†é»˜è®¤å­—ç¬¦é›†æ”¹ä¸º UTF-8ï¼Œåªæ˜¯ Charset.defaultCharset() è¿”å› UTF-8ï¼Œåœ¨è¿™ä¹‹å‰çš„ JDK ç‰ˆæœ¬ä¸­ï¼Œè¿”å›çš„å­—ç¬¦é›†æ ¹æ®æ“ä½œç³»ç»Ÿçš„ä¸åŒä¼šä¸ä¸€æ ·ï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´ä¹±ç ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–¹æ³•çš„æ³¨é‡Š 123Returns the default charset of this Java virtual machine.The default charset is UTF-8, unless changed in an implementation specific manner. ä¹‹å‰çš„ç‰ˆæœ¬åªæœ‰è¿™ä¸€è¡Œ 1Returns the default charset of this Java virtual machine. æ‰€ä»¥å¹¶ä¸æ˜¯æ”¹äº† String çš„å®ç° JEP 254: Compact StringsJava ä¸­çš„ String é»˜è®¤é‡‡ç”¨ UTF-16 å­—ç¬¦é›†ï¼Œè¿™å…¶å®æ˜¯å†å²çš„åŒ…è¢±ï¼Œä¸ºäº†è¦æ”¯æŒæ–°ç‰ˆæœ¬çš„ Unicodeï¼Œåˆè¦ä¿è¯å‘åå…¼å®¹ï¼Œå› ä¸ºè°ä¹Ÿæƒ³ä¸åˆ°è®¡ç®—æœºçš„å‘å±•æ˜¯å¦‚æ­¤è¿…çŒ›ï¼Œå½“æ—¶æ˜¯è¶³å¤Ÿç”¨äº† å¦‚ä»Šç”¨äº† UTF-16ï¼Œå¯ä»¥å­˜å¤§éƒ¨åˆ†è¾…åŠ©å­—ç¬¦ï¼ˆEmoji ç­‰ï¼‰äº†ï¼Œä½†æ˜¯å¯¹äºè¥¿æ–¹å›½å®¶ï¼Œæ—¥å¸¸çš„ç®€å•å­—æ¯ï¼Œæœ‰ç‚¹æµªè´¹ å› æ­¤ JDK9 è¿›è¡Œäº†æ”¹åŠ¨ï¼Œå°†åº•å±‚ char[] æ”¹ä¸º byte[]ï¼Œå¹¶ä¸”åœ¨åŸæœ‰åŸºç¡€ä¸ŠåŠ å…¥äº† Latin-1ï¼ˆISO-8859-1ï¼‰å­—ç¬¦é›†ï¼Œè¯¦ç»†å¯ä»¥çœ‹è¿™ä¸ª JEPï¼šJEP 254: Compact Strings String(UTF-16 + Latin-1)ï¼Œå…¶ä¸­å†…éƒ¨å¤šäº†ä¸ªå­—æ®µ coder 1private final byte coder; å½“æ— æ³•ç”¨ Latin-1 è¡¨ç¤ºçš„æ—¶å€™ï¼Œæ‰ä½¿ç”¨ UTF-16ï¼Œå‡å°‘äº†å†…å­˜çš„æµªè´¹ æ‰€ä»¥ JEP 400 å’Œ String æœ¬èº«çš„å®ç°å…³ç³»ä¸å¤§","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"JDK18","slug":"JDK18","permalink":"https://linweiyuan.github.io/tags/JDK18/"}]},{"title":"ELKç›¸å…³çŸ¥è¯†ç‚¹","slug":"ELKç›¸å…³çŸ¥è¯†ç‚¹","date":"2022-03-04T09:19:10.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2022/03/04/ELKç›¸å…³çŸ¥è¯†ç‚¹.html","link":"","permalink":"https://linweiyuan.github.io/2022/03/04/ELK%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9.html","excerpt":"","text":"ELKä½•ä¸º ELKï¼ŒElasticsearch + Logstach + Kibaba Elasticsearchï¼šå­˜å‚¨ï¼Œè®¡ç®—ï¼Œæœç´¢æ•°æ® Logstashï¼šæ•°æ®æŠ“å– Kibabaï¼šæ•°æ®å¯è§†åŒ– å€’æ’ç´¢å¼•è¦è¯´å€’æ’ç´¢å¼•ï¼Œé¦–å…ˆè¦ä»æ­£å‘ç´¢å¼•è°ˆèµ·ï¼Œæ¯”å¦‚ MySQL MySQL è¿™ç±»å…³ç³»å‹æ•°æ®åº“ï¼Œå¦‚æœæœç´¢ IDï¼Œä¼šç›´æ¥èµ°ç´¢å¼•ï¼ˆç´¢å¼•è®¾ç½®å¾—æ­£ç¡®çš„å‰æä¸‹ï¼‰ï¼Œä¸€æ—¦èµ°äº†ç´¢å¼•ï¼ŒæŸ¥è¯¢èµ·æ¥æ˜¯å¾ˆå¿«çš„ï¼Œä½†æ˜¯å¦‚æœæ˜¯æ¨¡ç³ŠæŸ¥è¯¢ï¼Œå°±ä¸ä¸€å®šäº†ï¼Œéœ€è¦é€è¡Œæ‰«æï¼Œåœ¨ç´¢å¼•è®¾ç½®å¾—ä¸å¥½çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å…¨è¡¨æ‰«æï¼Œæ•°æ®é‡å¤§çš„åœºæ™¯ä¸‹æ•ˆç‡éå¸¸ä½ å€’æ’ç´¢å¼•ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š æ–‡æ¡£ï¼ˆDocumentï¼‰ï¼šES é‡Œä¿å­˜çš„æ•°æ®ï¼Œå…¶ä¸­çš„æ¯ä¸€æ¡æ•°æ®å°±æ˜¯ä¸€ä¸ªæ–‡æ¡£ï¼Œç±»ä¼¼æ•°æ®åº“çš„ä¸€æ¡è®°å½• è¯æ¡ï¼ˆTermï¼‰ï¼šå¯¹æ•°æ®è¿›è¡Œåˆ†è¯åå¾—åˆ°çš„æœ‰æ„ä¹‰çš„è¯è¯­ å€’æ’ç´¢å¼•æ˜¯å¯¹æ­£å‘ç´¢å¼•çš„ä¸€ç§ç‰¹æ®Šå¤„ç†ï¼š å°†æ–‡æ¡£æ•°æ®åˆ©ç”¨åˆ†è¯ç®—æ³•ï¼Œå¾—åˆ°ä¸€å †çš„è¯æ¡ ES é‡Œä¿å­˜çš„æ¯è¡Œæ•°æ®åŒ…æ‹¬è¯æ¡ï¼Œè¯æ¡æ‰€åœ¨æ–‡æ¡£ ID ç­‰ä¿¡æ¯ å› ä¸ºè¯æ¡å…·æœ‰å”¯ä¸€æ€§ï¼Œå¯ä»¥ç»™è¯æ¡åˆ›å»ºç´¢å¼• æœç´¢æµç¨‹ï¼š å‘èµ·æœç´¢è¯·æ±‚ åˆ†è¯å¾—åˆ°è¯æ¡ æ ¹æ®è¯æ¡æ‹¿åˆ° ES é‡Œçš„æ–‡æ¡£ IDï¼ˆè¿™ä¸ª ID ä¼šå’Œ MySQL é‡Œçš„ ID åŒæ­¥ï¼‰ æ ¹æ® ID ï¼ˆå» MySQLï¼‰æ‹¿åˆ°å…·ä½“æ•°æ® è™½ç„¶éœ€è¦æŸ¥ä¸¤éï¼Œå…ˆæŸ¥å€’æ’ç´¢å¼•ï¼Œå†æŸ¥æ­£å‘ç´¢å¼•ï¼Œä½†å› ä¸ºéƒ½èµ°äº†ç´¢å¼•ï¼Œæ‰€ä»¥éå¸¸å¿«ï¼Œæ— éœ€å…¨è¡¨æ‰«æ ä¸¤è€…çš„å…³ç³»å¦‚ä¸‹è¡¨ MySQL Elasticsearch table index row document column field schema mapping sql dsl ä¸¤è€…ä¸èƒ½æ¯”è¾ƒï¼Œå…³æ³¨çš„é¢†åŸŸä¸åŒï¼ŒMySQL æ“…é•¿äº‹åŠ¡ç±»å‹æ“ä½œï¼Œå¯ä»¥ç¡®ä¿æ•°æ®çš„å®‰å…¨å’Œä¸€è‡´æ€§ï¼ŒES åˆ™æ“…é•¿æµ·é‡æ•°æ®çš„æœç´¢ï¼Œåˆ†æï¼Œè®¡ç®—ï¼Œå®é™…ä¸Šå¾€å¾€ä¸¤è€…ç»“åˆä½¿ç”¨ IK åˆ†è¯å™¨ ik_smartï¼šåªèƒ½åˆ‡åˆ†ï¼Œç²—ç²’åº¦ ik_max_wordï¼šæœ€ç»†åˆ‡åˆ†ï¼Œç»†ç²’åº¦ ES æœç´¢é«˜äº® ç»™æ–‡æ¡£ä¸­çš„å…³é”®å­—åŠ ä¸€ä¸ªæ ‡ç­¾ é¡µé¢ç»™è¿™ä¸ªæ ‡ç­¾è®¾ç½® é«˜äº® CSS ES é›†ç¾¤ä¸ç®¡ä»€ä¹ˆé›†ç¾¤ï¼Œé›†ç¾¤æ— éè§£å†³å‡ ä¸ªé—®é¢˜ æµ·é‡æ•°æ®å­˜å‚¨ å•ç‚¹æ•…éšœ ES é€šè¿‡å¯¹æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œå­˜å‚¨åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸­ï¼Œå°†å¤‡ä»½æ”¾åˆ°å¯¹æ–¹èŠ‚ç‚¹ï¼Œå®Œæˆäº’ç›¸å¤‡ä»½ï¼Œå½“é›†ç¾¤ä¸­çš„æŸä¸ªèŠ‚ç‚¹æŒ‚æ‰åï¼Œä¼šç«‹å³å°†æŒ‚æ‰çš„èŠ‚ç‚¹ä¸Šçš„åˆ†ç‰‡æ•°æ®è¿ç§»åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ é›†ç¾¤ç›‘æ§å¯ä»¥ä½¿ç”¨ Kibana ç›´æ¥æ“ä½œï¼Œæˆ–è€… Cerebro","categories":[{"name":"ELK","slug":"ELK","permalink":"https://linweiyuan.github.io/categories/ELK/"}],"tags":[{"name":"Elasticsearch","slug":"Elasticsearch","permalink":"https://linweiyuan.github.io/tags/Elasticsearch/"},{"name":"Logstash","slug":"Logstash","permalink":"https://linweiyuan.github.io/tags/Logstash/"},{"name":"Kibana","slug":"Kibana","permalink":"https://linweiyuan.github.io/tags/Kibana/"}]},{"title":"RabbitMQç›¸å…³çŸ¥è¯†ç‚¹","slug":"RabbitMQç›¸å…³çŸ¥è¯†ç‚¹","date":"2022-02-17T08:54:15.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2022/02/17/RabbitMQç›¸å…³çŸ¥è¯†ç‚¹.html","link":"","permalink":"https://linweiyuan.github.io/2022/02/17/RabbitMQ%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9.html","excerpt":"","text":"åŸºæœ¬æ¦‚å¿µ publisherï¼šç”Ÿäº§è€…ï¼ˆå»ºç«‹è¿æ¥ -&gt; åˆ›å»º channel -&gt; å£°æ˜é˜Ÿåˆ— -&gt; å‘é€æ¶ˆæ¯ -&gt; å…³é—­è¿æ¥å’Œ channelï¼‰ consumerï¼šæ¶ˆè´¹è€…ï¼ˆå»ºç«‹è¿æ¥ -&gt; åˆ›å»º channel -&gt; å£°æ˜é˜Ÿåˆ— -&gt; è®¢é˜…æ¶ˆæ¯ï¼‰ exchangeï¼šäº¤æ¢æœºï¼Œè´Ÿè´£æ¶ˆæ¯è·¯ç”± Fanout Exchangeï¼šå¹¿æ’­ï¼ˆæ‰€æœ‰ç»‘å®šåˆ°è¯¥äº¤æ¢æœºçš„é˜Ÿåˆ—éƒ½èƒ½æ”¶åˆ°æ¶ˆæ¯ï¼‰ Direct Exchangeï¼šè·¯ç”±ï¼ˆæ ¹æ® routingKey æ¥å‘é€åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ï¼‰ Topic Exchangeï¼š ä¸»é¢˜ï¼ˆé€šè¿‡ routingKey é€šé…ç¬¦æ¥å‘é€åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ï¼Œ#åŒ¹é…ä¸€ä¸ªæˆ–å¯¹ä¸ªï¼Œ*åŒ¹é…ä¸€ä¸ªï¼‰ queueï¼šé˜Ÿåˆ—ï¼Œå­˜å‚¨æ¶ˆæ¯ åŸºæœ¬æ¶ˆæ¯é˜Ÿåˆ— BasicQueueï¼šä¸€å¯¹ä¸€ å·¥ä½œæ¶ˆæ¯é˜Ÿåˆ— WorkQueueï¼šä¸€å¯¹å¤š virtualHostï¼šè™šæ‹Ÿä¸»æœºï¼Œæ¶ˆæ¯éš”ç¦» WorkQueueï¼ˆTaskQueueï¼‰ä»»åŠ¡æ¨¡å‹å¤šä¸ªæ¶ˆè´¹è€…ç»‘å®šåˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå…±åŒæ¶ˆè´¹é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ é»˜è®¤æ˜¯å¹³å‡ç»™æ¯ä¸ªæ¶ˆè´¹è€…ï¼Œå¦‚æœè€ƒè™‘æ¶ˆè´¹è€…çš„å¤„ç†èƒ½åŠ›ï¼Œéœ€è¦è®¾ç½® prefetch å±æ€§ï¼Œæ¯æ¬¡è·å–ä¸€æ¡ï¼Œæ¶ˆè´¹ä¸€æ¡å†è·å–ï¼Œè¾¾åˆ°èƒ½è€…å¤šåŠ³çš„ç›®çš„ åŒä¸€æ¡æ¶ˆæ¯åªä¼šè¢«ä¸€ä¸ªæ¶ˆè´¹è€…å¤„ç† å‘å¸ƒ&#x2F;è®¢é˜…æ¨¡å‹å¯¹æ¯” WorkQueueï¼Œå¤šäº†ä¸€ä¸ª exchange äº¤æ¢æœº ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ä¸æ˜¯å‘é€åˆ°é˜Ÿåˆ—ï¼Œè€Œæ˜¯å‘é€è‡³äº¤æ¢æœº æ¶ˆè´¹è€…è®¢é˜…é˜Ÿåˆ— exchange åªè´Ÿè´£è½¬å‘æ¶ˆæ¯ï¼Œä¸ä¼šå¯¹æ¶ˆæ¯è¿›è¡Œå­˜å‚¨ï¼Œå¦‚æœæ²¡æœ‰æ­£ç¡®é…ç½®é˜Ÿåˆ—æˆ–è·¯ç”±è§„åˆ™ï¼Œæ¶ˆæ¯å°±ä¼šä¸¢å¤± å¦‚ä½•ä¿è¯æ¶ˆæ¯å¯é æ€§è¦ç¡®ä¿å‘é€çš„æ¶ˆæ¯è‡³å°‘è¢«æ¶ˆè´¹ä¸€æ¬¡ï¼Œéœ€è¦ä»æºå¤´å¼€å§‹ï¼Œç”Ÿäº§è€…æ˜¯å¦æˆåŠŸå‘é€æ¶ˆæ¯åˆ°äº¤æ¢æœºï¼Œäº¤æ¢æœºæ˜¯å¦æ­£å¸¸å‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—é‡Œçš„æ¶ˆæ¯æ˜¯å¦æˆåŠŸè¢«æ¶ˆè´¹è€…æ¶ˆè´¹ RabbitMQ æä¾›äº† publisher confirm å’Œ publish-return æœºåˆ¶æ¥é¿å…æ¶ˆæ¯åœ¨å‘é€çš„è¿‡ç¨‹ä¸­ä¸¢å¤± publish-confirm å¦‚æœæ¶ˆæ¯æˆåŠŸæŠ•é€’åˆ°äº¤æ¢æœºï¼Œè¿”å› ack å¦‚æœæ¶ˆæ¯æœªæŠ•é€’åˆ°äº¤æ¢æœºï¼Œè¿”å› nack publish-return å¦‚æœæ¶ˆæ¯æŠ•é€’åˆ°äº¤æ¢æœºäº†ï¼Œä½†æ˜¯æ²¡æœ‰è·¯ç”±åˆ°é˜Ÿåˆ—ï¼Œè¿”å› ack åŠè·¯ç”±å¤±è´¥åŸå›  è€ƒè™‘åˆ° MQ æœ¬èº«çš„ç¨³å®šï¼Œå¯ä»¥åˆ†åˆ«å°†äº¤æ¢æœºï¼Œé˜Ÿåˆ—ï¼Œæ¶ˆæ¯éƒ½è®¾ç½®ä¸ºæŒä¹…åŒ– å¦‚ä½•è§£å†³æ¶ˆæ¯å †ç§¯é—®é¢˜å½“å‘é€æ¶ˆæ¯è¶…è¿‡äº†å¤„ç†æ¶ˆæ¯çš„é€Ÿåº¦ï¼Œå°±ä¼šé€ æˆæ¶ˆæ¯å †ç§¯ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯è¾¾åˆ°ä¸Šé™ï¼Œé‚£ä¹ˆæœ€æ—©å—åˆ°çš„æ¶ˆæ¯ï¼Œå¯èƒ½å°±ä¼šå˜æˆæ­»ä¿¡ï¼Œç„¶åè¢«ä¸¢å¼ƒ æ¶ˆæ¯å †ç§¯çš„æœ¬è´¨æ˜¯æ¶ˆè´¹è€…æ¶ˆè´¹æ¶ˆæ¯çš„é€Ÿåº¦è·Ÿä¸ä¸Šï¼Œæ‰€ä»¥å¯ä»¥ä»ä¸‹é¢å‡ ä¸ªæ–¹é¢æ¥è¿›è¡Œè€ƒè™‘ å¢åŠ æ¶ˆè´¹è€…ä¸ªæ•°ï¼Œé‚£ä¹ˆé€Ÿåº¦å°±æˆå€æé«˜äº† å¢åŠ é˜Ÿåˆ—é•¿åº¦ï¼Œå¯ä»¥æš‚å­˜æ›´å¤šçš„æ¶ˆæ¯","categories":[{"name":"æ¶ˆæ¯é˜Ÿåˆ—","slug":"æ¶ˆæ¯é˜Ÿåˆ—","permalink":"https://linweiyuan.github.io/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"}],"tags":[{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"https://linweiyuan.github.io/tags/RabbitMQ/"}]},{"title":"Redisç›¸å…³çŸ¥è¯†ç‚¹","slug":"Redisç›¸å…³çŸ¥è¯†ç‚¹","date":"2022-01-09T06:03:16.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2022/01/09/Redisç›¸å…³çŸ¥è¯†ç‚¹.html","link":"","permalink":"https://linweiyuan.github.io/2022/01/09/Redis%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9.html","excerpt":"","text":"Redisï¼šRemote Dictionary Server åŸºäºå†…å­˜ï¼Œé€Ÿåº¦éå¸¸å¿«ï¼ˆå› æ­¤å—ç‰©ç†å†…å­˜å¤§å°é™åˆ¶ï¼‰ æ•°æ®ç»“æ„éå¸¸ä¸°å¯Œï¼ˆStringï¼Œ Listï¼Œ Hashï¼Œ Setï¼Œ SortedSetï¼‰ å•çº¿ç¨‹ï¼Œé¿å…äº†çº¿ç¨‹åˆ‡æ¢å’Œé”æœºåˆ¶çš„æ€§èƒ½æ¶ˆè€— å¯æŒä¹…åŒ–ï¼ˆRDB + AOFï¼‰ æ”¯æŒå‘å¸ƒè®¢é˜… æ”¯æŒ Lua è„šæœ¬ æ”¯æŒåˆ†å¸ƒå¼é” æ”¯æŒåŸå­æ“ä½œå’Œäº‹åŠ¡ æ”¯æŒä¸»ä»å¤åˆ¶ï¼ˆMaster-Slaveï¼‰å’Œé«˜å¯ç”¨ï¼ˆRedis Sentinelï¼‰ï¼ˆ3.0 ç‰ˆæœ¬ä»¥ä¸Šï¼‰ æ”¯æŒç®¡é“ï¼ˆç®¡é“åœ¨è¿™é‡Œç±»ä¼¼äº batchï¼Œä¸€æ¬¡æ€§å‘é€å¤šä¸ªå‘½ä»¤ï¼Œä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰ç»“æœï¼Œå‡å°‘ç½‘ç»œå¼€é”€ï¼‰ ä¸»è¦çš„äº”ç§æ•°æ®ç»“æ„åŠä½¿ç”¨åœºæ™¯Redis æ”¯æŒå¤šç§æ•°æ®ç»“æ„ï¼Œå¸¸ç”¨çš„æœ‰ 5 ç§ Stringï¼šè®¡æ•°å™¨ï¼Œkv å­˜å‚¨ï¼Œé™æµï¼Œåˆ†å¸ƒå¼é” Listï¼šå½“é˜Ÿåˆ—æ¥ä½¿ç”¨ï¼ˆlpush + rpop æˆ–è€… rpush + lpopï¼‰ï¼›å‘çº¢åŒ…ï¼ˆæŠ¢çº¢åŒ…æ˜¯å…¥é˜Ÿï¼Œæ‹†çº¢åŒ…åˆ™æ˜¯å‡ºé˜Ÿï¼‰ï¼›åˆ—è¡¨ï¼ˆæœ‹å‹åœˆç‚¹èµï¼Œè¯„è®ºï¼‰ Hashï¼škvï¼Œæ¯”å¦‚å­˜ä¸€äº›æ ‡ç­¾ä¿¡æ¯ï¼Œåœ¨ä¿å­˜ç”¨æˆ·ä¿¡æ¯ç­‰çš„åœºæ™¯ï¼ŒHash å’Œ String çš„ä¸åŒç‚¹åœ¨äºï¼ŒString è¦ä¿®æ”¹æŸä¸ªå­—æ®µå¿…é¡»å°†æ•´æ¡ç”¨æˆ·å®Œæ•´ä¿¡æ¯å–å‡ºæ¥ï¼Œå†è¿›è¡Œç³»åˆ—åŒ–ååºåˆ—åŒ–æ“ä½œï¼Œè€Œ Hash å¯ä»¥åªå¯¹æŸä¸ªå­—æ®µè¿›è¡Œä¿®æ”¹ï¼ŒèŠ‚çœäº†ç½‘ç»œæµé‡ï¼Œä¸è¿‡ Hash è¦æ¯” String å ç”¨å¤šä¸€ç‚¹å†…å­˜ï¼›è´­ç‰©è½¦ï¼ˆç”¨æˆ· idï¼Œå•†å“ idï¼Œå•†å“æ•°é‡ï¼‰ï¼›å­˜å‚¨å¯¹è±¡ Setï¼šå¥½å‹ã€å…³æ³¨ã€ç²‰ä¸ã€æ„Ÿå…´è¶£çš„äººçš„é›†åˆï¼ˆsinter è·å–äº¤é›†ï¼Œsismember åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œscard è·å–æ•°é‡ï¼‰ï¼›é¦–é¡µéšæœºæ¨èå±•ç¤ºï¼ˆsrandmemberï¼‰ï¼›å­˜å‚¨éœ€è¦å»é‡çš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸­å¥–ï¼Œä¿è¯ä¸ä¼šä¸­ä¸¤æ¬¡ SortedSetï¼šæ’è¡Œæ¦œï¼ˆå› ä¸ºæœ‰åºï¼‰ å•çº¿ç¨‹çš„ Redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿« Redis æ˜¯å®Œå…¨åŸºäºå†…å­˜çš„ï¼Œæ‰€ä»¥è¯»å†™æ•ˆç‡éå¸¸é«˜ï¼Œå½“ç„¶ Redis å­˜åœ¨æŒä¹…åŒ–æ“ä½œï¼Œä½† Redis çš„æŒä¹…åŒ–æ“ä½œæ˜¯é€šè¿‡ fork å­è¿›ç¨‹å’Œåˆ©ç”¨ Linux ç³»ç»Ÿçš„é¡µç¼“å­˜æŠ€æœ¯æ¥å®Œæˆï¼Œæ‰€ä»¥å¹¶ä¸ä¼šå½±å“ Redis çš„æ€§èƒ½ å¯¹äº Redis æ¥è¯´ï¼Œå®ƒçš„æ€§èƒ½ç“¶é¢ˆä¸»è¦åœ¨ç½‘ç»œå’Œ IO ä¸Šï¼Œè€Œä¸åœ¨ CPUï¼Œå¤šçº¿ç¨‹é¢‘ç¹è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šå¸¦æ¥é¢å¤–çš„æ€§èƒ½æ¶ˆè€—ï¼Œå¯èƒ½ä¼šé€ æˆè´Ÿä¼˜åŒ–ï¼›Redis é«˜ç‰ˆæœ¬ä¹Ÿæ”¯æŒå¤šçº¿ç¨‹ï¼Œä½†æ˜¯ä¸»è¦æ˜¯ç”¨æ¥æ‰§è¡Œå¯¹ä¸€äº›å¤§é”®å€¼å¯¹çš„åˆ é™¤æ“ä½œï¼Œé€šè¿‡å¤šçº¿ç¨‹éé˜»å¡åœ°é‡Šæ”¾å†…å­˜ç©ºé—´ä¹Ÿèƒ½å‡å°‘å¯¹ Redis ä¸»çº¿ç¨‹çš„é˜»å¡æ—¶é—´ï¼Œæé«˜æ‰§è¡Œçš„æ•ˆç‡ æ•°æ®ç»“æ„è®¾è®¡å¾—åˆç†é«˜æ•ˆ é‡‡ç”¨äº†éé˜»å¡ IO å¤šè·¯å¤ç”¨æœºåˆ¶ï¼šIO å¤šè·¯å¤ç”¨æ˜¯åˆ©ç”¨ selectã€pollã€epoll å¯ä»¥åŒæ—¶ç›‘æµ‹å¤šä¸ªæµçš„ IO äº‹ä»¶çš„èƒ½åŠ›ï¼Œåœ¨ç©ºé—²çš„æ—¶å€™ï¼Œä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå½“æœ‰ IO äº‹ä»¶å‘ç”Ÿæ—¶æ‰å”¤é†’æ¥å¤„ç†å°±ç»ªçš„æµï¼Œè¿™æ ·å°±é¿å…äº†å¤§é‡çš„æ— ç”¨æ“ä½œ æ•°æ®è¿‡æœŸæ·˜æ±°ç­–ç•¥Redis ä¸­æ•°æ®è¿‡æœŸæ·˜æ±°ç­–ç•¥é‡‡ç”¨çš„æ˜¯å®šæœŸåˆ é™¤ + æƒ°æ€§åˆ é™¤ å®šæœŸåˆ é™¤ï¼ˆactiveExpireCycleï¼‰ï¼šRedis åå°æœ‰ä¸€ä¸ªå®šæ—¶å™¨æ¥å®šæ—¶ç›‘è§†æ‰€æœ‰çš„ keyï¼Œè¿‡æœŸå°±åˆ é™¤ã€‚é€šè¿‡å®šæœŸåˆ é™¤ç­–ç•¥ï¼Œå¯ä»¥ä¿è¯è¿‡æœŸçš„ key æœ€åéƒ½ä¼šè¢«åˆ æ‰ï¼Œç¼ºç‚¹å°±æ˜¯æ¯æ¬¡éƒ½è¦éƒ½éå† Redis ä¸­çš„æ‰€æœ‰ keyï¼Œéå¸¸æ¶ˆè€— CPU èµ„æºï¼Œå¦‚æœ key è¿‡æœŸäº†ï¼Œä½†æ˜¯å®šæ—¶å™¨è¿˜æ²¡å¼€å§‹å·¥ä½œï¼Œè¿™ä¸ªè¿‡æœŸçš„ key å°±è¿˜èƒ½ç”¨ æƒ°æ€§åˆ é™¤ï¼ˆexpireIfNeededï¼‰ï¼šåœ¨ä½¿ç”¨ key æ—¶ï¼Œå…ˆåˆ¤æ–­ key æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸåˆ™åˆ é™¤ã€‚è¿™ç§æ–¹å¼ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå°±æ˜¯è™½ç„¶è¿™ä¸ª key è¿‡æœŸäº†ï¼Œä½†æ˜¯ä¸€ç›´æ²¡äººç”¨ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šä¸€ç›´å­˜åœ¨ Redis ä¸­ï¼Œé€ æˆæµªè´¹ å› æ­¤ Redis å°†è¿™ä¸¤ç§æ–¹å¼ç»“åˆèµ·æ¥ï¼Œå®šæ—¶éšæœºæŠ½å–ä¸€äº›å¹¸è¿ key è¿›è¡Œåˆ é™¤ è¿™æ ·æ²¡æœ‰ç¼ºç‚¹å—ï¼Ÿ æœ‰ï¼Œå¦‚æœæŸä¸ª key æ˜¯å¤©é€‰ä¹‹å­ï¼Œæ¯æ¬¡éƒ½æŠ½ä¸åˆ°ï¼Œä½†æ˜¯å·²ç»è¿‡æœŸäº†ï¼Œå°±ä¼šå¸¸é©»å†…å­˜ æ‰€ä»¥ Redis è¿˜ä¼šæœ‰å¦å¤–çš„æœºåˆ¶æ¥å¤„ç†è¿™ç§æƒ…å†µï¼Œå°±æ˜¯å†…å­˜æ·˜æ±° å†…å­˜æ·˜æ±°æœºåˆ¶volatileï¼šè®¾ç½®è¿‡æœŸæ—¶é—´çš„ keyallkeysï¼šå…¨éƒ¨ keylruï¼šæœ€è¿‘æœ€å°‘ä½¿ç”¨lfuï¼šæœ€è¿‘æœ€ä¸ç»å¸¸ä½¿ç”¨randomï¼šéšæœºttlï¼šè¿‡æœŸæ—¶é—´noevictionï¼šæ°¸ä¸è¿‡æœŸ æ’åˆ—ç»„åˆï¼š volatile-lru allkeys-lru volatile-lfu allkeys-lfu volatile-random allkeys-random volatile-ttl noeviction é»˜è®¤æ˜¯æ°¸ä¸è¿‡æœŸï¼Œå¦‚æœæ»¡äº†å°±ä¼šæŠ¥ OOM Redis å’Œ Memcached çš„åŒºåˆ« å­˜å‚¨æ–¹å¼ä¸åŒï¼šMemcachedb æŠŠæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ä¹‹ä¸­ï¼Œæ–­ç”µåä¼šæŒ‚æ‰ï¼Œæ•°æ®ä¸èƒ½è¶…è¿‡å†…å­˜å¤§å°ï¼›Redis æœ‰éƒ¨åˆ†å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œè¿™æ ·èƒ½ä¿è¯æ•°æ®çš„æŒä¹…æ€§ æ•°æ®ç±»å‹æ”¯æŒï¼šMemcached å¯¹æ•°æ®ç±»å‹æ”¯æŒç›¸å¯¹ç®€å•ï¼›Redis æœ‰å¤æ‚çš„æ•°æ®ç±»å‹ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Redis è€Œä¸ç”¨ map&#x2F;guava åšç¼“å­˜ç¼“å­˜åˆ†ä¸ºæœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜ map æˆ–è€… guava å®ç°çš„æ˜¯æœ¬åœ°ç¼“å­˜ï¼Œè¿™ç§ç¼“å­˜æ˜¯å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œä¸€æ—¦ JVM æŒ‚äº†æˆ–æ‰‹åŠ¨åœæ‰ï¼Œæ•°æ®å°±ä¸¢å¤±äº†ï¼Œæœ¬åœ°ç¼“å­˜æ— æ³•åšåˆ°å¤šå®ä¾‹å…±äº«ï¼Œå› ä¸ºæ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„ä¸€ä»½ï¼Œç”Ÿå‘½å‘¨æœŸå’Œ JVM ç»‘å®š Redis æˆ–è€… Memcached åˆ™ç§°ä¸ºåˆ†å¸ƒå¼ç¼“å­˜ï¼Œæ”¯æŒå¤šå®ä¾‹å…±äº«ï¼ŒRedis è¿˜æ”¯æŒæ•°æ®æŒä¹…åŒ–ï¼Œå®•æœºæ•°æ®è¿˜åœ¨ Redis ä¸‰å¤§ç»å…¸é—®é¢˜ç¼“å­˜ç©¿é€æŸ¥è¯¢ä¸€ä¸ªæ•°æ®åº“ä¸å­˜åœ¨çš„æ•°æ®ï¼Œå› ä¸ºæ•°æ®åº“æ²¡æœ‰ï¼Œæ‰€ä»¥ä¸èƒ½å°†æ•°æ®åº“å€¼ç¼“å­˜èµ·æ¥ï¼Œå¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½ç›´æ¥å»åˆ°æ•°æ®åº“ï¼ŒRedis å½¢åŒè™šè®¾ è§£å†³æ–¹æ¡ˆï¼š ç¼“å­˜ç©ºå€¼å½“è¯·æ±‚çš„æ•°æ®åº“ä¸å­˜åœ¨äº Redis ä¸­ä¹Ÿä¸å­˜åœ¨äºæ•°æ®åº“æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªé»˜è®¤ç©ºå€¼ï¼Œåç»­å†è¿›è¡ŒæŸ¥è¯¢æ—¶å°±ç›´æ¥è¿”å›ï¼Œé¿å…è¯·æ±‚å»åˆ°æ•°æ®åº“ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜éœ€è¦å¯¹è¯¥æ•°æ®è®¾ç½®ä¸€ä¸ªåˆé€‚çš„è¿‡æœŸæ—¶é—´ï¼Œä¸ç„¶åç»­è¿™ä¸ª key çš„æ•°æ®åœ¨æ•°æ®åº“æœ‰äº†ï¼Œæ°¸è¿œä¸èƒ½è¢«æŸ¥åˆ° å¸ƒéš†è¿‡æ»¤å™¨åœ¨æ•°æ®å†™å…¥æ•°æ®åº“çš„åŒæ—¶ï¼Œå°†è¿™ä¸ª ID åŒæ­¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå½“è¯·æ±‚çš„ ID ä¸å­˜åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œåˆ™è¯´æ˜è¯¥è¯·æ±‚æŸ¥è¯¢çš„æ•°æ®ä¸€å®šæ²¡æœ‰åœ¨æ•°æ®åº“ä¸­ä¿å­˜ï¼Œå°±ä¸è¦å†å»æŸ¥æ•°æ®åº“ åŸç†ï¼šé¦–å…ˆåˆ†é…ä¸€å—æ•°ç»„ï¼Œé‡Œé¢çš„å€¼å…¨ä¸º 0ï¼Œå½“å­˜å…¥å…ƒç´ æ—¶ï¼Œé‡‡ç”¨ N ä¸ªå“ˆå¸Œå‡½æ•°å¯¹è¯¥å…ƒç´ è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œæ˜ å°„å‡ºæ¥çš„ä½ç½®å…¨éƒ¨è®¾ç½®ä¸º 1ï¼›å½“æ£€æŸ¥è¿™ä¸ª key æ˜¯å¦å­˜åœ¨æ—¶ï¼Œä¹Ÿæ˜¯åŒæ ·çš„æ–¹æ³•ï¼Œå¦‚æœå¾—åˆ°çš„å…¨ä¸º 1ï¼Œåˆ™ key å­˜åœ¨ï¼›å¸ƒéš†è¿‡è·¯å™¨å­˜çš„åªæ˜¯è¿™ä¸ª key è®¡ç®—å‡ºæ¥çš„å“ˆå¸Œå€¼ï¼Œå¹¶ä¸æ˜¯è¿™ä¸ª key æœ¬èº«ï¼Œè€Œå“ˆå¸Œå‡½æ•°æ˜¯ä¼šå‡ºç°ç¢°æ’çš„ï¼Œæ‰€ä»¥å°±ç®—è®¡ç®—å‡ºæ¥å…¨æ˜¯ 1ï¼Œä¹Ÿä¸èƒ½ä¿è¯å…¶å®è¿™ä¸ª key å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯ä¼šå‡ºç°åˆ¤æ–­ key å­˜åœ¨ï¼Œä½†å®é™…ä¸å­˜åœ¨çš„çš„æƒ…å†µï¼Œå­˜åœ¨è¯¯åˆ¤ï¼›åä¹‹ï¼Œå½“åˆ¤æ–­è¿™ä¸ª key ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œå°±ä¸€å®šä¸å­˜åœ¨ å¯¹äºæ¶æ„æ„é€ çš„è¯·æ±‚ å¯¹å‚æ•°è¿›è¡Œæ ¡éªŒï¼Œéæ³•åˆ™æ‹¦æˆª æ‹‰é»‘ IPï¼ˆæ²»æ ‡ä¸æ²»æœ¬ï¼‰ ç¼“å­˜å‡»ç©¿é«˜å¹¶å‘æµé‡ï¼Œè®¿é—®çš„è¿™ä¸ªæ•°æ®æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œè¯·æ±‚çš„æ•°æ®åœ¨æ•°æ®åº“ä¸­å­˜åœ¨ï¼Œä½†æ˜¯ Redis å­˜çš„é‚£ä¸€ä»½å·²ç»è¿‡æœŸï¼Œåç«¯éœ€è¦ä»æ•°æ®åº“åŠ è½½æ•°æ®å¹¶å†™åˆ° Redisï¼ˆå•ä¸€çƒ­ç‚¹æ•°æ®ã€é«˜å¹¶å‘ã€æ•°æ®å¤±æ•ˆï¼‰ è§£å†³æ–¹æ¡ˆï¼š è®¾ç½®éšå³è¿‡æœŸæ—¶é—´ï¼šè®©ç¼“å­˜æ•°æ®æ…¢æ…¢è¿‡æœŸ ç¼“å­˜é¢„çƒ­ï¼šæå‰æŠŠçƒ­é—¨æ•°æ®å­˜å…¥ Redisï¼Œè®¾ç½®ä¸€ä¸ªè¾ƒå¤§çš„è¿‡æœŸæ—¶é—´ é”æœºåˆ¶ï¼šå½“å‘ç°ç¼“å­˜å¤±æ•ˆæ—¶ï¼Œéœ€è¦å…ˆè·å–é”ï¼ŒæˆåŠŸåæ‰æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢å’Œå†™æ•°æ®åˆ°ç¼“å­˜çš„æ“ä½œï¼Œå¤±è´¥åˆ™è¯´æ˜å½“å‰æœ‰å…¶ä»–çº¿ç¨‹åœ¨å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œä¼‘çœ ä¸€æ®µæ—¶é—´å†é‡è¯• ç¼“å­˜é›ªå´©åˆ†ä¸¤ç§æƒ…å†µ Redis ä¸­å¤§é‡æ•°æ®åŒæ—¶å¤±æ•ˆï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¤§é‡çš„è¯·æ±‚ç›´æ¥å»åˆ°æ•°æ®åº“ï¼Œé€ æˆæ•°æ®åº“å‹åŠ›æ¿€å¢ï¼Œä¸¥é‡çš„è¯ä¼šææŒ‚æ•°æ®åº“ è§£å†³æ–¹æ¡ˆï¼š è®¾ç½®éšå³è¿‡æœŸæ—¶é—´ï¼Œé¿å…å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸ å¯¹éæ ¸å¿ƒä¸šåŠ¡çš„æ¥å£è¿›è¡Œé™æµï¼Œé¿å…è¿‡å¤šè¯·æ±‚ç›´æ¥è¢«å»åˆ°æ•°æ®åº“ åå°å¼€å¯æ—¶ä»»åŠ¡ï¼Œåœ¨ç¼“å­˜å¿«è¦å¤±æ•ˆæ—¶åŠæ—¶æ›´æ–°ç¼“å­˜ï¼ˆå…·ä½“é—®é¢˜å…·ä½“åˆ†æï¼‰ Redis æŒ‚äº†ï¼Œä¹Ÿä¼šä½¿è¯·æ±‚å…¨éƒ¨å»åˆ°æ•°æ®åº“ è§£å†³æ–¹æ¡ˆï¼š å°†çƒ­ç‚¹æ•°æ®å‡åŒ€åˆ†å¸ƒåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Š æœåŠ¡ç†”æ–­å’Œé™æµ æ„å»ºé«˜å¯ç”¨é›†ç¾¤ ç¼“å­˜å‡»ç©¿å’Œç¼“å­˜é›ªå´©çš„æœ€å¤§åŒºåˆ«å°±æ˜¯å•ä¸€çƒ­ç‚¹æ•°æ®å¤±æ•ˆï¼Œè¿˜æ˜¯å¤§é‡æ•°æ®åŒæ—¶å¤±æ•ˆ æ€»ä¹‹æŠŠæ¡å‰ä¸­åçš„åŸåˆ™å»è¿›è¡Œç³»ç»Ÿè®¾è®¡å’Œè€ƒè™‘ æ•…éšœä¹‹å‰ï¼Œå°½å¯èƒ½é›†ç¾¤éƒ¨ç½²ï¼Œæ”¾ç½®å•ç‚¹æ•…éšœå‘ç”Ÿäº†æ•…éšœï¼Œå¯¹æœåŠ¡è¿›è¡Œé™æµã€é™çº§æ“ä½œï¼Œé¿å…ææŒ‚ MySQLä¿®å¤äº†æ•…éšœåï¼Œé€šè¿‡ Redis æŒä¹…åŒ–æœºåˆ¶ RDB å’Œ AOFï¼Œæ¢å¤ç¼“å­˜æ•°æ® Redis æŒä¹…åŒ– RDBï¼ˆRedis Database Backup fileï¼‰ï¼šRedis å¿«ç…§æ–‡ä»¶ï¼Œé‡Œé¢æ˜¯ä¸€äº›äºŒè¿›åˆ¶çš„æ•°æ®ï¼Œé€šè¿‡ saveã€bgsave ç­‰å‘½ä»¤è¿›è¡Œä¿å­˜ï¼Œå®•æœºæ¢å¤èµ·æ¥è¾ƒå¿«ï¼Œæ–‡ä»¶ä½“ç§¯ä¹Ÿå°ï¼Œæœ‰å‹ç¼© AOFï¼ˆAppend Only Fileï¼‰ï¼šå¯¹ Redis æ“ä½œçš„æ¯ä¸€æ¡å†™å‘½ä»¤éƒ½ä¼šè®°å½•èµ·æ¥ï¼Œæ˜¯çº¯æ–‡æœ¬ï¼Œäººå¯ä»¥çœ‹ï¼Œæ•…éšœæ¢å¤æ—¶ï¼Œé‡æ–°è·‘è®°å½•çš„å‘½ä»¤ï¼Œå› ä¸ºè®°å½•æ¯ä¸€æ¡å‘½ä»¤ï¼Œæ‰€ä»¥ä½“ç§¯ä¼šè¾ƒå¤§ Redis æ”¯æŒåŒæ—¶å¼€å¯ RDB å’Œ AOFï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¼šä¼˜å…ˆåˆ©ç”¨ AOF æ–‡ä»¶æ¥æ¢å¤æ•°æ®ï¼Œå› ä¸º AOF æ–‡ä»¶ä¿å­˜äº†æ¯ä¸€æ¡è®°å½•ï¼Œç›¸å¯¹æ¥è¯´æ•°æ®å®Œæ•´æ€§é«˜ä¸€ç‚¹ Redis ä¸»ä»å•èŠ‚ç‚¹ Redis çš„å¹¶å‘èƒ½åŠ›æœ‰ä¸Šé™ï¼Œæ­å»ºä¸»ä»é›†ç¾¤å¯ä»¥æé«˜å¹¶å‘èƒ½åŠ›ï¼Œå®ç°è¯»å†™åˆ†ç¦»åªæœ‰ master èŠ‚ç‚¹å¯ä»¥æ‰§è¡Œå†™æ“ä½œï¼Œslave èŠ‚ç‚¹åªèƒ½æ‰§è¡Œè¯»æ“ä½œ ä¸»ä»åŒæ­¥ä¸»ä»åŒæ­¥åˆ†ä¸ºå…¨é‡åŒæ­¥å’Œå¢é‡åŒæ­¥ å…¨é‡åŒæ­¥å½“ slave ç¬¬ä¸€æ¬¡è¿æ¥åˆ° master æ—¶ï¼Œä¼šæ‰§è¡Œä¸€æ¬¡å…¨é‡åŒæ­¥ï¼Œè¿™ä¸ªæ—¶å€™ master ä¼šå°†å†…å­˜ä¸­çš„æ•°æ®ç”Ÿæˆå¿«ç…§ RDBï¼Œå¹¶å‘é€ç»™ slaveï¼Œåç»­é€šè¿‡å‘é€ä¿å­˜åœ¨ repl_backlog çš„å‘½ä»¤ç»™ slave å®Œæˆå¢é‡åŒæ­¥æ€ä¹ˆçŸ¥é“æ˜¯ä¸æ˜¯ç¬¬ä¸€æ¬¡è¿æ¥ï¼Ÿmaster å’Œ slave éƒ½æœ‰ä¸€ä¸ª replication idï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œåˆ™æ˜¯ç¬¬ä¸€æ¬¡åŒæ­¥ï¼Œé‚£ä¹ˆ slave å°±ä¼šä¿®æ”¹è‡ªå·±çš„ id ä¸º master çš„ idå¦‚æœ slave æ–­å¼€å¤ªä¹…ï¼Œå¯¼è‡´ offset å·®å¤ªå¤šï¼Œä¹Ÿè¦å…¨é‡åŒæ­¥ï¼Œoffset å¯ä»¥ç®€å•ç†è§£ä¸º slave å’Œ master çš„æ•°æ®ç›¸å·®çš„é‡ï¼Œè¯¦ç»†çš„è¯è®°ä¸æ¸…äº†ï¼Œæœ‰ä¸ªåœ†ç¯ä»€ä¹ˆçš„ï¼Œå¦‚æœåœ¨åœ†ä¸Šèµ°äº†ä¸€åœˆæ•°æ®è¿˜æ²¡åŒæ­¥è¿‡å»ï¼Œé‚£åœ†ä¸Šçš„æ•°æ®å°±ä¼šè¢«è¦†ç›–ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå°±è¦å…¨é‡åŒæ­¥ å¢é‡åŒæ­¥slave æŠŠ offset å‘ç»™ masterï¼Œmaster å» repl_backlog é‡ŒæŸ¥çœ‹ï¼Œå¹¶å‘é€ offset ä¹‹åçš„å‘½ä»¤ç»™ slave Redis Sentinel å“¨å…µæœºåˆ¶Sentinel æ˜¯ Redis çš„é«˜å¯ç”¨è§£å†³æ–¹æ¡ˆï¼Œç”¨æ¥å¯¹ Redis ä¸»ä»èŠ‚ç‚¹è¿›è¡Œç›‘æ§ï¼Œå‘ç”Ÿæ•…éšœæ—¶é€šè¿‡æŠ•ç¥¨æœºåˆ¶é€‰ä¸¾å‡ºæ–°çš„ masterï¼Œå¹¶å°†æ‰€æœ‰ slave è¿æ¥åˆ°æ–°çš„ master ä¸Š å“¨å…µä¹Ÿæ˜¯ä¸€ä¸ª Redis æœåŠ¡å™¨ï¼Œè¿è¡Œçš„æ˜¯ redis-sentinel å‘½ä»¤ï¼Œè€Œæ™®é€š redis æœåŠ¡è¿è¡Œçš„åˆ™æ˜¯ redis-server å‘½ä»¤ å“¨å…µä¸æä¾›æ•°æ®æœåŠ¡ï¼Œé€šå¸¸é…ç½®æˆå•æ•°ï¼Œå¯ä»¥è¿è¡Œå¤šä¸ªå®ä¾‹ç»„æˆä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿ å¯¹äºä¸€äº›èµ·ç›‘æ§ä½œç”¨çš„ä¸­é—´ä»¶ï¼Œå®Œæˆçš„äº‹æƒ…æ— éå°±æ˜¯ä¸‹é¢å‡ ä¸ªï¼š ç›‘æ§ï¼šç¡®ä¿ä¸»ä»èŠ‚ç‚¹æ­£å¸¸è¿è¡Œ é€šçŸ¥ï¼šå‡ºç°é—®é¢˜æ—¶å‘å‡ºé€šçŸ¥ æ•…éšœè½¬ç§»ï¼šé€‰ä¸¾æ–° masterï¼Œå°†å…¶ä»– slave è¿æ¥åˆ°æ–°çš„ master ä¸Š","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://linweiyuan.github.io/tags/Redis/"}]},{"title":"çº¿ç¨‹ç›¸å…³çŸ¥è¯†ç‚¹","slug":"çº¿ç¨‹ç›¸å…³çŸ¥è¯†ç‚¹","date":"2021-10-24T15:13:13.000Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"2021/10/24/çº¿ç¨‹ç›¸å…³çŸ¥è¯†ç‚¹.html","link":"","permalink":"https://linweiyuan.github.io/2021/10/24/%E7%BA%BF%E7%A8%8B%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9.html","excerpt":"","text":"åŸºæœ¬æ¦‚å¿µ åˆå§‹çŠ¶æ€ new å¯è¿è¡Œ&#x2F;è¿è¡ŒçŠ¶æ€ runnable ä¼‘çœ çŠ¶æ€ blocked waiting timed_waiting ç»ˆæ­¢çŠ¶æ€ terminated çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€ åˆ›å»ºï¼šnew å°±ç»ªï¼šstart()ï¼Œå¯è¿è¡Œï¼Œç­‰å¾…è·å– CPU çš„ä½¿ç”¨æƒ è¿è¡Œï¼šæ‰§è¡Œ é˜»å¡ï¼šæ”¾å¼ƒ CPU ä½¿ç”¨æƒï¼Œsleepï¼Œwaitï¼ˆsleep æ˜¯ Thread çš„ï¼Œwait æ˜¯ Object çš„ï¼‰ æ­»äº¡ï¼šæ‰§è¡Œå®Œæˆ–å¼‚å¸¸é€€å‡º çº¿ç¨‹çš„ run() å’Œ start() çš„åŒºåˆ«start() æ–¹æ³•ç”¨äºå¯åŠ¨çº¿ç¨‹ï¼Œrun() æ–¹æ³•ç”¨äºæ‰§è¡Œçº¿ç¨‹çš„è¿è¡Œæ—¶ä»£ç ï¼Œrun() å¯ä»¥é‡å¤è°ƒç”¨ï¼Œè€Œ start() åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚æœç›´æ¥è°ƒç”¨çº¿ç¨‹çš„ run() æ–¹æ³•ï¼Œç›¸å½“äºæ‰§è¡Œä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œä¸åœ¨æ•´ä¸ªçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¸­ å¦‚ä½•åœæ­¢ä¸€ä¸ªçº¿ç¨‹ ä½¿ç”¨ flag stop() interrupt() sleep(), wait(), join(), yield() sleep: Thread ç±»çš„é™æ€æ–¹æ³•ï¼Œä¸ä¾èµ–äº synchronizedï¼Œä¸€èˆ¬ç”¨äºå½“å‰çº¿ç¨‹ä¼‘çœ ï¼Œä¼šé‡Šæ”¾é” wait: Object ç±»çš„æ™®é€šæ–¹æ³•ï¼Œä¾èµ–äº synchronizedï¼Œä¸€èˆ¬ç”¨äºå¤šçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œä¸ä¼šé‡Šæ”¾é”ï¼Œè¦ä½¿ç”¨ notify() æˆ–è€… notifyAll() å”¤é†’ yield: æ‰§è¡Œåçº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œé©¬ä¸Šé‡Šæ”¾äº† CPU çš„æ‰§è¡Œæƒï¼Œä½†æ˜¯ä¿ç•™äº† CPU çš„æ‰§è¡Œèµ„æ ¼ï¼Œå¯èƒ½åœ¨ä¸‹æ¬¡è°ƒåº¦çš„æ—¶å€™å†æ¬¡è·å¾—æ‰§è¡Œæƒ join: æ‰§è¡Œåçº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè®© join çš„çº¿ç¨‹å…ˆæ‰§è¡Œå®Œæˆ–ä¸­æ–­ notify() å’Œ notifyAll() çš„åŒºåˆ«notify() éšæœºå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼ŒnotifyAll() å”¤é†’æ‰€æœ‰çš„çº¿ç¨‹ï¼Œå½“ notifyAll() è°ƒç”¨åï¼Œä¼šå°†å…¨éƒ¨çº¿ç¨‹ç”±ç­‰å¾…æ± ç§»åˆ°é”æ± ï¼Œç„¶åå‚ä¸é”çš„ç«äº‰ï¼Œç«äº‰æˆåŠŸåˆ™ç»§ç»­æ‰§è¡Œï¼Œä¸æˆåŠŸåˆ™ç•™åœ¨é”æ± ç­‰å¾…é”é‡Šæ”¾åå†æ¬¡å‚ä¸ç«äº‰ å®ç°å¤šçº¿ç¨‹çš„å‡ ç§æ–¹å¼ ç»§æ‰¿ Thread ç±»ï¼ˆå®é™…ä¸Š Thread implements Runnableï¼‰ å®ç° Runnable æ¥å£ å®ç° Callable æ¥å£ï¼ˆé€šè¿‡ FutureTask åŒ…è£…å™¨æ¥åˆ›å»ºï¼‰ é€šè¿‡çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹ï¼Œä½¿ç”¨çº¿ç¨‹æ± æ¥å£ ExecutorService ç»“åˆ Callableï¼ŒFuture å®ç°æœ‰è¿”å›å€¼çš„å¤šçº¿ç¨‹ runnable æœ‰ä¸¤ä¸ªå¼Šç«¯ï¼ˆCallable å’Œ Runnable çš„æœ€å¤§åŒºåˆ«å°±æ˜¯ Callable å¯ä»¥æœ‰è¿”å›å€¼ï¼‰ï¼š ä¸èƒ½è·å–è¿”å›ç»“æœ ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ å®ˆæŠ¤çº¿ç¨‹å®ˆæŠ¤çº¿ç¨‹æ˜¯è¿è¡Œåœ¨åå°çš„ä¸€ç§ç‰¹æ®Šè¿›ç¨‹ï¼Œä¸ºæ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹æä¾›æœåŠ¡ï¼Œæ¯”å¦‚ GC çº¿ç¨‹å°±æ˜¯ç‰¹æ®Šçš„å®ˆæŠ¤çº¿ç¨‹ ç”¨æ³•æ³¨æ„ï¼šthread.setDaemon(true) å¿…é¡»åœ¨ thread.start() ä¹‹å‰è®¾ç½®ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ IllegalThreadStateExceptionï¼Œå› ä¸ºä¸èƒ½æŠŠæ­£åœ¨è¿è¡Œçš„å¸¸è§„çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ ThreadLocalThreadLocal ä¸æ˜¯å¤šçº¿ç¨‹åŒæ­¥æœºåˆ¶ä¸­çš„ä¸€ç§ï¼Œè€Œæ˜¯ä¸€ç§è§£å†³æ€è·¯ï¼Œå®ƒè§£å†³çš„æ˜¯å¤šçº¿ç¨‹ä¸‹æˆå‘˜å˜é‡çš„å®‰å…¨é—®é¢˜ï¼Œä¸æ˜¯å…±äº«å˜é‡çš„å®‰å…¨é—®é¢˜ çº¿ç¨‹åŒæ­¥æœºåˆ¶æ˜¯å¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ªå˜é‡ï¼Œè€Œ ThreadLocal æ˜¯æ¯ä¸ªçº¿ç¨‹åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„å•ç‹¬å˜é‡å‰¯æœ¬ï¼Œæ‰€ä»¥æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œè€Œä¸ä¼šå½±å“åˆ°å…¶ä»–çº¿ç¨‹çš„å˜é‡å‰¯æœ¬ ThreadLocal å†…éƒ¨æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„å†…éƒ¨ç±»ï¼šThreadLocalMapï¼Œæ˜¯çœŸæ­£å®ç°çº¿ç¨‹éš”ç¦»æœºåˆ¶çš„å…³é”®ï¼ŒThreadLocalMap å†…éƒ¨ç»“æ„ç±»ä¼¼äº Mapï¼Œç”±é”®å€¼å¯¹ key å’Œ value ç»„æˆä¸€ä¸ª entryï¼Œkey ä¸º ThreadLocal æœ¬èº«ï¼Œvalue æ˜¯å¯¹åº”çš„çº¿ç¨‹å˜é‡å‰¯æœ¬ï¼ˆé¦–å…ˆæ˜¯ Threadï¼ŒThread é‡Œé¢æœ‰ ThreadLocal.ThreadLocalMapï¼ŒMap çš„è¯å­˜å‚¨çš„æ˜¯ Entry é›†åˆï¼Œæ¯ä¸€ä¸ª Entry çš„ key ä¸º ThreadLocalï¼Œvalue ä¸ºå…·ä½“çš„å€¼ï¼‰ æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ ThreadLocal æœ¬èº«ä¸å­˜å‚¨å€¼ï¼Œå®ƒåªæ˜¯æä¾›ä¸€ä¸ªæŸ¥æ‰¾åˆ°å€¼çš„ key ThreadLocal åŒ…å«åœ¨ Thread ä¸­ï¼Œä¸æ˜¯ Thread åŒ…å«åœ¨ ThreadLocal ä¸­ ThreadLocalMap å’Œ HashMap çš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ˜¯å®ç°ä¸Šå´æœ‰å¾ˆå¤§çš„ä¸åŒï¼š HashMap çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ + é“¾è¡¨ ThreadLocalMap çš„æ•°æ®ç»“æ„ä»…ä»…æ˜¯æ•°ç»„ HashMap æ˜¯é€šè¿‡é“¾åœ°å€æ³•æ¥è§£å†³å“ˆå¸Œå†²çªï¼ŒThreadLocalMap æ˜¯é€šè¿‡å¼€æ”¾åœ°å€æ³•æ¥è§£å†³å“ˆå¸Œå†²çªï¼ˆé“¾åœ°å€ï¼šæ•°ç»„åŠ é“¾è¡¨ï¼Œå¼€æ”¾åœ°å€ï¼šå¯»æ‰¾ç©ºçš„ä½ç½®ï¼‰ HashMap é‡Œé¢çš„ Entry å†…éƒ¨ç±»çš„å¼•ç”¨éƒ½æ˜¯å¼ºå¼•ç”¨ï¼ŒThreadLocalMap é‡Œé¢çš„ Entry å†…éƒ¨ç±»ä¸­çš„ key æ˜¯å¼±å¼•ç”¨ï¼Œvalue æ˜¯å¼ºå¼•ç”¨ 1static class Entry extends WeakReference&lt;ThreadLocal&lt;?&gt;&gt; ä»æºç å¯ä»¥çœ‹å‡º ThreadLocal.ThreadLocalMap.Entry ä¸­ä½¿ç”¨çš„ key ä¸º ThreadLocal çš„å¼±å¼•ç”¨ï¼Œè€Œ value æ˜¯å¼ºå¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ ThreadLocal æ²¡æœ‰è¢«å¤–éƒ¨å¼ºå¼•ç”¨çš„æƒ…å†µä¸‹ï¼Œåœ¨åƒåœ¾å›æ”¶çš„æ—¶å€™ key ä¼šè¢«æ¸…ç†æ‰ï¼Œè€Œ value ä¸ä¼šè¢«æ¸…ç†ï¼Œè¿™æ ·ä¸€æ¥ï¼ŒThreadLocalMap ä¸­å°±ä¼šå‡ºç° key çš„ null çš„ Entryï¼Œå‡å¦‚ä¸åšä»»ä½•æªæ–½çš„è¯ï¼Œvalue æ°¸è¿œæ— æ³•è¢« GCï¼Œè¿™ä¸ªæ—¶å€™å°±å¯èƒ½äº§ç”Ÿå†…å­˜æ³„æ¼ å¦‚ä½•é¿å…å†…å­˜æ³„æ¼ï¼Ÿ å½“ä¸€ä¸ªå˜é‡ä¸ç”¨çš„æ—¶å€™ï¼Œè¦è°ƒç”¨ remove() åˆ é™¤æ‰ï¼ˆå†…éƒ¨è°ƒç”¨äº† expungeStaleEntry()ï¼Œå°† value è®¾ä¸º nullï¼Œè¿™æ ·ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶æ—¶å°±ä¼šè¢«å½»åº•å›æ”¶æ‰ï¼‰ CASCAS å…¨ç§° Compare And Swapï¼Œæ¯”è¾ƒå¹¶äº¤æ¢ï¼Œæ˜¯ä¸€æ¡ CPU çš„å¹¶å‘åŸè¯­ åŸè¯­çš„æ‰§è¡Œå¿…é¡»æ˜¯è¿ç»­çš„ï¼Œåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¸å…è®¸è¢«ä¸­æ–­ï¼Œå› æ­¤ä¸ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå…·æœ‰åŸå­æ€§ã€‚CAS æ˜¯ä¸€ç§é‡è¦çš„åŒæ­¥æ€æƒ³ï¼Œåˆ¤æ–­å†…å­˜ä¸­çš„å€¼æ˜¯å¦å’Œé¢„æœŸçš„å€¼ä¸€æ ·ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†å†…å­˜ä¸­çš„å€¼æ›´æ–°ä¸ºæ–°å€¼ï¼Œå¦åˆ™ä¼šä¸æ–­é‡è¯•ï¼Œç›´åˆ°ä¸€è‡´ä¸ºæ­¢ ABA é—®é¢˜ æ¯”è¾ƒå¹¶äº¤æ¢çš„å¾ªç¯ï¼Œå­˜åœ¨ä¸€ä¸ªæ—¶é—´å·®ï¼Œè€Œè¿™ä¸ªæ—¶é—´å·®å¯èƒ½å¸¦æ¥æ„æƒ³ä¸åˆ°çš„é—®é¢˜ æ¯”å¦‚ä¸¤ä¸ªçº¿ç¨‹ A å’Œ B ä¸€å¼€å§‹éƒ½ä»ä¸»å†…å­˜ä¸­æ‹·è´äº†åŸå€¼ä¸º 1 çº¿ç¨‹ A æ‰§æ‹¿åˆ°å€¼ä¸º 1 ç„¶åæŒ‚èµ· çº¿ç¨‹ B ä¿®æ”¹å€¼ä¸º 2ï¼Œæ‰§è¡Œå®Œæ¯• çº¿ç¨‹ B è§‰å¾—ä¿®æ”¹é”™è¯¯ï¼ŒæŠŠå€¼é‡æ–°è®¾ç½®ä¸º 1ï¼Œ çº¿ç¨‹ A è¢«å”¤é†’ï¼Œæ¯”è¾ƒå‘ç°å†…å­˜ä¸­çš„å€¼å’Œé¢„æœŸçš„å€¼ä¸€æ ·ï¼Œä¿®æ”¹æˆåŠŸï¼ˆä½†æ˜¯ä¸çŸ¥é“è¿™ä¸ªå€¼å·²ç»è¢« B ä¿®æ”¹è¿‡äº†ï¼‰ å°½ç®¡çº¿ç¨‹ A CAS æ“ä½œæˆåŠŸï¼Œä½†ä¸ä»£è¡¨æ²¡æœ‰é—®é¢˜ï¼Œæœ‰çš„éœ€æ±‚ï¼Œåªæ³¨é‡å¤´å’Œå°¾ï¼Œåªè¦é¦–å°¾ä¸€è‡´ï¼Œå°±æ¥å—ï¼Œä½†æ˜¯æœ‰çš„éœ€æ±‚ï¼Œè¿˜çœ‹é‡è¿‡ç¨‹ï¼Œä¸­é—´ä¸èƒ½å‘ç”Ÿä»»ä½•ä¿®æ”¹ï¼Œè¿™å°±å¼•å‡ºäº† AtomicStampedReference åŸå­å¼•ç”¨ AtomicStampedReference å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªç‰ˆæœ¬å· stampï¼Œåœ¨è¿›è¡Œ CAS æ“ä½œçš„æ—¶å€™ï¼Œä¸ä»…è¦æ¯”è¾ƒå½“å‰å€¼ï¼Œè¿˜è¦æ¯”è¾ƒç‰ˆæœ¬å·ï¼Œåªæœ‰ä¸¤è€…éƒ½ç›¸ç­‰ï¼Œæ‰æ‰§è¡Œæ›´æ–°æ“ä½œï¼ˆæœ‰ç‚¹ç±»ä¼¼ä¹è§‚é”ï¼‰ ä»»ä½•æŠ€æœ¯éƒ½ä¸æ˜¯å®Œç¾çš„ï¼ŒCAS ä¹Ÿæœ‰è‡ªå·±çš„ç¼ºç‚¹ï¼ŒCAS å®é™…ä¸Šæ˜¯ä¸€ç§è‡ªæ—‹é” ä¸€ç›´å¾ªç¯ï¼Œå¼€é”€æ¯”è¾ƒå¤§ åªèƒ½ä¿è¯ä¸€ä¸ªå˜é‡çš„åŸå­æ“ä½œï¼Œå¤šä¸ªå˜é‡ä¾ç„¶è¦åŠ é” å¼•å‡ºäº† ABA é—®é¢˜ï¼ˆAtomicStampedReference å¯è§£å†³ï¼‰ CAS çš„ä½¿ç”¨åœºæ™¯é€‚åˆåœ¨ä¸€äº›å¹¶å‘é‡ä¸é«˜ï¼Œçº¿ç¨‹ç«äº‰è¾ƒå°‘çš„æƒ…å†µï¼Œä½†æ˜¯ä¸€æ—¦çº¿ç¨‹å†²çªä¸¥é‡çš„æƒ…å†µï¼Œå¾ªç¯æ—¶é—´å¤ªé•¿ï¼Œä¼šç»™ CPU å¸¦æ¥å¾ˆå¤§çš„å¼€é”€ çº¿ç¨‹æ± å¦‚ä½•åˆ›å»ºçº¿ç¨‹æ± ï¼ŸJDK ä¸­æä¾›äº†åˆ›å»ºçº¿ç¨‹æ± çš„ç±»ï¼ŒExecutorsï¼Œä½†æ˜¯ä¸€èˆ¬ä¸æ¨è Executors ç±»åªæ˜¯ä¸ªé™æ€å·¥å‚ï¼Œæä¾›åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ä¸ªé™æ€æ–¹æ³•ï¼ˆå†…éƒ¨å±è”½äº†çº¿ç¨‹æ± å‚æ•°é…ç½®ç»†èŠ‚ï¼‰ï¼Œè€ŒçœŸæ­£çš„çº¿ç¨‹æ± ç±»æ˜¯ ThreadPoolExecutor 123456789public ThreadPoolExecutor( int corePoolSizeï¼Œ int maximumPoolSizeï¼Œ long keepAliveTimeï¼Œ TimeUnit unitï¼Œ BlockingQueue&lt;Runnable&gt; workQueueï¼Œ ThreadFactory threadFactoryï¼Œ RejectedExecutionHandler handler) æ ¸å¿ƒå‚æ•°ï¼š corePoolSizeï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ã€‚å¦‚æœç­‰äº 0ï¼Œåˆ™ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œæ²¡æœ‰ä»»åŠ¡è¯·æ±‚è¿›å…¥æ—¶ï¼Œé”€æ¯çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ã€‚å¦‚æœå¤§äº 0ï¼Œå³ä½¿æœ¬åœ°ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ ¸å¿ƒçº¿ç¨‹ä¹Ÿä¸ä¼šè¢«é”€æ¯ã€‚è®¾ç½®å¾—è¿‡å¤§ä¼šæµªè´¹ç³»ç»Ÿèµ„æºï¼Œè®¾ç½®è¿‡å°ä¼šå¯¼è‡´çº¿ç¨‹é¢‘ç¹åˆ›å»º maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°ã€‚å¿…é¡»å¤§äºç­‰äº 1ï¼Œä¸”å¤§äºç­‰äº corePoolSizeã€‚å¦‚æœä¸ corePoolSize ç›¸ç­‰ï¼Œåˆ™çº¿ç¨‹æ± å¤§å°å›ºå®šã€‚å¦‚æœå¤§äº corePoolSizeï¼Œåˆ™æœ€å¤šåˆ›å»º maximumPoolSize ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ keepAliveTimeï¼šçº¿ç¨‹ç©ºé—²æ—¶é—´ã€‚çº¿ç¨‹æ± ä¸­çº¿ç¨‹ç©ºé—²æ—¶é—´è¾¾åˆ° keepAliveTime å€¼æ—¶ï¼Œçº¿ç¨‹ä¼šè¢«é”€æ¯ï¼Œç›´åˆ°å‰©ä¸‹ corePoolSize ä¸ªçº¿ç¨‹ä¸ºæ­¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°å¤§äº corePoolSize æ—¶ï¼ŒkeepAliveTime æ‰ä¼šèµ·ä½œç”¨ã€‚å¦‚æœ allowCoreThreadTimeOut è¢«è®¾ç½®ä¸º trueï¼Œå³ä½¿çº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°ç­‰äº corePoolSizeï¼ŒkeepAliveTime ä¹Ÿä¼šèµ·ä½œç”¨ï¼ˆå›æ”¶è¶…æ—¶çš„æ ¸å¿ƒçº¿ç¨‹ï¼‰ unitï¼šTimeUnit è¡¨ç¤ºæ—¶é—´å•ä½ workQueueï¼šç¼“å­˜é˜Ÿåˆ—ã€‚å½“è¯·æ±‚çº¿ç¨‹æ•°å¤§äº corePoolSize æ—¶ï¼Œçº¿ç¨‹è¿›å…¥ BlockingQueue é˜»å¡é˜Ÿåˆ— threadFactoryï¼šçº¿ç¨‹å·¥å‚ã€‚ç”¨æ¥ç”Ÿäº§ä¸€ç»„ç›¸åŒä»»åŠ¡çš„çº¿ç¨‹ã€‚ä¸»è¦ç”¨äºè®¾ç½®ç”Ÿæˆçš„çº¿ç¨‹åè¯å‰ç¼€ï¼Œæ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹ä»¥åŠçº¿ç¨‹çš„ä¼˜å…ˆçº§ç­‰ã€‚è®¾ç½®æœ‰æ„ä¹‰çš„åç§°å‰ç¼€å¯ä»¥å¾ˆå¿«çŸ¥é“çº¿ç¨‹æ˜¯ç”±å“ªä¸ªçº¿ç¨‹å·¥å‚åˆ›å»ºçš„ï¼Œæ–¹ä¾¿è°ƒè¯• handlerï¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥å¯¹è±¡ã€‚å½“ä»»åŠ¡æ•°è¾¾åˆ°ç¼“å­˜ä¸Šé™æ—¶ï¼ˆå³è¶…è¿‡ workQueue å‚æ•°èƒ½å­˜å‚¨çš„ä»»åŠ¡æ•°ï¼‰ï¼Œæ‰§è¡Œæ‹’ç»ç­–ç•¥ï¼Œç›¸å½“äºé™æµä¿æŠ¤ ä¸Šé¢å¤æ‚æ¦‚å¿µçš„ç®€æ´æè¿°ï¼š å¦‚æœçº¿ç¨‹æ± å½“å‰çŠ¶æ€ä¸æ˜¯ runningï¼Œç›´æ¥æ‹’ç» å¦‚æœ worker &lt; poolï¼Œåˆ›å»ºæ–°çº¿ç¨‹ å¦‚æœ worker &gt;&#x3D; poolï¼Œqueue æœªæ»¡ï¼Œå°†ä»»åŠ¡æ·»åŠ åˆ° queue å¦‚æœ pool &lt;&#x3D; worker &lt; maxï¼Œå¹¶ä¸” queue å·²æ»¡ï¼Œå¼€å¯æ–°çº¿ç¨‹ å¦‚æœ worker &gt; maxï¼Œå¹¶ä¸” queue å·²æ»¡ï¼Œæ‹’ç»ç­–ç•¥ï¼ˆé»˜è®¤ç›´æ¥æŠ›å¼‚å¸¸ï¼‰ çº¿ç¨‹æ± ç§ç±» FixedThreadPoolï¼šå›ºå®šé•¿åº¦çš„çº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°ç­‰äºæœ€å¤§çº¿ç¨‹æ•°ï¼Œä¸å­˜åœ¨ç©ºé—²çº¿ç¨‹ï¼ŒkeepAliveTime ä¸º 0ï¼Œå¯ä»¥æ§åˆ¶çº¿ç¨‹çš„æœ€å¤§å¹¶å‘æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šæ”¾åˆ°é˜Ÿåˆ—ä¸­ SingleThreadExecutorï¼šå•çº¿ç¨‹çº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°éƒ½æ˜¯ 1ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œç›¸å½“äºä¸²è¡Œæ‰§è¡Œï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šæ”¾åˆ°é˜Ÿåˆ—ä¸­ CachedThreadPoolï¼šå¯ç¼“å­˜çš„çº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°ä¸º 0ï¼Œæœ€å¤§çº¿ç¨‹æ•°ä¸º Integer.MAX_VALUEï¼Œå¦‚æœæ•°æ®è¿‡å¤šï¼Œå®ƒä¼šä¸æ–­åœ°åˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œå­˜åœ¨ OOM é£é™©ï¼ŒkeepAliveTime ä¸º 60ï¼Œå·¥ä½œçº¿ç¨‹å¤„äºç©ºé—²çŠ¶æ€è¶…è¿‡ keepAliveTime ä¼šå›æ”¶çº¿ç¨‹ WorkStealingPoolï¼šJDK 1.8 å¼•å…¥ï¼Œæ ¸å¿ƒæ˜¯å·¥ä½œçªƒå–ï¼Œæ²¡æ€ä¹ˆè§äººç”¨è¿‡ ScheduledThreadPoolï¼šç”¨äºå®šæ—¶æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹æ±  ç¦æ­¢ç›´æ¥ä½¿ç”¨ Executors åˆ›å»ºçº¿ç¨‹æ± çš„åŸå› ï¼ˆé™¤ Executors.newWorkStealingPool æ–¹æ³•ä¹‹å¤–ï¼Œå…¶ä»–æ–¹æ³•éƒ½æœ‰ OOM é£é™©ï¼‰ï¼š Executors.newCachedThreadPool å’Œ Executors.newScheduledThreadPool ä¸¤ä¸ªæ–¹æ³•æœ€å¤§çº¿ç¨‹æ•°ä¸º Integer.MAX_VALUEï¼Œå¦‚æœçº¿ç¨‹æ•°å¤ªå¤šï¼Œä¼šæœ‰ OOM çš„é£é™© Executors.newSingleThreadPool å’Œ Executors.newFixedThreadPool ä¸¤ä¸ªæ–¹æ³•çš„ workQueue å‚æ•°ä¸º LinkedBlockingQueueï¼Œå®¹é‡ä¸º Integer.MAX_VALUEï¼Œå¦‚æœç¬é—´è¯·æ±‚è¿‡å¤§ï¼Œå¯¼è‡´é˜Ÿåˆ—ä¸­ä»»åŠ¡è¿‡å¤šï¼Œä¼šæœ‰ OOM é£é™© çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥ThreadPoolExecutor æä¾›äº†å››ä¸ªå…¬å¼€çš„é™æ€å†…éƒ¨ç±»ï¼š AbortPolicyï¼šé»˜è®¤ï¼Œä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡º RejectedExecutionException DiscardPolicyï¼šä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ï¼ˆä¸æ¨èï¼‰ DiscardOldestPolicyï¼šä¸¢å¼ƒé˜Ÿåˆ—ä¸­ç­‰å¾…æœ€ä¹…çš„ä»»åŠ¡ï¼Œç„¶åæŠŠå½“å‰çš„æ–°ä»»åŠ¡åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ CallerRunsPolicyï¼šè°ƒç”¨ä»»åŠ¡çš„ run() æ–¹æ³•ç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œ å¦‚ä½•è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥å®ç° RejectedExecutionHandler æ¥å£æˆ–ç»§æ‰¿å·²æœ‰ç­–ç•¥ï¼Œé‡å†™ rejectedExecution() æ–¹æ³• ä¸ºä»€ä¹ˆè¦ç”¨çº¿ç¨‹æ± çº¿ç¨‹æ± ï¼Œæ•°æ®åº“è¿æ¥æ± ï¼ŒHTTP è¿æ¥æ± ç­‰éƒ½å±äºæ± åŒ–æŠ€æœ¯ï¼Œä¸»è¦æ˜¯ä¸ºäº†å‡å°‘æ¯æ¬¡è·å–èµ„æºçš„æ¶ˆè€—ï¼Œæé«˜å¯¹èµ„æºçš„åˆ©ç”¨ç‡ã€‚çº¿ç¨‹æ± æä¾›äº†ä¸€ç§é™åˆ¶å’Œç®¡ç†èµ„æºï¼ˆåŒ…æ‹¬æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼‰ï¼Œæ¯ä¸ªçº¿ç¨‹æ± è¿˜ç»´æŠ¤ä¸€äº›åŸºæœ¬ç»Ÿè®¡ä¿¡æ¯ä¾‹å¦‚å·²å®Œæˆä»»åŠ¡çš„æ•°é‡ é™ä½èµ„æºæ¶ˆè€—ã€‚é€šè¿‡é‡å¤åˆ©ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹é™ä½çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯é€ æˆçš„æ¶ˆè€— æé«˜ç›¸åº”é€Ÿåº¦ã€‚å½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦ç­‰å¾…çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œ æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ã€‚çº¿ç¨‹æ˜¯ç¨€ç¼ºèµ„æºï¼Œå¦‚æœæ— é™åˆ¶åœ°åˆ›å»ºï¼Œä¸ä»…ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œè¿˜ä¼šé™ä½ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ï¼Œè°ƒä¼˜å’Œç›‘æ§","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"Thread","slug":"Thread","permalink":"https://linweiyuan.github.io/tags/Thread/"}]},{"title":"JVMç›¸å…³çŸ¥è¯†ç‚¹","slug":"JVMç›¸å…³çŸ¥è¯†ç‚¹","date":"2021-10-01T13:53:27.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2021/10/01/JVMç›¸å…³çŸ¥è¯†ç‚¹.html","link":"","permalink":"https://linweiyuan.github.io/2021/10/01/JVM%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9.html","excerpt":"","text":"ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰ç¨‹åºè®¡æ•°å™¨é‡Œé¢å­˜æ”¾çš„æ˜¯ä¸‹ä¸€æ¡ JVM æŒ‡ä»¤ä»£ç çš„æ‰§è¡Œåœ°å€ï¼Œæ¦‚å¿µä¸Šæœ‰ç‚¹ç±»ä¼¼æ•°æ®åº“ç»“æœé›†éå†æ—¶çš„æ¸¸æ ‡ï¼Œä¸æ–­æŒ‡å‘ä¸‹ä¸€æ¡ï¼Œç‰©ç†ä¸Šæ˜¯é€šè¿‡å¯„å­˜å™¨å®ç°çš„ï¼Œå¯„å­˜åŒºåœ¨ CPU ä¸Šæ˜¯éå¸¸å¿«çš„å•å…ƒ åœ¨ JVM çš„è§„èŒƒä¸­ï¼Œæ¯æ¡çº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ï¼Œæ‰€ä»¥ç¨‹åºè®¡æ•°å™¨æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå› ä¸ºå½“å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢çš„æ—¶å€™ï¼Œéœ€è¦çŸ¥é“åˆ‡æ¢å›æ¥åä¸‹ä¸€æ­¥åº”è¯¥æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Œå¦‚æœä¸æ˜¯çº¿ç¨‹ç§æœ‰åˆ™ä¼šé€ æˆæ··ä¹± ç¨‹åºè®¡æ•°å™¨æ˜¯ JVM ä¸­å”¯ä¸€ä¸ä¼šå­˜åœ¨ OOM çš„åŒºåŸŸï¼Œè¿™ä¸€ç‚¹æ˜¯ JVM è§„èŒƒä¸Šè¦æ±‚çš„ è™šæ‹Ÿæœºæ ˆè¯´è™šæ‹Ÿæœºæ ˆä¹‹å‰å…ˆè¯´æ ˆï¼Œæ ˆçš„ç‰¹ç‚¹å°±æ˜¯å…ˆè¿›åå‡ºæˆ–åè¿›å…ˆå‡º è™šæ‹Ÿæœºæ ˆæ˜¯çº¿ç¨‹è¿è¡Œæ—¶éœ€è¦çš„å†…å­˜ç©ºé—´ï¼Œçº¿ç¨‹è¿è¡Œçš„ç›®çš„æ˜¯ä¸ºäº†æ‰§è¡Œä»£ç ï¼Œä»£ç ç”±ä¸€ä¸ªä¸ªæ–¹æ³•ç»„æˆï¼Œå½“çº¿ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œæ¯ä¸ªæ–¹æ³•éœ€è¦çš„å†…å­˜ç©ºé—´å°±æ˜¯æ ˆå¸§ï¼ˆå‚æ•°ï¼Œå±€éƒ¨å˜é‡ï¼Œè¿”å›åœ°å€ï¼‰ï¼Œæ¯ä¸ªæ ˆç”±å¤šä¸ªæ ˆå¸§ç»„æˆï¼Œå¯¹åº”ç€æ¯æ¬¡æ–¹æ³•è°ƒç”¨æ—¶æ‰€å ç”¨çš„å†…å­˜ï¼Œè°ƒç”¨æ–¹æ³•æ—¶å…¥æ ˆï¼Œæ‰§è¡Œå®Œå‡ºæ ˆï¼Œæ¯ä¸ªçº¿ç¨‹åªèƒ½æœ‰ä¸€ä¸ªæ´»åŠ¨æ ˆå¸§ï¼Œå¯¹åº”ç€å½“å‰æ­£åœ¨æ‰§è¡Œçš„é‚£ä¸ªæ–¹æ³•ï¼ˆæ ˆé¡¶éƒ¨ï¼‰ï¼Œæ ˆæ˜¯æœ‰ä¸€å®šçš„æ·±åº¦çš„ï¼Œå½“å‘ç”Ÿé€’å½’æ­»å¾ªç¯æ—¶ï¼Œä¸€ç›´æœ‰æ–¹æ³•å…¥æ ˆä½†ä¸å‡ºæ ˆï¼Œå¯¼è‡´æ ˆæº¢å‡ºï¼ŒæŠ›å‡º java.lang.StackOverflowError IDEA debug æ—¶å·¦ä¸‹è§’çš„ Frame å°±æ˜¯æ ˆå¸§ï¼Œæ¯”è¾ƒç›´è§‚ï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œå³è¾¹è¿˜å¯ä»¥çœ‹åˆ°æ ˆå†…çš„å±€éƒ¨å˜é‡å€¼ åƒåœ¾å›æ”¶æ˜¯å¦æ¶‰åŠæ ˆå†…å­˜ä¸ä¼š æ ˆå†…å­˜éšç€å‡ºæ ˆå°±é‡Šæ”¾æ‰ï¼Œåƒåœ¾å›æ”¶ä¸»è¦ç”¨æ¥å›æ”¶å †å†…å­˜ æ ˆå†…å­˜åˆ†é…è¶Šå¤§è¶Šå¥½å—ä¸æ˜¯ -Xss sizeï¼ˆæ¯”å¦‚-Xss1mï¼Œæ²¡æœ‰ç­‰å·ï¼‰ Windows ä¸‹å–å†³äºè™šæ‹Ÿå†…å­˜çš„è®¾ç½®ï¼Œå…¶ä»–ä¸»æµæ“ä½œç³»ç»Ÿä¸Šé»˜è®¤ä¸º 1024KBï¼ˆ1MBï¼‰ ç‰©ç†å†…å­˜çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œæ ˆå†…å­˜åˆ†é…è®¾ç½®å¾—è¶Šå¤§ï¼Œå ç”¨è¶Šå¤šå†…å­˜ï¼Œç”±äºæ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œæ‰€ä»¥çº¿ç¨‹å ç”¨çš„å†…å­˜å°±ä¼šå˜å¤§ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿå¯ä»¥åˆ›å»ºçš„æ€»çº¿ç¨‹æ•°å°±ä¼šå˜å° æ¯”å¦‚æ“ä½œç³»ç»Ÿ 10M å†…å­˜ï¼ˆåªæ˜¯ä¸¾ä¾‹ï¼‰ï¼Œæœ¬æ¥ä¸€ä¸ªçº¿ç¨‹é»˜è®¤å ç”¨ 1M å†…å­˜ï¼Œé‚£ä¹ˆå¯ä»¥åˆ›å»º 10 ä¸ªçº¿ç¨‹ï¼Œä½†è®¾ç½®-Xss2m åï¼Œåªèƒ½åˆ›å»º 5 ä¸ªçº¿ç¨‹äº† -Xss è®¾ç½®å¾—å¤§ï¼Œåªä¼šå¢åŠ æ–¹æ³•é€’å½’è°ƒç”¨çš„æ¬¡æ•°ï¼Œä¸€èˆ¬ä¸ä¼šæå‡æ€§èƒ½ï¼Œå°±æ˜¯ä¸å®¹æ˜“çˆ†æ ˆï¼Œä½†æ­»å¾ªç¯é€’å½’è¯¥çˆ†è¿˜å¾—çˆ† æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡æ˜¯å¦çº¿ç¨‹å®‰å…¨æ˜¯ æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ç§æœ‰çš„æ ˆå¸§ï¼Œé‡Œé¢ä¼šæœ‰å„è‡ªç‹¬ç«‹çš„å˜é‡ï¼Œäº’ä¸å¹²æ‰°ã€‚çº¿ç¨‹å®‰å…¨é—®é¢˜å‡ºç°åœ¨å…±äº«å˜é‡ä¸Šï¼Œå¦‚æœæ–¹æ³•å†…å±€éƒ¨å˜é‡æ²¡æœ‰é€ƒç¦»æ–¹æ³•çš„ä½œç”¨èŒƒå›´ï¼Œé‚£ä¹ˆè¿™ä¸ªå±€éƒ¨å˜é‡å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ çº¿ä¸Šè¯Šæ–­æ–¹æ³•é€šå¸¸éƒ½æ˜¯åå…«èˆ¬æ­¦è‰ºé…åˆç€æ¥ç”¨ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š top å‘½ä»¤ï¼ŒæŸ¥çœ‹ %CPUï¼Œé…åˆ grep java ps H -eo pid,tid,%cpu(å°å†™ cpu) | grep è¿›ç¨‹å· jstack è¿›ç¨‹ idï¼Œä¼šåˆ—å‡ºæ‰€æœ‰çº¿ç¨‹ï¼Œæœ‰çº¿ç¨‹å· nidï¼ˆ16 è¿›åˆ¶ï¼‰ï¼Œprintf â€˜%xâ€™ 10 è¿›åˆ¶ id jstack æŸ¥çœ‹æ˜¯å¦å‡ºç°æ­»é” æœ¬åœ°æ–¹æ³•æ ˆnative åœ°æ–¹æ³•è¿è¡Œæ—¶æ‰€éœ€è¦çš„ç©ºé—´ï¼Œå…¶ä»–çš„æ¯ä»€ä¹ˆå¥½è¯´çš„äº†ï¼Œä¸æ‡‚ å †é€šè¿‡ new å…³é”®å­—åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šä½¿ç”¨å †å†…å­˜å †é‡Œé¢çš„å¯¹è±¡æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œå †æœ‰åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå¹¶ä¸”ä¼šå‘ç”Ÿå†…å­˜æº¢å‡º java.lang.OutOfMemoryError: Java heap sapce JVM å‚æ•°å¸¸ç”¨çš„æœ‰ä¸¤ä¸ªï¼Œç”¨äºè®¾ç½®å†…å­˜å ç”¨å¤§å°-Xmsï¼šå †çš„åˆå§‹å¤§å°-Xmxï¼šå †çš„æœ€å¤§å ç”¨ ä¸ºä»€ä¹ˆä¸€èˆ¬éƒ½ä¼šå°†è¿™ä¸¤ä¸ªå‚æ•°è®¾ç½®æˆä¸€æ ·ï¼Ÿå› ä¸ºå½“å †å†…å­˜ä¸è¶³éœ€è¦è¿›è¡Œæ‰©å®¹çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿå†…å­˜æŠ–åŠ¨ï¼Œå¯¹ç¨‹åºè¿è¡Œçš„ç¨³å®šæ€§ä¼šæœ‰ä¸€å®šçš„å½±å“ çº¿ä¸Šè¯Šæ–­æ–¹æ³•åŒ…æ‹¬ä½†ä¸é™äºï¼š jpsï¼šæŸ¥çœ‹ç³»ç»Ÿä¸­å­˜åœ¨çš„ Java è¿›ç¨‹ jmapï¼šæŸ¥çœ‹å †å†…å­˜å ç”¨æƒ…å†µï¼Œjmap -head pid jconsoleï¼šå›¾å½¢ç•Œé¢çš„ï¼Œå¤šåŠŸèƒ½ç›‘æµ‹å·¥å…·ï¼Œå¯ä»¥è¿ç»­ç›‘æµ‹ï¼ˆå¯æµ‹å‡ºæ˜¯å¦å‘ç”Ÿæ­»é”ï¼‰ jvisualvmï¼šå † dump æ–¹æ³•åŒºçº¿ç¨‹å…±äº«ï¼Œå­˜æ”¾ä¸€äº›ç±»çš„åŸºæœ¬ä¿¡æ¯ï¼ˆç±»ï¼Œç±»åŠ è½½å™¨ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± ï¼‰ï¼Œé€»è¾‘ä¸Šæ˜¯å †çš„ä¸€éƒ¨åˆ†ï¼Œä¸åŒå‚å•†æœ‰ä¸åŒçš„å®ç° HotSpot åœ¨ 1.7 ä¹‹å‰ç”¨æ°¸ä¹…ä»£ï¼ˆå †ï¼‰ï¼Œ1.8 åç”¨å…ƒç©ºé—´ï¼ˆæ“ä½œç³»ç»Ÿå†…å­˜ï¼‰ æ–¹æ³•åŒºæ˜¯è§„èŒƒï¼Œæ°¸ä¹…ä»£æˆ–è€…å…ƒç©ºé—´æ˜¯å…¶ä¸­ä¸€ç§å®ç°ï¼Œæ–¹æ³•åŒºä¼šå‘ç”Ÿå†…å­˜æº¢å‡º1.8 ä»¥å‰ä¼šå¯¼è‡´æ°¸ä¹…ä»£å†…å­˜æº¢å‡ºï¼š-XX:MaxPermSize=mï¼ˆOutOfMemoryï¼šPermGen spaceï¼‰1.8 ä¹‹åä¼šå¯¼è‡´å…ƒç©ºé—´å†…å­˜æº¢å‡ºï¼š-XX:MaxMetaspaceSize=mï¼ˆOutOfMemoryï¼šMetaspaceï¼‰ å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œä¸²æ± ï¼ˆStringTableï¼‰å¸¸é‡æ± ï¼šæ˜¯ä¸€å¼ è¡¨ï¼Œç»´æŠ¤ç±»åï¼Œæ–¹æ³•åï¼Œå‚æ•°ç±»å‹ï¼Œå­—é¢é‡ç­‰ä¿¡æ¯ è¿è¡Œæ—¶å¸¸é‡æ± ï¼šå½“ç±»è¢«åŠ è½½æ—¶ï¼Œå®ƒçš„å¸¸é‡æ± ä¿¡æ¯å°±ä¼šæ”¾å…¥è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œå¹¶æŠŠé‡Œé¢çš„ç¬¦å·åœ°å€å˜ä¸ºçœŸå®åœ°å€ å­—ç¬¦ä¸²å¸¸é‡æ± ï¼šå­—ç¬¦ä¸²æ˜¯æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨å¾—éå¸¸å¤šçš„ç±»ï¼Œæ± åŒ–æŠ€æœ¯æŸç§ç¨‹åº¦ä¸Šä¼šæœ‰æ€§èƒ½ä¸Šçš„æå‡ å¦‚ä½•åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯åœ¨å †è¿˜æ˜¯åœ¨ä¸²æ± ä¸­ 12345public static void main(String[] args) &#123; String s1 = &quot;a&quot;; String s2 = &quot;b&quot;; String s3 = s1 + s2;&#125; javap -v x.class æŸ¥çœ‹äºŒè¿›åˆ¶å­—èŠ‚ç ï¼ˆç±»åŸºæœ¬ä¿¡æ¯ï¼Œå¸¸é‡æ± ï¼Œç±»æ–¹æ³•å®šä¹‰ï¼ŒåŒ…å«äº†è™šæ‹ŸæœºæŒ‡ä»¤ï¼‰ ä¸åŒçš„ JDK ç‰ˆæœ¬å¯ä»¥çœ‹åˆ°åç¼–è¯‘å‡ºæ¥çš„ä¸ä¸€æ · JDK 1.8 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576Classfile /home/linweiyuan/Temp/test/Test.class Last modified Sep 24, 2022; size 759 bytes MD5 checksum 1eeb9a3b24c5c4f6a213e62ca4ee1691 Compiled from &quot;Test.java&quot;public class Test minor version: 0 major version: 52 flags: ACC_PUBLIC, ACC_SUPERConstant pool: #1 = Methodref #9.#18 // java/lang/Object.&quot;&lt;init&gt;&quot;:()V #2 = String #19 // a #3 = String #20 // b #4 = Class #21 // java/lang/StringBuilder #5 = Methodref #4.#18 // java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V #6 = Methodref #4.#22 // java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; #7 = Methodref #4.#23 // java/lang/StringBuilder.toString:()Ljava/lang/String; #8 = Class #24 // Test #9 = Class #25 // java/lang/Object #10 = Utf8 &lt;init&gt; #11 = Utf8 ()V #12 = Utf8 Code #13 = Utf8 LineNumberTable #14 = Utf8 main #15 = Utf8 ([Ljava/lang/String;)V #16 = Utf8 SourceFile #17 = Utf8 Test.java #18 = NameAndType #10:#11 // &quot;&lt;init&gt;&quot;:()V #19 = Utf8 a #20 = Utf8 b #21 = Utf8 java/lang/StringBuilder #22 = NameAndType #26:#27 // append:(Ljava/lang/String;)Ljava/lang/StringBuilder; #23 = NameAndType #28:#29 // toString:()Ljava/lang/String; #24 = Utf8 Test #25 = Utf8 java/lang/Object #26 = Utf8 append #27 = Utf8 (Ljava/lang/String;)Ljava/lang/StringBuilder; #28 = Utf8 toString #29 = Utf8 ()Ljava/lang/String;&#123; public Test(); descriptor: ()V flags: ACC_PUBLIC Code: stack=1, locals=1, args_size=1 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return LineNumberTable: line 1: 0 public static void main(java.lang.String[]); descriptor: ([Ljava/lang/String;)V flags: ACC_PUBLIC, ACC_STATIC Code: stack=2, locals=4, args_size=1 0: ldc #2 // String a 2: astore_1 3: ldc #3 // String b 5: astore_2 6: new #4 // class java/lang/StringBuilder 9: dup 10: invokespecial #5 // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V 13: aload_1 14: invokevirtual #6 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 17: aload_2 18: invokevirtual #6 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 21: invokevirtual #7 // Method java/lang/StringBuilder.toString:()Ljava/lang/String; 24: astore_3 25: return LineNumberTable: line 4: 0 line 5: 3 line 6: 6 line 7: 25&#125;SourceFile: &quot;Test.java&quot; JDK 9+ï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯ JDK 17ï¼Œä½†å…¶å®ä» 9 å¼€å§‹å°±å˜äº†ï¼Œä¹‹å‰æœ‰è¯•è¿‡ï¼Œæœ€è¿‘æ•´ç†ç¬”è®°ï¼Œç”µè„‘ä¸Š JDK 9 å·²ç»æ²¡æœ‰äº† 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788Classfile /home/linweiyuan/Temp/test/Test.class Last modified Sep 24, 2022; size 759 bytes SHA-256 checksum 1f929ea79bba2fa30f55910a61ea7627d430b3dff13f7bdb8cd275e901a0343d Compiled from &quot;Test.java&quot;public class Test minor version: 0 major version: 61 flags: (0x0021) ACC_PUBLIC, ACC_SUPER this_class: #15 // Test super_class: #2 // java/lang/Object interfaces: 0, fields: 0, methods: 2, attributes: 3Constant pool: #1 = Methodref #2.#3 // java/lang/Object.&quot;&lt;init&gt;&quot;:()V #2 = Class #4 // java/lang/Object #3 = NameAndType #5:#6 // &quot;&lt;init&gt;&quot;:()V #4 = Utf8 java/lang/Object #5 = Utf8 &lt;init&gt; #6 = Utf8 ()V #7 = String #8 // a #8 = Utf8 a #9 = String #10 // b #10 = Utf8 b #11 = InvokeDynamic #0:#12 // #0:makeConcatWithConstants:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String; #12 = NameAndType #13:#14 // makeConcatWithConstants:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String; #13 = Utf8 makeConcatWithConstants #14 = Utf8 (Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String; #15 = Class #16 // Test #16 = Utf8 Test #17 = Utf8 Code #18 = Utf8 LineNumberTable #19 = Utf8 main #20 = Utf8 ([Ljava/lang/String;)V #21 = Utf8 SourceFile #22 = Utf8 Test.java #23 = Utf8 BootstrapMethods #24 = MethodHandle 6:#25 // REF_invokeStatic java/lang/invoke/StringConcatFactory.makeConcatWithConstants:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/invoke/CallSite; #25 = Methodref #26.#27 // java/lang/invoke/StringConcatFactory.makeConcatWithConstants:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/invoke/CallSite; #26 = Class #28 // java/lang/invoke/StringConcatFactory #27 = NameAndType #13:#29 // makeConcatWithConstants:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/invoke/CallSite; #28 = Utf8 java/lang/invoke/StringConcatFactory #29 = Utf8 (Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/invoke/CallSite; #30 = String #31 // \\u0001\\u0001 #31 = Utf8 \\u0001\\u0001 #32 = Utf8 InnerClasses #33 = Class #34 // java/lang/invoke/MethodHandles$Lookup #34 = Utf8 java/lang/invoke/MethodHandles$Lookup #35 = Class #36 // java/lang/invoke/MethodHandles #36 = Utf8 java/lang/invoke/MethodHandles #37 = Utf8 Lookup&#123; public Test(); descriptor: ()V flags: (0x0001) ACC_PUBLIC Code: stack=1, locals=1, args_size=1 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return LineNumberTable: line 1: 0 public static void main(java.lang.String[]); descriptor: ([Ljava/lang/String;)V flags: (0x0009) ACC_PUBLIC, ACC_STATIC Code: stack=2, locals=4, args_size=1 0: ldc #7 // String a 2: astore_1 3: ldc #9 // String b 5: astore_2 6: aload_1 7: aload_2 8: invokedynamic #11, 0 // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String; 13: astore_3 14: return LineNumberTable: line 4: 0 line 5: 3 line 6: 6 line 7: 14&#125;SourceFile: &quot;Test.java&quot;BootstrapMethods: 0: #24 REF_invokeStatic java/lang/invoke/StringConcatFactory.makeConcatWithConstants:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/invoke/CallSite; Method arguments: #30 \\u0001\\u0001InnerClasses: public static final #37= #33 of #35; // Lookup=class java/lang/invoke/MethodHandles$Lookup of class java/lang/invoke/MethodHandles å¾—å‡ºç»“è®º 1234567891011121314// JDK 1.8String s1 = &quot;a&quot;;String s2 = &quot;b&quot;;String s3 = s1 + s2; // new StringBuilder().append(&quot;a&quot;).append(&quot;b&quot;).toString();// JDK 1.9 -&gt; StringConcatFactory.makeConcatWithConstants()String s1 = &quot;a&quot;;String s2 = &quot;b&quot;;String s3 = &quot;ab&quot;;String s4 = s1 + s2; // StringConcatFactory.makeConcatWithConstants()String s5 = &quot;a&quot; + &quot;b&quot;; // ç¼–è¯‘æœŸä¼˜åŒ–System.out.println(s3 == s4); // falseï¼Œå› ä¸º s3 å­˜åœ¨ä¸²æ± ä¸­ï¼Œs4 æ˜¯ new å‡ºæ¥çš„å¯¹è±¡åœ¨å †ä¸­System.out.println(s3 == s5); // trueï¼Œå› ä¸º ab å·²ç»å­˜åœ¨ä¸²æ± ä¸­äº†ï¼ˆs3ï¼‰ï¼Œå¯¹äºç¡®å®šçš„å­—ç¬¦ä¸²ï¼ˆä¸æ˜¯å˜é‡ï¼‰ï¼ŒJava ä¼šè¿›è¡Œç¼–è¯‘æœŸä¼˜åŒ– StringTable ç‰¹æ€§ å¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²åªæ˜¯ç¬¦å·ï¼Œç¬¬ä¸€æ¬¡ç”¨åˆ°æ—¶æ‰å˜ä¸ºå¯¹è±¡ åˆ©ç”¨ä¸²æ± çš„æœºåˆ¶ï¼Œå¯ä»¥é¿å…é‡å¤åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ å­—ç¬¦ä¸²å¸¸é‡æ‹¼æ¥çš„åŸç†æ˜¯ç¼–è¯‘æœŸä¼˜åŒ– ç”¨ intern() å¯ä»¥ä¸»åŠ¨æŠŠä¸²æ± ä¸­è¿˜æ²¡æœ‰çš„å­—ç¬¦ä¸²å¯¹è±¡æ”¾å…¥ä¸²æ± ï¼ˆå°è¯•æ”¾å…¥ä¸²æ± ï¼Œæœ‰åˆ™ä¸ä¼šæ”¾å…¥ï¼Œæ²¡æœ‰åˆ™æ”¾å…¥ï¼Œæ— è®ºæ”¾å…¥æ˜¯å¦æˆåŠŸï¼Œè¿”å›çš„éƒ½æ˜¯ä¸²æ± ä¸­çš„å¯¹è±¡ï¼‰ è¿™é‡Œæœ‰ä¸€ä¸ªè¦æ³¨æ„çš„åœ°æ–¹ï¼ŒJDK 1.8 intern() å°†è‡ªå·±æ”¾å…¥ä¸²æ± ï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ï¼ŒJDK 1.6 æŠŠè‡ªå·±å¤åˆ¶ä¸€ä»½æ”¾è¿›ä¸²æ± ï¼ˆä¸¤ä¸ªå¯¹è±¡ï¼‰ 12345String s = new String(&quot;a&quot;) + new String(&quot;b&quot;); // æ­¤æ—¶ s åœ¨å †ä¸­String s2 = s.intern(); // s æ”¾å…¥äº†ä¸²æ± ï¼Œå¹¶ä¸”è¿”å›äº†ä¸²æ± ä¸­çš„å¯¹è±¡ abSystem.out.println(s2 == &quot;ab&quot;); // trueï¼Œå› ä¸º s2 å°±æ˜¯ä¸²æ± ä¸­è¿”å›çš„å¯¹è±¡ï¼Œå’Œä¸²æ± ä¸­çš„å¯¹è±¡ ab ç›¸æ¯”ï¼Œç›¸ç­‰System.out.println(s == &quot;ab&quot;); // true, å› ä¸ºä¸²æ± ä¸­è¿˜æ²¡æœ‰ï¼Œintern() æ”¾å…¥äº†åï¼Œs æ­¤æ—¶åœ¨ä¸²æ± ä¸­ 123456String x = &quot;ab&quot;; // ä¸²æ± ä¸­å·²ç»æœ‰äº† abString s = new String(&quot;a&quot;) + new String(&quot;b&quot;); // æ­¤æ—¶ s åœ¨å †ä¸­String s2 = s.intern(); // s æ”¾å…¥ä¸²æ± å¤±è´¥ï¼Œå› ä¸ºå·²ç»æœ‰äº†ï¼Œè¿”å›äº†ä¸²æ± ä¸­çš„å¯¹è±¡ ab ç»™ s2ï¼Œä½†æ˜¯ s è¿˜åœ¨å †ä¸­System.out.println(s2 == &quot;ab&quot;); // trueï¼Œå› ä¸º s2 å°±æ˜¯ä¸²æ± ä¸­è¿”å›çš„å¯¹è±¡ï¼Œå’Œä¸²æ± ä¸­çš„å¯¹è±¡ ab ç›¸æ¯”ï¼Œç›¸ç­‰System.out.println(s == &quot;ab&quot;); // false, å› ä¸ºä¸²æ± æ”¾å…¥å¤±è´¥ï¼Œsè¿˜åœ¨å †ä¸­ 123456String s = new String(&quot;a&quot;) + new String(&quot;b&quot;); // æ­¤æ—¶ s åœ¨å †ä¸­System.out.println(s == &quot;ab&quot;); // false, ab æ­¤æ—¶åœ¨ä¸²æ± ä¸­ï¼Œs åœ¨å †ä¸­String s2 = s.intern(); // s æ”¾å…¥ä¸²æ± å¤±è´¥ï¼Œå› ä¸ºå·²ç»æœ‰äº†ï¼Œè¿”å›äº†ä¸²æ± ä¸­çš„å¯¹è±¡ ab ç»™ s2ï¼Œä½†æ˜¯ s è¿˜åœ¨å †ä¸­System.out.println(s2 == &quot;ab&quot;); // trueï¼Œå› ä¸º s2 å°±æ˜¯ä¸²æ± ä¸­è¿”å›çš„å¯¹è±¡ï¼Œå’Œä¸²æ± ä¸­çš„å¯¹è±¡ ab ç›¸æ¯”ï¼Œç›¸ç­‰System.out.println(s == &quot;ab&quot;); // false, å› ä¸ºä¸²æ± æ”¾å…¥å¤±è´¥ï¼Œs è¿˜åœ¨å †ä¸­ StringTable ä½ç½® 1.6ï¼šå¸¸é‡æ± çš„ä¸€éƒ¨åˆ†ï¼Œä½äºæ°¸ä¹…ä»£ä¸­ï¼ˆæ°¸ä¹…ä»£ Full GC æ‰ä¼šè§¦å‘ï¼Œå­—ç¬¦ä¸²ç”¨çš„åœºæ™¯å¾ˆå¤šï¼Œä½†æ˜¯å¥½å¤šéƒ½æ˜¯å¯ä»¥å›æ”¶çš„ï¼Œå†…å­˜å ç”¨å¤ªå¤šä¼šé€ æˆæ°¸ä¹…ä»£å†…å­˜ä¸è¶³ï¼‰ï¼ˆPermGen spaceï¼‰ 1.8ï¼šå †ä¸­çš„ä¸€éƒ¨åˆ†ï¼ˆå † Minor GC å°±ä¼šè§¦å‘ï¼‰ï¼ˆHeap spaceï¼‰ -XX:-UseFCOverheadLimitï¼ˆ+å¯ç”¨ï¼Œ-ç¦ç”¨ï¼Œé»˜è®¤å¯ç”¨ï¼‰ï¼šå¦‚æœ 98%çš„æ—¶é—´èŠ±åœ¨äº†åƒåœ¾å›æ”¶ä¸Šï¼Œä½†æ˜¯åªæœ‰ 2% çš„å †å†…å­˜å›æ”¶äº†ï¼Œæ­¤æ—¶ JVM ç›´æ¥æŠ›å‡º OutOfMemoryErrorï¼šGC overhead limit exceeded StringTable æ€§èƒ½è°ƒä¼˜StringTable æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå“ˆå¸Œè¡¨æ€§èƒ½ä¸æ¡¶çš„ä¸ªæ•°æœ‰å…³ æ¡¶ä¸ªæ•°å¤ªå¤§ï¼Œå…ƒç´ åˆ†æ•£ï¼Œå“ˆå¸Œç¢°æ’æœºç‡å‡å°‘ï¼Œæ£€ç´¢é€Ÿåº¦è¾ƒå¿« æ¡¶ä¸ªæ•°å¤ªå°ï¼Œå“ˆå¸Œç¢°æ’æœºç‡å¢åŠ ï¼Œé“¾è¡¨å°±ä¼šå˜é•¿ï¼ŒæŸ¥æ‰¾é€Ÿåº¦å°±ä¼šé™ä½ å¯ä»¥é€šè¿‡ JVM å‚æ•°è°ƒæ•´æ¡¶çš„ä¸ªæ•°ï¼Œ-XX:StringTableSize&#x3D;12345ï¼ˆæœ€å°å€¼ 1009ï¼‰ åƒåœ¾å›æ”¶æœ€å¿«çš„ GC æ˜¯ä¸å‘ç”Ÿ GC å¦‚ä½•åˆ¤æ–­å¯¹è±¡æ˜¯å¦èƒ½å›æ”¶ å¼•ç”¨è®¡æ•°æ³•ï¼ˆæœ‰å¾ªç¯å¼•ç”¨é—®é¢˜ï¼ŒA å¼•ç”¨ Bï¼ŒB å¼•ç”¨ Aï¼Œéƒ½ä¸ä¼šè¢«å›æ”¶ï¼ŒJVM ä¸æ˜¯è¿™ç§ï¼‰ å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆJVM é‡‡ç”¨è¿™ç§ï¼ŒGC Rootsï¼‰ å“ªç§å¯ä½œä¸º Rootsï¼Ÿ(å¯ä»¥ç”¨ Eclipse Memory Analyzer æŸ¥çœ‹ï¼Œjps -&gt; jmap -dump:format&#x3D;b,live,file&#x3D;m.bin pid) System Classï¼ˆæ ¸å¿ƒçš„ç±»ï¼ŒObject, HashMap, String ç­‰ï¼‰ Native Stackï¼ˆæ“ä½œç³»ç»Ÿæ–¹æ³•æ‰§è¡Œæ—¶å¼•ç”¨çš„ Java å¯¹è±¡ï¼‰ Threadï¼ˆæ´»åŠ¨çº¿ç¨‹ï¼‰ Busy Monitorï¼ˆè¢«åŠ é”çš„å¯¹è±¡ï¼Œå›æ”¶äº†ï¼Œå°±æ— æ³•è§£é”ï¼‰ å››ç§å¼•ç”¨ å¼ºå¼•ç”¨ï¼ˆnewï¼Œèµ‹å€¼ï¼Œæ²¿ç€ GC Roots èƒ½æ‰¾åˆ°ï¼Œå°±ä¸ä¼šè¢«å›æ”¶ï¼‰ è½¯å¼•ç”¨ï¼ˆæ²¡æœ‰å¼ºå¼•ç”¨æ—¶ï¼Œå‘ç”Ÿåƒåœ¾å›æ”¶ï¼Œå¦‚æœå†…å­˜ä¸è¶³ï¼Œå†æ‰§è¡Œä¸€æ¬¡ï¼Œè¢«å›æ”¶ï¼Œå¯é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨é‡Šæ”¾è‡ªèº«ï¼‰ SoftReference ReferenceQueue, new SoftReference(obj, queue) å½“ obj è¢«å›æ”¶æ—¶ï¼Œè¿›å…¥é˜Ÿåˆ— queue.poll() è·å–è‡ªèº«ï¼Œéå† remove() å¼±å¼•ç”¨ï¼ˆæ²¡æœ‰å¼ºå¼•ç”¨æ—¶ï¼Œåªè¦å‘ç”Ÿäº†åƒåœ¾å›æ”¶ï¼Œè¢«å›æ”¶ï¼Œå¯é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨é‡Šæ”¾è‡ªèº«ï¼‰ WeakReference è™šå¼•ç”¨ï¼ˆå¿…é¡»é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ï¼Œç”¨äº NIO ä¸­ï¼Œç”± Reference Handler å¤„ç†ï¼‰ PhantomReference ç»ˆç»“å™¨å¼•ç”¨ï¼ˆå¿…é¡»é…åˆå¼•ç”¨é˜Ÿåˆ—ä½¿ç”¨ï¼Œfinalize() åè¿›å…¥é˜Ÿåˆ—ï¼Œç”± Finalizer å¤„ç†ï¼‰ åƒåœ¾å›æ”¶ç®—æ³• æ ‡è®°æ¸…é™¤ï¼šé€Ÿåº¦è¾ƒå¿«ï¼Œå®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼ˆç©ºé—´ä¸è¿ç»­ï¼Œæ•°ç»„æ”¾ä¸ä¸‹ï¼‰ æ ‡è®°æ•´ç†ï¼šé€Ÿåº¦è¾ƒæ…¢ï¼Œæ²¡æœ‰å†…å­˜ç¢ç‰‡ï¼Œæ ‡è®° -&gt; æ¸…é™¤ -&gt; æ•´ç†ï¼ˆä¼šç§»åŠ¨å¯¹è±¡ï¼Œå› æ­¤å¯¹è±¡çš„å¼•ç”¨åœ°å€ä¼šå˜ï¼Œéœ€è¦åšé¢å¤–çš„å·¥ä½œæ¥æ›´æ–°ï¼‰ å¤åˆ¶ï¼šæ²¡æœ‰å†…å­˜ç¢ç‰‡ï¼Œéœ€è¦å ç”¨åŒå€å†…å­˜ç©ºé—´ï¼Œå°†å†…å­˜åˆ†æˆå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼ˆfrom, toï¼‰å‘ç”Ÿåƒåœ¾å›æ”¶æ—¶ï¼Œäº¤æ¢ä½ç½® åˆ†ä»£åƒåœ¾å›æ”¶æ–°ç”Ÿä»£ï¼ˆæœç”Ÿå¤•æ­»ï¼‰ï¼š eden from to åƒåœ¾å›æ”¶è¿‡ç¨‹ï¼ˆGC éƒ½ä¼š Stop The Worldï¼Œæ—¶é—´ä¸Šæ–°ç”Ÿä»£çŸ­ä¸€ç‚¹ï¼Œè€å¹´ä»£é•¿ä¸€ç‚¹ï¼Œæš‚åœå…¶ä»–ç”¨æˆ·çº¿ç¨‹ï¼Œè®©åƒåœ¾å›æ”¶çº¿ç¨‹å…ˆæ‰§è¡Œå®Œï¼‰ æ–°å¯¹è±¡é»˜è®¤å­˜æ”¾åœ¨ eden å½“ç©ºé—´ä¸è¶³æ—¶ï¼Œè§¦å‘ Minor GC æ ‡è®°-æ¸…é™¤-å¤åˆ¶ï¼ŒæŠŠå­˜æ´»çš„å¤åˆ¶åˆ° toï¼ˆæ³¨æ„ä¸æ˜¯åˆ° fromï¼‰ï¼Œå¯¿å‘½åŠ  1 äº¤æ¢ from to ä½ç½®ï¼ˆè°æ˜¯ç©ºçš„è°å°±æ˜¯ toï¼‰ ç»§ç»­æ”¾å¯¹è±¡ â€¦ eden å­˜æ´»çš„å¤åˆ¶åˆ° toï¼Œå¯¿å‘½åŠ  1 åŸæ¥åœ¨ from çš„ç§»åˆ°å­˜æ´»åç§»åˆ° to,å¯¿å‘½åŠ  1 äº¤æ¢ from to ä½ç½® â€¦ å¯¿å‘½è¶…è¿‡é˜ˆå€¼ï¼ˆ15ï¼Œä¿å­˜åœ¨å¯¹è±¡å¤´ï¼Œ4bitï¼Œæœ€é«˜ 1111 -&gt; 15ï¼‰ï¼Œæ™‹å‡åˆ°è€å¹´ä»£ å¦‚æœè€å¹´ä»£ä¹Ÿæ”¾ä¸ä¸‹ï¼Œå…ˆå°è¯• Minor GC, å†…å­˜è¿˜ä¸å¤Ÿï¼Œè§¦å‘ Full GCï¼Œå†ä¸å¤Ÿï¼ŒæŠ›å‡º OOM å¤§å¯¹è±¡åœ¨æ–°ç”Ÿä»£ç©ºé—´ä¸å¤Ÿï¼Œä½†è€å¹´ä»£ç©ºé—´å¤Ÿçš„æƒ…å†µä¸‹ï¼Œç›´æ¥æ™‹å‡ ç›¸å…³ JVM å‚æ•° å‚æ•° å«ä¹‰ -Xms åˆå§‹å †å¤§å° -Xmx &#x2F; -XX:MaxHeapSize&#x3D;size å †æœ€å¤§å¤§å° -Xmn &#x2F; -XX:NewSize&#x3D;size, -XX:MaxNewSize&#x3D;size æ–°ç”Ÿä»£å¤§å° -XX:InitialSurvivorRatio&#x3D;ratio, -XX:+UseAdaptiveSizePolicy å¹¸å­˜åŒºæ¯”ä¾‹ï¼ˆåŠ¨æ€ï¼‰ -XX:SurvivorRatio&#x3D;ratio å¹¸å­˜åŒºæ¯”ä¾‹ -XX:MaxTenuringThreshold&#x3D;threshold æ™‹å‡é˜ˆå€¼ -XX:+PrintTenuringDistribution æ™‹å‡è¯¦æƒ… -XX:+PrintGCDetails -verbose:gc GC è¯¦æƒ… -XX:+ScavengeBeforeFullGC Full GC å‰ Minor GC çº¿ç¨‹å†…çš„ OOM ä¸ä¼šå¯¼è‡´æ•´ä¸ª JVM æŒ‚æ‰ åƒåœ¾å›æ”¶å™¨ ä¸²è¡Œ å•çº¿ç¨‹ é€‚åˆå †å†…å­˜è¾ƒå°ï¼Œä¸ªäººç”µè„‘ï¼ŒCPU ä¸ªæ•°å°‘ï¼ˆå› ä¸ºæ˜¯å•çº¿ç¨‹ï¼‰ -XX:+UseSerialGC&#x3D;Serial+SerialOld ååé‡ä¼˜å…ˆï¼ˆ1.8 é»˜è®¤ï¼‰ å¤šçº¿ç¨‹ é€‚åˆå †å†…å­˜è¾ƒå¤§ï¼Œå¤šæ ¸ CPU è®©å•ä½æ—¶é—´å†…ï¼ŒSTW çš„æ—¶é—´æœ€çŸ­ -XX:+UseParallelGC -XX:+UseParallelOldGC -XX:+UseAdaptiveSizePolicy -XX:GCTimeRatio&#x3D;99 (1 &#x2F; 1 + ratio, é»˜è®¤ 99ï¼Œ0.01ï¼Œ100 åˆ†é’Ÿå†…åªèƒ½ä¸€åˆ†é’Ÿç”¨äºåƒåœ¾å›æ”¶ï¼Œå› ä¸ºä¸Šä¸€è¡Œé…ç½®äº†åŠ¨æ€è°ƒæ•´ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šè‡ªåŠ¨å¢åŠ å †çš„å¤§å°ï¼Œå¤§å°å¢åŠ äº†ï¼Œå°±èƒ½æ”¾æ›´å¤šçš„ä¸œè¥¿ï¼Œåƒåœ¾å›æ”¶çš„æ¬¡æ•°å°±ä¼šé™ä½ï¼Œååé‡å°±ä¼šæé«˜ï¼Œä¸€èˆ¬è®¾ç½® 19) -XX:MaxGCPauseMillis&#x3D;200ï¼ˆæ¯«ç§’ï¼Œå’Œä¸Šé¢çš„é…ç½®å†²çªï¼Œåªèƒ½å–æŠ˜ä¸­ï¼Œå› ä¸ºå †å¢å¤§äº†ï¼Œè™½ç„¶ GC æ¬¡æ•°å‡å°‘ï¼Œä½†å•æ¬¡çš„æ—¶é—´ä¼šå¢åŠ ï¼‰ -XX:ParallelGCThreads&#x3D;n å“åº”æ—¶é—´ä¼˜å…ˆ å¤šçº¿ç¨‹ é€‚åˆå †å†…å­˜è¾ƒå¤§ï¼Œå¤šæ ¸ CPU å°½å¯èƒ½è®©å•æ¬¡ STW çš„æ—¶é—´æœ€çŸ­ -XX:+UseConcMarkSweepGC -XX:+UseParNewGC SerialOld -XX:ParallelGCThreads&#x3D;n -XX:ConcGCThreads&#x3D;n -XX:CMSInitiatingOccupancyFraction&#x3D;percent -XX:+CMSScavengeBeforeRemark å¦‚ä½•åŒºåˆ†ååé‡ä¼˜å…ˆå’Œå“åº”æ—¶é—´ä¼˜å…ˆï¼Ÿ ååé‡ä¼˜å…ˆï¼šæ¯”å¦‚ï¼Œæ¯æ¬¡èŠ±è´¹ 0.2 ç§’ï¼Œä¸€å°æ—¶ä¸¤æ¬¡ï¼Œå…± 0.4 ç§’ï¼Œåƒåœ¾å›æ”¶æ—¶é—´å æ¯”è¶Šä½ï¼Œååé‡è¶Šé«˜ å“åº”æ—¶é—´ä¼˜å…ˆï¼šæ¯”å¦‚ï¼Œæ¯æ¬¡åªéœ€ 0.1 ç§’ï¼Œä½†å¯èƒ½ä¸€å°æ—¶å‘ç”Ÿäº† 5 æ¬¡ï¼Œå…± 0.5 ç§’ G1ï¼ˆGarbage Firstï¼ŒJDK 9 é»˜è®¤ï¼ŒåºŸå¼ƒ CMSï¼‰ åŒæ—¶æ³¨é‡ååé‡å’Œä½å»¶è¿Ÿï¼Œé»˜è®¤çš„æš‚åœç›®æ ‡æ˜¯ 200ms è¶…å¤§å †å†…å­˜ï¼Œå°†å †åˆ’åˆ†æˆå¤šä¸ªå¤§å°ç›¸ç­‰çš„ Region æ•´ä½“ä¸Šæ˜¯æ ‡è®°-æ•´ç†ï¼Œä¸¤ä¸ªåŒºåŸŸä¹‹é—´æ˜¯å¤åˆ¶ -XX:+UseG1GZ -XX:G1HeapRegionSize&#x3D;size -XX:MaxGCPauseMillis&#x3D;ms","categories":[{"name":"JVM","slug":"JVM","permalink":"https://linweiyuan.github.io/categories/JVM/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"JVM","slug":"JVM","permalink":"https://linweiyuan.github.io/tags/JVM/"}]},{"title":"Springç›¸å…³çŸ¥è¯†ç‚¹","slug":"Springç›¸å…³çŸ¥è¯†ç‚¹","date":"2021-07-04T13:25:16.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2021/07/04/Springç›¸å…³çŸ¥è¯†ç‚¹.html","link":"","permalink":"https://linweiyuan.github.io/2021/07/04/Spring%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9.html","excerpt":"","text":"ç»„æˆ aop beans context core jdbc test web ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºå››ä¸ªé˜¶æ®µ å®ä¾‹åŒ– å±æ€§èµ‹å€¼ åˆå§‹åŒ– é”€æ¯ 123456789doCreateBean() &#123; // InstantiationAwareBeanPostProcessor.postProcessBeforeInstantiation createBeanInstance() // å®ä¾‹åŒ– // InstantiationAwareBeanPostProcessor.postProcessAfterInstantiation populateBean() // å±æ€§èµ‹å€¼ // BeanPostProcessor.postProcessBeforeInitialization initializeBean() // åˆå§‹åŒ– // BeanPostProcessor.postProcessAfterInitialization&#125; Aware éƒ½æ˜¯åœ¨åˆå§‹åŒ–é˜¶æ®µä¹‹å‰è°ƒç”¨çš„ è®¾è®¡æ¨¡å¼ å•ä¾‹ï¼šBean é»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼ å·¥å‚ï¼šBeanFactory å°±æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„ä½“ç°ï¼Œç”¨æ¥åˆ›å»ºå¯¹è±¡çš„å®ä¾‹ ä»£ç†ï¼šSpring çš„ AOP åŠŸèƒ½ç”¨åˆ°äº† JDK çš„åŠ¨æ€ä»£ç†å’Œ CGLIB çš„å­—èŠ‚ç ç”ŸæˆæŠ€æœ¯ æ¨¡æ¿æ–¹æ³•ï¼šç”¨æ¥è§£å†³ä»£ç é‡å¤çš„é—®é¢˜ï¼Œæ¯”å¦‚ RestTemplateï¼ŒJpaTemplate è§‚å¯Ÿè€…ï¼šå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥è¢«å¼ºåˆ¶æ›´æ–°ï¼Œæ¯”å¦‚ ApplicationListener äº‹åŠ¡ä¼ æ’­è¡Œä¸ºæŒ‡çš„æ˜¯å½“å¤šä¸ªäº‹åŠ¡åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼ŒSpring å¦‚ä½•å¤„ç†è¿™äº›äº‹åŠ¡çš„è¡Œä¸º propagationï¼š requiredï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œæœ€å¸¸ç”¨ requires_newï¼šæ— è®ºå½“å‰å­˜ä¸å­˜åœ¨äº‹åŠ¡ï¼Œéƒ½åˆ›å»ºæ–°äº‹åŠ¡ supportsï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ‰§è¡Œ not_supportedï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ· neverï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ nestedï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æŒ‰ required å±æ€§æ‰§è¡Œ mandatoryï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥ï¼Œä¸å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸ éš”ç¦»çº§åˆ« isolation_default isolation_read_uncommitted isolation_read_committed isolation_repeatable_read isolation_serializable Bean çš„ä½œç”¨åŸŸ singletonï¼šbean åœ¨æ¯ä¸ª Spring IoC å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ prototypeï¼šä¸€ä¸ª bean çš„å®šä¹‰å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ requestï¼šæ¯æ¬¡ http è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ª beanï¼Œè¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäº web çš„ Spring ApplicationContext æƒ…å½¢ä¸‹æœ‰æ•ˆ sessionï¼šåœ¨ä¸€ä¸ª http session ä¸­ï¼Œä¸€ä¸ª bean å®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ï¼Œè¯¥ä½œç”¨åŸŸä»…åœ¨åŸºäº web çš„ Spring ApplicationContext æƒ…å½¢ä¸‹æœ‰æ•ˆ global-sessionï¼šåœ¨ä¸€ä¸ªå…¨å±€çš„ http session ä¸­ï¼Œä¸€ä¸ª bean å®šä¹‰å¯¹åº”ä¸€ä¸ªå®ä¾‹ï¼Œè¯¥ä½œç”¨åŸŸä»…åœ¨åŸº web çš„ Spring ApplicationContext æƒ…å½¢ä¸‹æœ‰æ•ˆ é»˜è®¤æ˜¯ singletonï¼Œä½¿ç”¨ prototype ä½œç”¨åŸŸéœ€è¦æ…é‡çš„è€ƒè™‘ï¼Œå› ä¸ºé¢‘ç¹åˆ›å»ºå’Œé”€æ¯ bean ä¼šå¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½å¼€é”€ å•ä¾‹ bean æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ä¸æ˜¯ï¼ŒSpring æ¡†æ¶ä¸­çš„å•ä¾‹ bean ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ Spring ä¸­çš„ bean é»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼ŒSpring æ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹ bean è¿›è¡Œå¤šçº¿ç¨‹çš„å°è£…å¤„ç† å®é™…ä¸Šå¤§éƒ¨åˆ†æ—¶å€™ Spring bean æ˜¯æ— çŠ¶æ€çš„ï¼ˆæ¯”å¦‚ daoï¼‰ï¼Œæ‰€ä»¥æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ bean ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œä½†å¦‚æœ bean æœ‰çŠ¶æ€çš„è¯ï¼ˆæ¯”å¦‚ view mode å¯¹è±¡ï¼‰ï¼Œé‚£å°±è¦å¼€å‘è€…è‡ªå·±å»ä¿è¯çº¿ç¨‹å®‰å…¨äº†ï¼Œæœ€ç®€å•çš„å°±æ˜¯æ”¹å˜ bean çš„ä½œç”¨åŸŸï¼ŒæŠŠ singleton æ”¹æˆ prototype è¿™æ ·è¯·æ±‚ bean ç›¸å½“äº new beanï¼Œå°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ æœ‰çŠ¶æ€å°±æ˜¯æœ‰æ•°æ®å­˜å‚¨åŠŸèƒ½ æ— çŠ¶æ€å°±æ˜¯ä¸ä¼šä¿å­˜æ•°æ® é‚£ Spring å¦‚ä½•å¤„ç†çº¿ç¨‹å¹¶å‘é—®é¢˜çš„ï¼Ÿ åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªæœ‰æ— çŠ¶æ€çš„ bean æ‰å¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å…±äº«ï¼Œåœ¨ Spring ä¸­ï¼Œç»å¤§éƒ¨åˆ† bean éƒ½å¯ä»¥å£°æ˜ä¸º singleton ä½œç”¨åŸŸï¼Œå› ä¸º Spring å¯¹ä¸€äº› bean ä¸­éçº¿ç¨‹å®‰å…¨çŠ¶æ€é‡‡ç”¨ ThreadLocal è¿›è¡Œå¤„ç†ï¼Œè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ ThreadLocal å’Œçº¿ç¨‹åŒæ­¥æœºåˆ¶éƒ½æ˜¯ä¸ºäº†è§£å†³å¤šçº¿ç¨‹ä¸­ç›¸åŒå˜é‡çš„è®¿é—®å†²çªé—®é¢˜ï¼ŒåŒæ­¥æœºåˆ¶é‡‡ç”¨äº†æ—¶é—´æ¢ç©ºé—´çš„æ–¹æ³•ï¼Œä»…æä¾›ä¸€ä»½å˜é‡ï¼Œä¸åŒçš„çº¿ç¨‹åœ¨è®¿é—®å‰éœ€è¦å…ˆè·å¾—é”ï¼Œæ²¡è·å¾—é”çš„çº¿ç¨‹åˆ™éœ€è¦æ’é˜Ÿ è€Œ ThreadLocal é‡‡ç”¨äº†ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼ï¼ŒThreadLocal ä¼šä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹æä¾›ä¸€ä¸ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œéš”ç¦»äº†å¤šä¸ªçº¿ç¨‹å¯¹æ•°æ®çš„è®¿é—®å†²çªï¼Œå› ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œä»è€Œä¹Ÿå°±æ²¡æœ‰å¿…è¦å¯¹è¯¥å˜é‡è¿›è¡ŒåŒæ­¥äº†ï¼ŒThreadLocal æä¾›äº†çº¿ç¨‹å®‰å…¨çš„å…±äº«å¯¹è±¡ï¼Œåœ¨ç¼–å†™å¤šçº¿ç¨‹ä»£ç æ—¶ï¼Œå¯ä»¥æŠŠä¸å®‰å…¨çš„å˜é‡å°è£…è¿› ThreadLocal å¸¸ç”¨æ³¨è§£ @Componentï¼šå°† Java ç±»æ ‡è®°ä¸º beanï¼Œæ˜¯ä»»ä½• Spring ç®¡ç†ç»„ä»¶çš„é€šç”¨å‹ï¼ŒSpring çš„ç»„ä»¶æ‰«ææœºåˆ¶æ‰«æå¹¶ç”¨ IoC å®¹å™¨è¿›è¡Œç®¡ç† @Controllerï¼šå°†ç±»æ ‡è®°ä¸º Spring Web MVC æ§åˆ¶å™¨ï¼Œä¼šè‡ªåŠ¨å¯¼å…¥åˆ° IoC å®¹å™¨ä¸­ @Serviceï¼šåŸºæœ¬å’Œ @Component ä¸€æ ·ï¼Œåªæ˜¯ç”¨åœ¨ service å±‚çš„è¯ï¼Œä¼šæ›´å¥½åœ°è§åçŸ¥æ„ @Repositoryï¼šé™¤äº†å…·æœ‰ @Component çš„ä½œç”¨å¤–ï¼Œè¿˜å…·æœ‰é¢å¤–çš„ä½œç”¨ï¼Œå¯ä»¥å°†æœªç»æ£€æŸ¥çš„å¼‚å¸¸è½¬æ¢ä¸º Spring DataAccessException @Autowired å’Œ @Resource çš„åŒºåˆ« å®˜æ–¹æ ‡å‡† @Resourceï¼šJSR250ï¼ŒæŒ‰åç§°æˆ–ç±»å‹æ³¨å…¥ï¼Œä¸æ”¯æŒ @Primary @Injectï¼šJSR330ï¼Œé»˜è®¤æŒ‰ç±»å‹æ³¨å…¥ï¼Œé…åˆ @Qualifier å¯å®ç°æŒ‰åç§°æ³¨å…¥ï¼Œé…åˆ@Primary å¯é€‰æ‹©ä¼˜å…ˆæ³¨å…¥ @Autowiredï¼šSpring è‡ªå·±çš„å®ç°ï¼Œé»˜è®¤æŒ‰ç±»å‹æ³¨å…¥ï¼Œé…åˆ @Qualifier å¯å®ç°æŒ‰åç§°æ³¨å…¥ï¼Œé…åˆ @Primary å¯é€‰æ‹©ä¼˜å…ˆæ³¨å…¥ äº‹åŠ¡éš”ç¦»çº§åˆ«é™¤äº† MySQL å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«å¤–ï¼Œå¤šäº†ä¸ªé»˜è®¤ï¼Œå°±æ˜¯æ•°æ®åº“æ˜¯ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆ isolation_default isolation_read_uncommitted isolation_read_committed isolation_repeatable_read isolation_serializable IoC å®¹å™¨IoC å°±æ˜¯æ§åˆ¶åè½¬ï¼Œå®ƒæŠŠä¼ ç»Ÿçš„æœ‰ç¨‹åºä»£ç ç›´æ¥ new çš„å¯¹è±¡çš„è°ƒç”¨æƒäº¤ç»™ Spring å®¹å™¨ï¼Œé€šè¿‡å®¹å™¨æ¥å®ç°å¯¹è±¡ç»„ä»¶çš„è£…é…å’Œç®¡ç†ï¼Œæ‰€è°“çš„æ§åˆ¶åè½¬å°±æ˜¯å¯¹ç»„ä»¶å¯¹è±¡æ§åˆ¶æƒçš„è½¬ç§»ï¼Œä»ç¨‹åºä»£ç æœ¬èº«è½¬ç§»åˆ°äº†å¤–éƒ¨å®¹å™¨ Spring IoC è´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œç®¡ç†å¯¹è±¡ï¼Œè£…é…å¯¹è±¡ï¼Œé…ç½®å¯¹è±¡ï¼Œå¹¶ä¸”ç®¡ç†è¿™äº›å¯¹è±¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ IoC æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ ç®¡ç†å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„ç»´æŠ¤ï¼Œå¯¹è±¡çš„åˆ›å»ºå¹¶ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹ï¼Œåœ¨å¯¹è±¡ç®¡ç†æ¯”è¾ƒå¤æ‚æ—¶ï¼Œå¦‚æœä¾èµ–å…³ç³»éœ€è¦ç¨‹åºä»£ç æ¥ç»´æŠ¤ï¼Œæ¯”è¾ƒç—›è‹¦ è§£è€¦ï¼Œç”±å®¹å™¨å»ç»´æŠ¤å…·ä½“çš„å¯¹è±¡ æ‰˜ç®¡äº†ç±»çš„äº§ç”Ÿè¿‡ç¨‹ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨ç±»çš„äº§ç”Ÿè¿‡ç¨‹ä¸­åšä¸€äº›å¤„ç†ï¼Œæœ€ç›´æ¥çš„ä¾‹å­å°±æ˜¯ä»£ç†ï¼Œå¦‚æœæœ‰å®¹å™¨ç¨‹åºå¯ä»¥æŠŠè¿™éƒ¨åˆ†å¤„ç†äº¤ç»™å®¹å™¨ï¼Œåº”ç”¨ç¨‹åºåˆ™æ— éœ€å»å…³å¿ƒç±»æ˜¯å¦‚ä½•å®Œæˆä»£ç†çš„ å¾ªç¯ä¾èµ–A æœ‰ Bï¼ŒB æœ‰ ABean çš„åˆ›å»ºè¿‡ç¨‹ï¼š è·å– bean å®šä¹‰ é€šè¿‡åå°„åˆ›å»ºåŸå§‹å¯¹è±¡ å¡«å……å±æ€§ï¼ˆè¿™ä¸€æ­¥å°±æ˜¯ä¾èµ–æ³¨å…¥ï¼‰ å®Œæˆå¯¹è±¡çš„åˆ›å»ºæ”¾åˆ°ä¸€çº§ç¼“å­˜ A åˆ›å»ºçš„æ—¶å€™ï¼Œé€šè¿‡ bean çš„å®šä¹‰åˆ›å»ºäº†ä¸€ä¸ªåŸå§‹å¯¹è±¡ï¼Œç„¶åå°† lambda è¡¨è¾¾å¼æ”¾åˆ°ä¸‰çº§ç¼“å­˜ä¸­ï¼Œæ¥ç€è¿›è¡Œå±æ€§çš„å¡«å……ï¼Œå¡«å……çš„æ—¶å€™å‘ç° B è¿˜æ²¡æœ‰ï¼Œäºæ˜¯æŒ‰ç…§åŒæ ·çš„æ–¹å¼æ¥åˆ›å»º Bï¼Œç­‰åˆ° B è¿›è¡Œå±æ€§æ³¨å…¥çš„æ—¶å€™ï¼Œåˆ†åˆ«ä»ä¸€çº§ï¼ŒäºŒçº§ï¼Œä¸‰çº§ç¼“å­˜é‡Œé¢æ‰¾ Aï¼Œæœ€ååœ¨ä¸‰çº§ç¼“å­˜é‡Œé¢æ‰¾åˆ°ï¼Œäºæ˜¯å°† A æ”¾åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼Œå¹¶ä»ä¸‰çº§ç¼“å­˜ä¸­åˆ é™¤ Aï¼Œæ­¤æ—¶çš„ A æ˜¯ä¸€ä¸ªå¯¹è±¡å¹¶æœªå®Œæˆåˆå§‹åŒ–å¥½çš„å¯¹è±¡ï¼Œä½†æ˜¯å·²ç»åˆ›å»ºå‡ºæ¥äº†ï¼Œé‚£ä¹ˆ B å±æ€§æ³¨å…¥æˆåŠŸï¼Œå°±æ”¾åˆ°ä¸€çº§ç¼“å­˜ä¸­ï¼Œæ¥ç€å›åˆ° A çš„å±æ€§æ³¨å…¥ï¼Œæ³¨å…¥å®Œæˆ B åï¼ŒA ä¹Ÿå®Œæˆäº†åˆ›å»ºï¼Œå°±æ”¾åˆ°ä¸€çº§ç¼“å­˜ä¸­ï¼Œå¹¶ä»äºŒçº§ç¼“å­˜ä¸­åˆ æ‰ A ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜æ¥è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ å¦‚æœæ˜¯æ™®é€šçš„å¯¹è±¡ï¼Œç”¨ä¸€çº§ç¼“å­˜å°±å¯ä»¥ï¼Œä½†æ˜¯ Spring çš„å¯¹è±¡å¾ˆå¤šéƒ½æ˜¯åŠ¨æ€ä»£ç†å¢å¼ºçš„ï¼Œä¸‰çº§ç¼“å­˜é‡Œå­˜çš„æ˜¯ä¸€ä¸ª lambda è¡¨è¾¾å¼ï¼Œæ ¹æ®å¯¹è±¡æ˜¯å¦æœ‰åŠ¨æ€ä»£ç†çš„éœ€æ±‚ï¼Œè¿›è¡ŒåŒ…è£…è¿”å›ï¼Œè¿™æ—¶çš„å¯¹è±¡æ˜¯æœªå®Œæˆåˆå§‹åŒ–çš„ï¼Œå¦‚æœä¸æ”¾åˆ°äºŒçº§ç¼“å­˜ç›´æ¥æ”¾åˆ°ä¸€çº§ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜é‡Œä¼šå‡ºç°æ—¢æœ‰åˆå§‹åŒ–å®Œæˆçš„ beanï¼Œåˆæœ‰æœªåˆå§‹åŒ–å®Œæˆçš„ï¼Œç®¡ç†èµ·æ¥å°±å¯èƒ½ä¼šå‡ºç°ä¸å¯é¢„çŸ¥çš„é”™è¯¯ï¼Œä¹Ÿä¸ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚åœ¨ç¼“å­˜ bean çš„è¿‡ç¨‹ä¸­ï¼Œä¸‰ä¸ªçº§åˆ«çš„ç¼“å­˜éƒ½æ˜¯äº’æ–¥çš„ï¼Œæœ€ç»ˆéƒ½ä¼šåªä¿ç•™ä¸€ä»½å®Œæˆåˆå§‹åŒ–çš„ beanï¼Œæ”¾åˆ°ä¸€çº§ç¼“å­˜é‡Œ SpringMVC å·¥ä½œæµç¨‹ ç”¨æˆ·å‘é€è¯·æ±‚åˆ°å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet DispatcherServlet æ”¶åˆ°è¯·æ±‚åï¼Œè°ƒç”¨ HandlerMapping å¤„ç†å™¨æ˜ å°„å™¨è¯·æ±‚è·å– Handler HandlerMapping æ ¹æ®è¯·æ±‚ url æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨ï¼Œè¿”å›ç»™ DispatcherServlet DispatcherServlet è°ƒç”¨ HandlerAdapter å¤„ç†å™¨é€‚é…å™¨ HandlerAdapter ç»è¿‡é€‚é…è°ƒç”¨å…·ä½“å¤„ç†å™¨ Handlerï¼Œä¹Ÿå«åç«¯æ§åˆ¶å™¨ Handler æ‰§è¡Œå®Œæˆï¼Œè¿”å› ModelAndView HandlerAdapter å°† Handler æ‰§è¡Œç»“æ„ ModelAndView è¿”å›ç»™ DispatcherServlet DispatcherServlet å°† ModelAndView ä¼ ç»™ ViewResolver è§†å›¾è§£æå™¨è¿›è¡Œè§£æ ViewResolver è§£æåè¿”å›å…·ä½“ View DispatcherServlet å¯¹ View è¿›è¡Œæ¸²æŸ“è§†å›¾ï¼Œå³å°†æ¨¡å‹æ•°æ®å¡«å……è‡³è§†å›¾ä¸­ DispatcherServlet å“åº”ç”¨æˆ· è§£å†³è·¨åŸŸè·¨åŸŸå¯ä»¥åœ¨å‰ç«¯é€šè¿‡ JSONP æ¥è§£å†³ï¼Œä½†æ˜¯ JSNOP åªå¯ä»¥å‘é€ GET è¯·æ±‚ï¼Œåœ¨ RESTful é£æ ¼çš„åº”ç”¨ä¸­ï¼Œå°±æ˜¾å¾—éå¸¸é¸¡è‚‹ï¼Œå› æ­¤æ¨èåœ¨åç«¯é€šè¿‡ CORS Cross-Origin Resource Sharing æ¥è§£å†³è·¨åŸŸé—®é¢˜ï¼ŒSpring Boot ä¸­å¯ä»¥é€šè¿‡å®ç° WebMvcConfigurer æ¥å£ï¼Œç„¶åé‡å†™ addCordMappings æ–¹æ³•æ¥è§£å†³è·¨åŸŸé—®é¢˜","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://linweiyuan.github.io/tags/Spring-Boot/"},{"name":"Spring","slug":"Spring","permalink":"https://linweiyuan.github.io/tags/Spring/"}]},{"title":"MySQLäº‹åŠ¡","slug":"MySQLäº‹åŠ¡","date":"2021-06-28T15:08:02.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2021/06/28/MySQLäº‹åŠ¡.html","link":"","permalink":"https://linweiyuan.github.io/2021/06/28/MySQL%E4%BA%8B%E5%8A%A1.html","excerpt":"","text":"ACIDäº‹åŠ¡ï¼Œé¦–å…ˆè¦äº†è§£ ACID A åŸå­æ€§åŸå­æ€§ä½“ç°åœ¨å›æ»šä¸Šé¢ï¼Œå¦‚æœ SQL æ‰§è¡Œå‡ºé”™ï¼Œè¦æŠŠä¹‹å‰çš„çŠ¶æ€æ¢å¤ï¼Œé‚£æ€ä¹ˆçŸ¥é“æ¢å¤ä»€ä¹ˆå‘¢ï¼ŒæŠŠä¹‹å‰çš„çŠ¶æ€ä¿å­˜åœ¨ undo log é‡Œï¼Œå‡ºé”™åˆ™ä¼šæ‰§è¡Œç›¸åçš„æ“ä½œ C ä¸€è‡´æ€§äº‹åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§çº¦æŸå¹¶æ²¡æœ‰è¢«ç ´åï¼Œä¸»è¦æ˜¯é€šè¿‡åŸå­æ€§ + éš”ç¦»æ€§ + æŒä¹…æ€§æ¥ä¿è¯ I éš”ç¦»æ€§å†™å†™æ“ä½œæ˜¯é€šè¿‡é”è§£å†³ï¼Œå†™è¯»æ“ä½œæ˜¯åŸºäº MVCC D æŒä¹…æ€§æŒ‡çš„æ˜¯äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå¯¹æ•°æ®åº“çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ MySQL ä¸ºäº†æé«˜æ•ˆç‡ï¼Œä¼šæœ‰ä¸€ä¸ª bufferï¼Œæ¯æ¬¡å†™åˆ° buffer ä¸­ï¼Œå†å®šæœŸå°† buffer ä¸­çš„æ•°æ®åˆ·æ–°åˆ°ç¡¬ç›˜ä¸Šï¼Œè¿™å°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœ buffer è¿˜æ²¡æ¥å¾—åŠåˆ·ç›˜ï¼ŒMySQL å®•æœºäº†ï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ï¼Œå› æ­¤ï¼Œå¼•å…¥äº† redo logï¼Œå½“æ•°æ®åº“çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„æ—¶å€™ï¼Œå…ˆå°† æœ¬æ¬¡æ“ä½œè®°å½•åˆ° redo log ä¸­ï¼Œå†å†™ bufferï¼Œè¿™æ ·å¦‚æœå®•æœºäº†ï¼Œè¿˜æœ‰ redo log æ¥æ¢å¤æ•°æ®ï¼Œè¿™æ ·å°±ä¿è¯äº†æŒä¹…æ€§ ä¸ºä»€ä¹ˆ redo log å†™æ•°æ®è¦æ¯” buffer å†™æ•°æ®åº“å¿«ï¼Ÿ å› ä¸º buffer å†™ç›˜æ˜¯éšæœº IOï¼Œredo log æ˜¯è¿½åŠ çš„æ¨¡å¼ï¼Œæ˜¯é¡ºåº IOï¼Œæ•ˆç‡å°±é«˜ï¼Œå¹¶ä¸” buffer æŒä¹…åŒ–æ•°æ®æ˜¯ä»¥æ•°æ®é¡µ page ä¸ºå•ä½çš„ï¼Œé»˜è®¤æ˜¯ 16Kï¼Œå°±æ˜¯è¯´ä¸€ä¸ªæ•°æ®é¡µä¸Šçš„å°å°ä¿®æ”¹éƒ½è¦æŠŠæ•´ä¸ªæ•°æ®é¡µå†™å…¥ï¼Œredo log åªéœ€è¦å†™å…¥çœŸæ­£éœ€è¦çš„éƒ¨åˆ†ï¼Œæ— æ•ˆçš„ IO å°±å¤§å¤§å‡å°‘äº†ï¼Œæ•ˆç‡å°±æé«˜äº† è¯»æœªæäº¤ï¼šè„è¯»ï¼Œä¸å¯é‡å¤è¯»ï¼Œå¹»è¯»éƒ½æœ‰å¯èƒ½å‡ºç° è¯»å·²æäº¤ï¼šé¿å…è„è¯»ï¼Œå¯èƒ½å‡ºç°ä¸å¯é‡å¤è¯»å’Œå¹»è¯» é‡å¤è¯»ï¼šé¿å…è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œå¯èƒ½å‡ºç°å¹»è¯» ä¸²è¡ŒåŒ–ï¼šå…¨éƒ¨é¿å…ï¼Œæ€§èƒ½å·® è„è¯»: ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹äº†æ•°æ®è¿˜æ²¡æäº¤ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†æ—§æ•°æ® ä¸å¯é‡å¤è¯»: ä¸€ä¸ªäº‹åŠ¡å¤šæ¬¡è¯»åŒä¸€æ•°æ®ï¼Œé—´éš”é—´ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡æŠŠæ•°æ®æ”¹äº†ï¼Œå¯¼è‡´ä¸¤æ¬¡è¯»å–ç»“æœä¸ä¸€æ · å¹»è¯»: ä¸€ä¸ªäº‹åŠ¡å¯¹å…¨è¡¨æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡å¾€è¡¨ä¸­æ–°å¢æ•°æ®ï¼Œä¿®æ”¹å®Œæˆåè«åå…¶å¦™å‡ºç°äº†æ²¡æœ‰ä¿®æ”¹åˆ°çš„æ•°æ® MySQL çš„ InnoDB é»˜è®¤æ˜¯ RRï¼Œä¸ºä»€ä¹ˆå¯ä»¥è§£å†³å¹»è¯»ï¼Ÿ å› ä¸ºé»˜è®¤å¼€å¯äº†é—´éš™é”ï¼Œè¿™æ ·å°±é˜²æ­¢äº†ä¸¤æ¬¡ select ä¹‹é—´ï¼Œæœ‰å¦å¤–çš„äº‹åŠ¡è¿›è¡Œå¢åˆ æ“ä½œ","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://linweiyuan.github.io/tags/MySQL/"}]},{"title":"MySQLé”","slug":"MySQLé”","date":"2021-06-25T15:03:53.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2021/06/25/MySQLé”.html","link":"","permalink":"https://linweiyuan.github.io/2021/06/25/MySQL%E9%94%81.html","excerpt":"","text":"è¡Œé”update çš„æ—¶å€™è¡Œçº§é”ï¼Œå¦‚æœæœª commitï¼Œå¦ä¸€ä¸ªäº‹åŠ¡ä¼šå°è¯•æ‹¿é”ï¼Œè¶…æ—¶åˆ™æŠ¥é”™ è¡¨é”ç´¢å¼•å¤±æ•ˆï¼Œè¡Œé”ä¼šå‡çº§ä¸ºè¡¨é”ï¼Œæ¯”å¦‚ update çš„æ—¶å€™æœ‰ orï¼Œè¿™æ ·å°±ç®—åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ update id &#x3D; 1 or id &#x3D; 2ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡è¦ update id &#x3D; 3ï¼Œä¹Ÿä¼šé˜»å¡ï¼Œä¸€æ—¦å‘ç”Ÿè¡¨é”ï¼Œå¹¶å‘åº¦æ˜¯æ¯”è¾ƒä½çš„ï¼Œæ‰€ä»¥è¦é¿å…ç´¢å¼•å¤±æ•ˆ é—´éš™é”ä¸€èˆ¬å‘ç”Ÿåœ¨èŒƒå›´æŸ¥è¯¢é‡Œé¢ï¼ŒæŠŠæ•´ä¸ªèŒƒå›´åŠ é”ï¼Œå¦‚æœè¦åœ¨è¿™ä¸ªèŒƒå›´å†…æ’å…¥æ–°æ•°æ®ï¼Œä¹Ÿä¼šé˜»å¡ï¼Œæ€§èƒ½å½±å“ä¹Ÿæ˜¯æ¯”è¾ƒå¤§çš„ 1show status like &#x27;innodb_row_lock%&#x27;; å¯ä»¥çœ‹åˆ°ä¸€äº›é”ç›¸å…³æ•°æ®","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://linweiyuan.github.io/tags/MySQL/"}]},{"title":"MySQLç´¢å¼•ç›¸å…³","slug":"MySQLç´¢å¼•ç›¸å…³","date":"2021-06-18T14:04:59.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2021/06/18/MySQLç´¢å¼•ç›¸å…³.html","link":"","permalink":"https://linweiyuan.github.io/2021/06/18/MySQL%E7%B4%A2%E5%BC%95%E7%9B%B8%E5%85%B3.html","excerpt":"","text":"B+ æ ‘è¦äº†è§£ç´¢å¼•ï¼Œé¦–å…ˆè¦äº†è§£ MySQL çš„ B+æ ‘æ•°æ®ç»“æ„ ä¸ºä»€ä¹ˆæ˜¯ B+ æ ‘ï¼Ÿ å’Œ B æ ‘ç›¸æ¯”ï¼Œå¤šäº†ç®­å¤´ï¼Œç§°ä¸ºå¶å­èŠ‚ç‚¹ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œè¿›è¡Œäº†æ’åºï¼Œè§£å†³äº†å›æ—‹æŸ¥æ‰¾çš„é—®é¢˜ éå¶å­èŠ‚ç‚¹åªå­˜ keyï¼Œå¶å­èŠ‚ç‚¹æ—¢å­˜ key åˆå­˜ valueï¼ˆæ•°æ®åœ°å€ï¼‰ èšç°‡ç´¢å¼•èšç°‡ç´¢å¼•å°±æ˜¯æŠŠæ•°æ®å’Œç´¢å¼•æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œå¶å­èŠ‚ç‚¹ä¿å­˜è¡Œæ•°æ®ï¼Œæ•°æ®æŒ‰ç…§ç´¢å¼•çš„é¡ºåºæ¥è¿›è¡Œå­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯è¯´ç´¢å¼•é¡¹çš„é¡ºåºå’Œè¡¨ä¸­è®°å½•çš„ç‰©ç†é¡ºåºä¸€è‡´ï¼ŒInnoDB ä¸­ï¼Œåœ¨èšç°‡ç´¢å¼•ä¹‹ä¸Šåˆ›å»ºçš„ç´¢å¼•ç§°ä¸ºè¾…åŠ©ç´¢å¼•ï¼Œæ¯”å¦‚å¤åˆç´¢å¼•ï¼Œå‰ç¼€ç´¢å¼•ï¼Œå”¯ä¸€ç´¢å¼•ç­‰ èšç°‡ç´¢å¼•æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œé»˜è®¤å®ç°æ˜¯æ˜¯ä¸»é”® å¦‚æœè¡¨ä¸­æ²¡æœ‰å®šä¹‰ä¸»é”®ï¼ŒInnoDB ä¼šé€‰æ‹©ä¸€ä¸ªå”¯ä¸€çš„éç©ºç´¢å¼•ä»£æ›¿ å¦‚æœæ²¡æœ‰å”¯ä¸€éç©ºçš„ç´¢å¼•ï¼ŒInnoDB ä¼šåœ¨å†…éƒ¨ç”Ÿæˆä¸€ä¸ªåä¸º GEN_CLUST_INDEX çš„éšå¼çš„èšç°‡ç´¢å¼• åœ¨æ•°æ®ï¼ˆç´¢å¼•ï¼‰æ–‡ä»¶ä¸­ï¼Œéå¶å­èŠ‚ç‚¹ä¿å­˜çš„æ˜¯ä¸»é”®ï¼Œå¶å­èŠ‚ç‚¹ä¿å­˜çš„æ˜¯çœŸå®æ•°æ®ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªæ–‡ä»¶ è¾…åŠ©ç´¢å¼•ä¸­ï¼Œéå¶å­èŠ‚ç‚¹ä¿å­˜çš„æ˜¯å­—æ®µçš„å€¼ï¼ˆæ’åºï¼‰ï¼Œå¶å­èŠ‚ç‚¹ä¿å­˜çš„æ˜¯è¯¥æ¡è®°å½•çš„ä¸»é”® ID å€¼ æ‰€ä»¥ï¼Œå¦‚æœæ˜¯ä¸»é”®ç´¢å¼•ï¼Œåªéœ€æŸ¥ä¸€æ¬¡ï¼Œä¸€å®šç¨‹åº¦ä¸Šä¼šæ¯” MyISAM å¿«ï¼Œä½†æ˜¯è¾…åŠ©ç´¢å¼•è¦æŸ¥åˆ° ID å†åˆ°ä¸»é”®ç´¢å¼•æŸ¥æ•°æ®ï¼Œè¦æŸ¥ä¸¤æ¬¡ï¼Œä¸€å®šç¨‹åº¦ä¸Šä¼šæ¯” MyISAN æ…¢ ä¸ºä»€ä¹ˆä¸èƒ½ select *ï¼Œè¦å°½å¯èƒ½ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼Ÿ å¦‚æœæ˜¯æŸ¥å•ä¸ªå­—æ®µï¼Œåœ¨è¿™ä¸ªå­—æ®µä¸Šå»ºç«‹äº†ç´¢å¼•ï¼Œåªéœ€æŸ¥ä¸€æ¬¡å°±èƒ½æ‹¿åˆ°è¯¥å­—æ®µæ•°æ®ï¼Œå¦‚æœ select *ï¼Œé‚£å°±è¦æŸ¥åˆ° IDï¼Œå†æ ¹æ® ID æ¥æŸ¥è¯¢å…¨éƒ¨ï¼ŒæŸ¥ä¸¤æ¬¡ éèšç°‡ç´¢å¼•å°†æ•°æ®å’Œç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼Œè¡¨æ•°æ®å­˜å‚¨é¡ºåºå’Œç´¢å¼•é¡ºåºæ— å…³ åœ¨ç´¢å¼•æ–‡ä»¶ä¸­ï¼Œéå¶å­èŠ‚ç‚¹ä¿å­˜çš„æ˜¯ä¸»é”®ï¼Œå¶å­èŠ‚ç‚¹ä¿å­˜çš„æ˜¯ä¸»é”®å’Œæ•°æ®åœ¨æ•°æ®æ–‡ä»¶ä¸­çš„åœ°å€ ç´¢å¼•è®¾è®¡åŸåˆ™ å°½é‡åœ¨åªéœ€è¦æŸ¥è¯¢åˆ°çš„å­—æ®µä¸ŠåŠ ç´¢å¼•ï¼ˆwhereï¼‰ åŸºæ•°å°çš„å­—æ®µä¸åŠ ç´¢å¼•ï¼ˆå‡ºç°é‡å¤çš„è¶Šå¤šè¶Šä¸åŠ ï¼Œ å”¯ä¸€æ‰èƒ½æŸ¥è¯¢å¿«ï¼‰ å¦‚æœå­—ç¬¦ä¸²å¤ªé•¿ä½†æ˜¯å‰é¢ä¸é‡å¤ï¼Œ ä½¿ç”¨çŸ­ç´¢å¼•ï¼ˆæ ¹æ®å‰é¢å‡ ä¸ªå­—ç¬¦å°±èƒ½ç¡®å®šå”¯ä¸€ï¼‰ ä¸è¦è¿‡åº¦ä½¿ç”¨ç´¢å¼•ï¼Œ å ç”¨ç£ç›˜ç©ºé—´ï¼Œ æ›´æ–°æ“ä½œå½±å“æ€§èƒ½ å»ºç«‹ç´¢å¼•çš„å­—æ®µï¼Œ å°½é‡ä¸è¦æœ‰ nullï¼ˆnot null + é»˜è®¤å€¼ï¼‰ like æŸ¥è¯¢ä¸­å‰å¯¼æ¨¡ç³ŠæŸ¥è¯¢ä¸èƒ½å‘½ä¸­ç´¢å¼•ï¼ˆlike â€˜%a%â€™ ä¸èµ°ç´¢å¼•ï¼Œlike â€˜a%â€™ èµ°ï¼‰ å¦‚æœå­—æ®µæ˜¯å­—ç¬¦ä¸²ï¼Œ æŸ¥è¯¢æ—¶ç”¨æ•´å½¢ï¼Œ ç´¢å¼•å¤±æ•ˆ å¤åˆç´¢å¼•ï¼ˆæœ€å·¦åŸåˆ™ï¼Œ æŸ¥è¯¢æ¡ä»¶å¦‚æœä¸åŒ…å«ç¬¬ä¸€ä¸ªå­—æ®µï¼Œ ç´¢å¼•å¤±æ•ˆï¼‰ sql æŸ¥è¯¢ cpu å¼€é”€ï¼šor &gt; in &gt; union or æŸ¥è¯¢å¦‚æœå‰é¢çš„æ¡ä»¶æœ‰ç´¢å¼•ï¼Œ åé¢æ²¡æœ‰ï¼Œ ç´¢å¼•å¤±æ•ˆ å¦å®šæŸ¥è¯¢ç´¢å¼•å¤±æ•ˆï¼ˆ!&#x3D;ï¼Œ &lt;&gt;ï¼Œ not inï¼Œ not existsï¼Œ not likeï¼‰ ç”¨ explain æ¥åˆ†æ sql æ€§èƒ½ ç´¢å¼•å¤±æ•ˆåŸç†é’ˆå¯¹è”åˆç´¢å¼•çš„æƒ…å†µï¼Œæ•°æ®ä¿å­˜çš„æ—¶å€™ï¼Œæ˜¯æœ‰é¡ºåºçš„ï¼Œä¸¤ä¸ªå­—æ®µ a å’Œ bï¼Œå…ˆæŒ‰ a æ’åºï¼Œåœ¨ a ç›¸åŒçš„æƒ…å†µä¸‹æŒ‰ b æ’åºï¼Œæ‰€ä»¥å¦‚æœç›´æ¥æŸ¥ bï¼Œæ˜¯æ— åºçš„ï¼Œå› æ­¤ä¸èµ°ç´¢å¼•ï¼Œè¦å…¨è¡¨æ‰«æï¼ŒèŒƒå›´æŸ¥æ‰¾ï¼Œæ¨¡ç³ŠæŸ¥è¯¢ä¹Ÿæ˜¯è¿™ä¸ªé“ç† ç´¢å¼•ä¼˜åŒ– æœ€å·¦å‰ç¼€æ³•åˆ™ï¼šå¦‚æœå»ºç«‹çš„æ˜¯å¤åˆç´¢å¼•ï¼Œç´¢å¼•çš„é¡ºåºè¦æŒ‰ç…§å»ºç«‹æ—¶çš„é¡ºåºï¼Œå³ä»å·¦åˆ°å³ï¼ˆå’Œ B+ æ ‘çš„æ•°æ®ç»“æ„æœ‰å…³ï¼‰ï¼Œæ¯”å¦‚ abcï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼š abcï¼šæœ‰æ•ˆ acï¼ša æœ‰æ•ˆ c æ— æ•ˆ bcï¼šbc éƒ½æ— æ•ˆ cï¼šæ— æ•ˆ ä¸è¦å¯¹ç´¢å¼•è¿›è¡Œå¦‚ä¸‹å¤„ç†ï¼š è®¡ç®—ï¼šå¦‚åŠ å‡ä¹˜é™¤ï¼Œä¸ç­‰ï¼Œis nullï¼Œ is not nullï¼Œ or å‡½æ•°ï¼šå¦‚ sum()ï¼Œ round()ç­‰ ç±»å‹è½¬æ¢ï¼šå¦‚ id &#x3D; â€˜1â€™ï¼Œæœ¬æ¥æ˜¯æ•°å­—å†™æˆäº†å­—ç¬¦ä¸² ç´¢å¼•ä¸è¦æ”¾åœ¨èŒƒå›´æŸ¥æ‰¾çš„å³è¾¹ å‡å°‘ select * çš„ä½¿ç”¨ like æ¨¡ç³ŠæŸ¥è¯¢ï¼šåªç•™å³è¾¹çš„ç™¾åˆ†å·ï¼Œé‚£æ˜¯å¦ä¸¤ä¸ªç™¾åˆ†å·æ²¡å¾—ä¼˜åŒ–å‘¢ï¼Œä¹Ÿä¸æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼Œæ‰€è°“è¦†ç›–ç´¢å¼•å°±æ˜¯ select æŸ¥è¯¢çš„å­—æ®µå’Œ where é‡Œçš„å­—æ®µæ˜¯ä¸€è‡´çš„ï¼Œä¹Ÿä¼šèµ°ç´¢å¼• order by ä¼˜åŒ–ï¼Œé¿å…å‡ºç° Using filesort æ–‡ä»¶å†…æ’åºï¼Œæ‰€è°“ filesortï¼Œå°±æ˜¯è¯´å®ƒæ²¡æœ‰æŒ‰ç…§ç´¢å¼•æœ¬èº«æ¥è¿›è¡Œæ’åºï¼Œè€Œæ˜¯åœ¨å¤–é¢å¼€è¾Ÿäº†ä¸€å—å†…å­˜ï¼ŒæŠŠæ•°æ®å¤åˆ¶è¿›å»è¿›è¡Œæ’åºï¼Œè¿™æ ·å†…å­˜å°±ä¼šè¢«å¤šå ç”¨ä¸€ä»½ç©ºé—´ï¼Œè€Œå†…å­˜æ˜¯æ¯”è¾ƒå®è´µçš„èµ„æºï¼Œæ¯”è¾ƒå½±å“æ€§èƒ½ å…¶å®ä¹Ÿå¯ä»¥è€ƒè™‘ä¸åœ¨ MySQL é‡Œæ’åºï¼Œè€Œåœ¨ä»£ç é‡Œè¿›è¡Œæ’åº","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://linweiyuan.github.io/tags/MySQL/"}]},{"title":"MySQLå­˜å‚¨å¼•æ“","slug":"MySQLå­˜å‚¨å¼•æ“","date":"2021-05-20T14:03:11.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2021/05/20/MySQLå­˜å‚¨å¼•æ“.html","link":"","permalink":"https://linweiyuan.github.io/2021/05/20/MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E.html","excerpt":"","text":"InnoDB å’Œ MyISAM çš„åŒºåˆ« InnoDB æ”¯æŒäº‹åŠ¡ï¼ŒMyISAM ä¸æ”¯æŒï¼Œè¿™æ˜¯ MySQL å°†é»˜è®¤å­˜å‚¨å¼•æ“ä» MyISAM å˜æˆ InnoDB çš„é‡è¦åŸå› ä¹‹ä¸€ InnoDB æ”¯æŒå¤–é”®ï¼ŒMyISAM ä¸æ”¯æŒï¼Œå¯¹ä¸€ä¸ªåŒ…å«å¤–é”®çš„ InnoDB è¡¨è½¬ä¸º MyISAM ä¼šå¤±è´¥ InnoDB æ˜¯èšé›†ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ï¼‰ï¼ŒMyISAM æ˜¯éèšé›†ç´¢å¼• InnoDB æœ€å°çš„é”ç²’åº¦æ˜¯è¡Œé”ï¼ŒMyISAM æœ€å°çš„é”ç²’åº¦æ˜¯è¡¨é”ï¼Œè¿™ä¹Ÿæ˜¯é»˜è®¤å­˜å‚¨å¼•æ“æ”¹å˜çš„é‡è¦åŸå› ä¹‹ä¸€ MyISAM åœ¨ç¡¬ç›˜ä¸Šå­˜å‚¨ä¸ºä¸‰ä¸ªæ–‡ä»¶ .frmï¼šè¡¨çš„å®šä¹‰ .mydï¼šæ•°æ®æ–‡ä»¶ .myiï¼šç´¢å¼•æ–‡ä»¶ InnoDB æ˜¯ä¸¤ä¸ªæ–‡ä»¶ï¼ˆæ²¡æœ‰ä¸“é—¨ä¿å­˜æ•°æ®çš„æ–‡ä»¶ï¼‰ .frmï¼šè¡¨çš„å®šä¹‰ .ibdï¼šæ•°æ®å’Œç´¢å¼•æ–‡ä»¶ï¼Œæ•°æ®ä¹Ÿä¼šä¿å­˜åœ¨å¶å­èŠ‚ç‚¹ä¸­ å…¨æ–‡ç´¢å¼•éƒ½æ”¯æŒ","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://linweiyuan.github.io/tags/MySQL/"}]},{"title":"MVCC","slug":"MVCC","date":"2021-05-15T13:57:08.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2021/05/15/MVCC.html","link":"","permalink":"https://linweiyuan.github.io/2021/05/15/MVCC.html","excerpt":"","text":"MVCCMulti Version Concurrency Control å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ ä»€ä¹ˆæ˜¯ MySQL InnoDB ä¸‹çš„å½“å‰è¯»å’Œå¿«ç…§è¯»ï¼Ÿ å¿«ç…§è¯»ï¼šä¸€èˆ¬çš„ select éƒ½æ˜¯å¿«ç…§è¯»ï¼ˆäº‹åŠ¡çº§åˆ«ä¸æ˜¯ä¸²è¡ŒåŒ–ï¼‰ï¼ŒåŸºäº MVCC å®ç°ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼Œè¯»åˆ°çš„æ•°æ®å°±ä¸ä¸€å®šæ˜¯å½“å‰æœ€æ–°çš„æ•°æ®ï¼Œæœ‰å¯èƒ½æ˜¯ä¹‹å‰å†å²ç‰ˆæœ¬çš„æ•°æ® å½“å‰è¯»ï¼šè¯»å–çš„æ•°æ®æ˜¯å½“å‰æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä¼šå¯¹æ•°æ®è¿›è¡ŒåŠ é”ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡ä¿®æ”¹ï¼Œå±äºæ‚²è§‚é” selet in share modeï¼ˆå…±äº«é”ï¼‰ select for udateï¼ˆæ’ä»–é”ï¼‰ updateï¼Œ insertï¼Œ deleteï¼ˆæ’ä»–é”ï¼‰ ä¸²è¡ŒåŒ–äº‹åŠ¡éš”ç¦»çº§åˆ« MVCC æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ è¡¨ä¸­ä¸€è¡Œæ•°æ®åŒ…å«æ•°æ®æœ¬èº«ï¼Œäº‹åŠ¡ IDï¼ˆè‡ªå¢ï¼‰å’Œå›æ»šæŒ‡é’ˆ undo log ç‰ˆæœ¬é“¾ readview creator_idï¼šè¡¨ç¤ºç”Ÿæˆè¯¥ readview çš„äº‹åŠ¡çš„äº‹åŠ¡ id m_idsï¼š è¡¨ç¤ºåœ¨ç”Ÿæˆ readview æ—¶å½“å‰ç³»ç»Ÿä¸­æ´»è·ƒçš„è¯»å†™äº‹åŠ¡çš„äº‹åŠ¡ id åˆ—è¡¨ï¼Œæ´»è·ƒæŒ‡çš„å°±æ˜¯è¿˜æ²¡ commit min_trx_idï¼šè¡¨ç¤ºåœ¨ç”Ÿæˆ readview æ—¶å½“å‰ç³»ç»Ÿä¸­æ´»è·ƒçš„è¯»å†™äº‹åŠ¡ä¸­çš„æœ€å°äº‹åŠ¡ idï¼Œä¹Ÿå°±æ˜¯ m_ids æœ€å°å€¼ï¼Œç¬¬ 0 ä¸ªå…ƒç´  max_trx_idï¼šè¡¨ç¤ºç”Ÿæˆ readview æ—¶ç³»ç»Ÿä¸­åº”è¯¥åˆ†é…ç»™ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„ idï¼ˆå’Œ min ä¸åŒï¼Œmax ä¸æ˜¯ m_ids æœ€åä¸€ä¸ªï¼Œè€Œæ˜¯ä¸‹ä¸€ä¸ªï¼‰ trx_id æ˜¯æ•°æ®åº“ä¸­æ•°æ®çš„ trx_id trx_id &#x3D;&#x3D; creator_trx_idï¼šå¯ä»¥æ­£å¸¸è®¿é—®ï¼Œåœºæ™¯å¯èƒ½æ˜¯ update äº†åï¼Œé©¬ä¸Šå¼€å§‹ select trx_id &lt; min_trx_idï¼šå¯ä»¥è®¿é—®ï¼Œè¡¨ç¤º trx_id å·²ç»æ˜¯æäº¤çš„äº† trx_id &gt; max_trx_idï¼šä¸å¯ä»¥è®¿é—®ï¼Œå·²ç»è¶…å‡ºç‰ˆæœ¬é“¾äº† min_trx_id &lt;&#x3D; trx_id &lt;&#x3D; max_trx_idï¼šå¦‚æœ trx_id åœ¨ m_ids é‡Œï¼Œä¸å¯ä»¥è®¿é—®ï¼Œä¸åœ¨åˆ™å¯ä»¥","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://linweiyuan.github.io/tags/MySQL/"},{"name":"MVCC","slug":"MVCC","permalink":"https://linweiyuan.github.io/tags/MVCC/"}]},{"title":"List, Set, Mapç›¸å…³çŸ¥è¯†ç‚¹","slug":"List-Set-Mapç›¸å…³çŸ¥è¯†ç‚¹","date":"2021-04-30T13:47:24.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2021/04/30/List-Set-Mapç›¸å…³çŸ¥è¯†ç‚¹.html","link":"","permalink":"https://linweiyuan.github.io/2021/04/30/List-Set-Map%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9.html","excerpt":"","text":"HashMap å’Œ HashTable çš„åŒºåˆ«çº¿ç¨‹å®‰å…¨HashMap æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼ŒHashTable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒHashTable å†…éƒ¨çš„æ–¹æ³•åŸºæœ¬éƒ½ç»è¿‡ synchronized ä¿®é¥°ï¼ŒHashMap æœ‰çº¿ç¨‹å®‰å…¨ç‰ˆæœ¬çš„å®ç° ConcurrentHashMap æ•ˆç‡å› ä¸ºçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼ŒHashMap è¦æ¯” HashTable æ•ˆç‡é«˜ä¸€äº›ï¼ŒHashTable åŸºæœ¬å·²ç»è¢«æ·˜æ±°äº† null çš„æ”¯æŒHashMap ä¸­å¯ä»¥å°† null è®¾ä¸º keyï¼ˆhashCode ä¸º 0ï¼‰,ä½†æ˜¯åªå…è®¸æœ‰ä¸€ä¸ªï¼Œvalue ä¸º null å¯ä»¥æœ‰å¤šä¸ª HashTable ä¸­ key æˆ– value ä»»ä½•ä¸€ä¸ª null éƒ½ä¼šæœ‰ NullPointerExceptionï¼ˆvalue å¦‚æœåˆ¤æ–­æ˜¯ null ç›´æ¥æŠ›å‡º NPEï¼Œkey æ²¡æœ‰åˆ¤æ–­ï¼Œä½†æ˜¯ key å¦‚æœä¸º null,key.hashCode()å°±ä¼šæŠ¥ NPEï¼‰(ConcurrentHashMap æ— è®º key è¿˜æ˜¯ value ä¸º nullï¼Œéƒ½ä¼šä¸»åŠ¨æŠ› NPE) åˆå§‹å®¹é‡å’Œæ‰©å®¹åˆ›å»ºæ—¶å¦‚æœä¸æŒ‡å®šå®¹é‡åˆå§‹å€¼ï¼ŒHashTable é»˜è®¤çš„åˆå§‹å¤§å°ä¸º 11ï¼Œæ¯æ¬¡æ‰©å®¹ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„ 2n + 1ï¼›HashMap çš„é»˜è®¤åˆå§‹åŒ–å¤§å°ä¸º 16,æ¯æ¬¡æ‰©å®¹ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„ä¸¤å€ å¦‚æœæŒ‡å®šäº†åˆå§‹å€¼ï¼ŒHashTable ä¼šç›´æ¥ç”¨è¿™ä¸ªå€¼ï¼ŒHashMap ä¼šç”¨ tableSizeFor()æ–¹æ³•å°†å…¶æ‰©å……ä¸º 2 çš„å¹‚æ¬¡æ–¹ åº•å±‚æ•°æ®ç»“æ„JDK 1.8 ä»¥åçš„ HashMap åœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º 8ï¼‰å¹¶ä¸”æ•°ç»„é•¿åº¦å¤§äº 64,ä¼šå°†é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ï¼Œå½“çº¢é»‘æ ‘èŠ‚ç‚¹ä½äº 6 æ—¶ï¼Œè½¬å›é“¾è¡¨ HashTable æ²¡æœ‰è¿™æ ·çš„æœºåˆ¶ HashMap å’Œ HashSet çš„åŒºåˆ«HashSet åº•å±‚å°±æ˜¯åŸºäº HashMap æ¥å®ç°çš„ï¼ŒHashSet æ‰§è¡Œ add(xxx)çš„æ—¶å€™ï¼ŒæŠŠ xxx ä½œä¸º key æ”¾åˆ° map é‡Œï¼Œkey å¯¹åº”çš„ value æ˜¯ä¸€ä¸ªæ— æ„ä¹‰ new Object()ï¼Œå› ä¸º map ä¸­çš„ key æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ set å­˜çš„å…ƒç´ ä¸èƒ½é‡å¤ HashMap JDK1.7 å’Œ JDK1.8 çš„åŒºåˆ« JDK 1.7 ä¹‹å‰æ˜¯æ•°ç»„åŠ é“¾è¡¨ï¼ŒJDK 1.8 åä¹Ÿå±æ•°ç»„åŠ é“¾è¡¨ï¼Œå¦‚æœå“ˆå¸Œå†²çªä¸¥é‡åˆ™è½¬æ¢ä¸ºçº¢é»‘æ ‘ JDK 1.7 å¤´æ’æ³•ï¼ˆå…ˆå°†åŸä½ç½®çš„æ•°æ®ç§»åˆ°åä¸€ä½ï¼Œå†æ’å…¥æ•°æ®åˆ°è¯¥ä½ç½®ï¼‰ï¼ŒJDK 1.8 å°¾æ’æ³•ï¼ˆç›´æ¥æ’å…¥åˆ°é“¾è¡¨å°¾éƒ¨&#x2F;çº¢é»‘æ ‘ï¼‰ï¼Œå°¾æ’æ³•èƒ½è§£å†³å¹¶å‘ä¸‹çš„æ­»å¾ªç¯é—®é¢˜ HashMap åŠ è½½å› å­ä¸ºä»€ä¹ˆä¸èƒ½æ˜¯ 0.5 æˆ–è€… 1.0ï¼Œè€Œæ˜¯ 0.75 å¦‚æœæ˜¯ 1.0ï¼Œåªæœ‰å½“ HashMap æ»¡äº†æ‰ä¼šæ‰©å®¹ï¼Œå“ˆå¸Œè®¡ç®—å‡ºæ¥çš„ç»“æœå¾ˆéš¾è¯´åˆšå¥½è½åœ¨æ¯ä¸€ä¸ªç©ºçš„ä½ç½®ä¸Šï¼Œæ‰€ä»¥å‘ç”Ÿæ‰©å®¹çš„æ—¶å€™ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Š HashMap å·²ç»å‘ç”Ÿäº†å¤šæ¬¡å“ˆå¸Œå†²çªäº†ï¼Œå¦‚æœ HashMap å˜æˆäº†é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘ï¼Œåˆ™å¯¹å…ƒç´ æ“ä½œçš„æ—¶é—´å°±ä¼šå¢åŠ ï¼Œè¿è¡Œæ•ˆç‡å°±ä¼šé™ä½ï¼Œå½±å“æ€§èƒ½ï¼Œå±äºæ—¶é—´æ¢ç©ºé—´ å¦‚æœæ˜¯ 0.5ï¼Œå½“ HashMap æ”¾äº†ä¸€åŠå…ƒç´ æ—¶åˆ™æ‰©å®¹ï¼Œä½†æ˜¯æ¯æ¬¡å½“ä¸€åŠçš„æ—¶å€™å°±æ‰©å®¹ï¼Œåˆ™è‡³å°‘æœ‰ä¸€åŠçš„ç©ºé—´æ˜¯æ°¸è¿œç”¨ä¸åˆ°ï¼Œé€ æˆäº†å†…å­˜çš„æµªè´¹ï¼Œç›¸å¯¹åœ°ï¼Œå“ˆå¸Œå†²çªæ¦‚ç‡å‡å°‘ï¼Œå…ƒç´ æ“ä½œæ—¶é—´ä¹Ÿä¼šå‡å°‘ï¼Œå±äºç©ºé—´æ¢æ—¶é—´ HashMap æºç çš„æ³¨é‡Šï¼Œ0.75 æ˜¯ä¸€ä¸ªå¹³è¡¡ç‚¹ 1As a general rule, the default load factor (.75) offers a good tradeoff between time and space costs. Higher values decrease the space overhead but increase the lookup cost (reflected in most of the operations of the HashMap class, including get and put). The expected number of entries in the map and its load factor should be taken into account when setting its initial capacity, so as to minimize the number of rehash operations. If the initial capacity is greater than the maximum number of entries divided by the load factor, no rehash operations will ever occur. HashMap æ‰©å®¹æµç¨‹æµç¨‹ï¼š åˆ¤æ–­å½“å‰å®¹é‡å¤§å°æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼ˆæœªè®¾ç½®å®¹é‡åˆå§‹å€¼ï¼‰ï¼Œåˆ™æŠŠå®¹é‡æ‰©å……ä¸º 16 è·å– key çš„ hashCodeï¼Œå¯¹ hashCode è¿›è¡Œæ‰°åŠ¨å¤„ç†ï¼Œè®¡ç®—å‡ºå…ƒç´ çš„ä¸‹æ ‡ æ ¹æ®ä¸‹æ ‡åˆ¤æ–­æœ‰æ—  hash ç¢°æ’ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ç›´æ¥æ”¾å…¥æ¡¶ä¸­ å¦‚æœå‘ç”Ÿç¢°æ’ï¼Œæ¯”è¾ƒä¸¤ä¸ª key æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰åˆ™å°†æ–°å€¼è¦†ç›–æ—§å€¼ï¼Œä¸ç›¸ç­‰åˆ™ä»¥é“¾è¡¨çš„å½¢å¼æ’å…¥åˆ°å°¾éƒ¨ å¦‚æœæ’å…¥åé“¾è¡¨çš„é•¿åº¦è¶…è¿‡äº†é˜ˆå€¼ 8ï¼Œå¹¶ä¸”æ•°ç»„é•¿åº¦å¤§äº 64ï¼Œåˆ™å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ æ’å…¥æˆåŠŸåï¼Œå¦‚æœå…ƒç´ ä¸ªæ•°è¾¾åˆ°äº†é˜ˆå€¼ï¼ˆåˆå§‹å®¹é‡ * è´Ÿè½½å› å­ï¼‰ï¼Œåˆ™è¿›è¡Œæ‰©å®¹æ“ä½œ æ‰©å®¹æˆåŠŸåï¼Œå¯¹å…ƒç´ çš„ä¸‹æ ‡è¿›è¡Œé‡æ–°è®¡ç®— ArrayList å’Œ LinkedList çš„åŒºåˆ«ArrayListåŸºäºåŠ¨æ€æ•°ç»„ï¼Œè¿ç»­å†…å­˜å­˜å‚¨ï¼Œéšæœºè®¿é—®ï¼ˆä¸‹æ ‡ï¼‰å¿«ï¼Œå¢åˆ æ»¡ï¼ˆå› ä¸ºé•¿åº¦å›ºå®šï¼Œæ‰©å®¹éœ€è¦å¤åˆ¶åŸæ•°ç»„ï¼‰ LinkedListåŸºäºé“¾è¡¨ï¼Œå­˜å‚¨åœ¨åˆ†æ•£çš„å†…å­˜ä¸­ï¼Œå¢åˆ å¿«ï¼ŒæŸ¥è¯¢æ…¢ï¼Œéœ€è¦é€ä¸€éå†ã€‚éå†æ—¶å€™ç”¨è¿­ä»£å™¨ï¼Œå¦‚æœç”¨ foriï¼Œæ¯æ¬¡éƒ½è¦ list.get(i)ï¼Œé‡æ–°è¿›è¡Œéå†ï¼Œæ€§èƒ½æ¶ˆè€—æå¤§ï¼ˆå¯ä»¥ç”¨å¢å¼ºæ€§ for å¾ªç¯ forEachï¼Œå†…éƒ¨å®ç°ä¹Ÿæ˜¯è¿­ä»£å™¨ï¼‰ ArrayList å’Œ Vector çš„åŒºåˆ«ç›¸åŒç‚¹ ä¸¤ä¸ªç±»éƒ½ç»§æ‰¿äº†ç›¸åŒçš„ç±»ï¼Œå®ç°äº†ç›¸åŒçš„æ¥å£ åº•å±‚éƒ½å± Object æ•°ç»„ é»˜è®¤çš„åˆå§‹åŒ–é•¿åº¦éƒ½æ˜¯ 10 ä¸åŒç‚¹ Vector ä½¿ç”¨äº† synchronized æ¥å®ç°çº¿ç¨‹åŒæ­¥ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ ArrayList ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ æ‰©å®¹çš„æ—¶å€™ï¼ŒArrayList æ‰©å®¹æˆåŸæ¥çš„ 1.5 å€ï¼ŒVector æ‰©å®¹æˆ 2 å€ List å’Œ Set çš„åŒºåˆ«Listæœ‰åºï¼ŒæŒ‰å¯¹è±¡è¿›å…¥çš„é¡ºåºæ¥ä¿å­˜ï¼Œå¯é‡å¤ï¼Œå…è®¸å¤šä¸ª null å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨è¿­ä»£å™¨éå†ï¼Œæˆ–è€…ä¸‹æ ‡çš„æ–¹å¼ Setæ— åºï¼Œä¸å¯é‡å¤ï¼Œæœ€å¤šä¸€ä¸ª null å…ƒç´ ï¼Œåªèƒ½ç”¨è¿­ä»£å™¨éå† ä¸ºä»€ä¹ˆ Set æœ€å¤šåªèƒ½æ”¾ä¸€ä¸ª null å…ƒç´ ï¼Ÿ ä»¥ç”¨å¾—æ¯”è¾ƒå¤šçš„ HashSet ä¸ºä¾‹ï¼Œå†…éƒ¨çš„æ·»åŠ å…ƒç´ æ–¹æ³• add æ–¹æ³•çš„å®ç°æ˜¯è¿™æ ·çš„ 123public boolean add(E e) &#123; return map.put(e, PRESENT)==null;&#125; å…¶ä¸­çš„ map å°±æ˜¯ä¸€ä¸ª HashMap 1private transient HashMap&lt;E,Object&gt; map; map çš„ value PRESENT æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ 1private static final Object PRESENT = new Object(); æ‰€ä»¥åœ¨ HashSet ä¸­æ·»åŠ å…ƒç´ ï¼Œå…¶å®æœ€ç»ˆæ˜¯æ‰§è¡Œäº† HashMap çš„ put æ–¹æ³•ï¼ŒæŠŠè¿™ä¸ªå…ƒç´ å½“ä½œä¸€ä¸ª key å­˜è¿›å»ï¼Œvalue åˆ™æ˜¯ç©ºå¯¹è±¡ HashMap çš„ put æ–¹æ³•ä¼šå¯¹ key è¿›è¡Œä¸€ä¸ª hash è®¡ç®—ï¼Œç®—å‡ºæ¥ hashCode ç¡®å®šå­˜æ”¾çš„ä½ç½®ï¼Œè€Œå½“ key æ˜¯ null çš„æ—¶å€™ï¼ŒhashCode ä¼šæ˜¯ 0ï¼Œæ‰€ä»¥å¦‚æœåœ¨ HashSet ä¸­æ·»åŠ äº†å¤šä¸ª nullï¼Œå…¨éƒ¨éƒ½æ˜¯ä¼šæ”¾åˆ° HashMap ä¸­ hashCode ä¸º 0 çš„ä½ç½® 12345678public V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true);&#125;static final int hash(Object key) &#123; int h; return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);&#125; æ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ HashSet çš„å…ƒç´ ä¸å¯é‡å¤ï¼Œæˆ–è€…åªèƒ½æ”¾ä¸€ä¸ª null HashSet å­˜å‚¨çš„å…ƒç´ æ˜¯å¦æœ‰åºæ— åº HashSet æ˜¯ Set çš„ä¸€ä¸ªå®ç°ç±»ï¼Œåº•å±‚æ˜¯åŸºäº HashMap å®ç°çš„ï¼ŒHashSet å­˜å‚¨çš„å…ƒç´ å¯¹åº” HashMap çš„ keyï¼Œå› ä¸º HashMap ä¸èƒ½å­˜å‚¨é‡å¤çš„ keyï¼Œæ‰€ä»¥ HashSet ä¸èƒ½å­˜å‚¨é‡å¤å…ƒç´  ç”±äº HashMap çš„ key æ˜¯åŸºäº hashCode çš„ï¼Œæ‰€ä»¥ HashSet ä¸­å­˜å‚¨çš„å¯¹è±¡æ˜¯æ— åºçš„ HashSet æ²¡æœ‰æä¾› get æ–¹æ³•ï¼Œåªèƒ½é€šè¿‡ Iterator è¿­ä»£å™¨è·å–æ•°æ® æœ‰ä¸€ç§æƒ…å†µæ˜¯ HashSet ä¸­å­˜æ”¾çš„æ˜¯çº¯æ•°å­—ï¼Œå› ä¸ºå­ç±»ä¸€èˆ¬ä¼šé‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼ŒhashCode() æ˜¯ Object çš„ï¼ŒInteger åœ¨å®ç°çš„æ—¶å€™ï¼ŒæŠŠå½“å‰ int å€¼ç›´æ¥å½“ä½œ hashCode è¿”å›ï¼Œæ‰€ä»¥éå†èµ·æ¥é€ æˆä¸€ç§æœ‰åºçš„å‡è±¡ é›†åˆå¿«é€Ÿå¤±è´¥æœºåˆ¶é¦–å…ˆè¦è¯´æ˜ä¸ºä»€ä¹ˆ Java é›†åˆéå†ï¼Œä¸æ˜¯é›†åˆç±»å®ç° Iteratorï¼Œè€Œæ˜¯è¿”å›å®ƒçš„è¿­ä»£å™¨å¯¹è±¡ï¼Ÿ å› ä¸ºå¦‚æœæ˜¯é›†åˆæœ¬èº«å»å®ç°ï¼Œé‚£ä¹ˆå¯èƒ½ä½ è®¿é—®çš„æ˜¯åˆ«äººéå†çš„æ•°æ® è€Œæ¯æ¬¡è¿”å›æ–°çš„è¿­ä»£å™¨ï¼Œéå†æ•°æ®æ—¶å°±ä¼šäº’ä¸å½±å“ï¼Œåšåˆ°éš”ç¦»æ€§å’Œç‹¬ç«‹æ€§ï¼ˆforEach å¾ªç¯çš„åº•å±‚å®ç°å°±æ˜¯è¿­ä»£å™¨ï¼‰ é›†åˆæœ¬èº«æœ‰ä¸€ä¸ª modCount å±æ€§ç”¨æ¥ä¿å­˜é›†åˆå¢åˆ æ“ä½œçš„æ¬¡æ•°ï¼Œå› ä¸ºè¿­ä»£å™¨æ˜¯é›†åˆçš„æˆå‘˜å†…éƒ¨ç±»ï¼Œæ‰€ä»¥å¯ä»¥éšæ—¶è®¿é—®é›†åˆçš„æˆå‘˜å±æ€§ï¼Œæ‰€ä»¥å½“è·å–åˆ°é›†åˆçš„è¿­ä»£å™¨çš„æ—¶å€™ï¼Œæ¯”å¦‚å½“å‰ modCount æ˜¯ 3ï¼Œnext() çš„æ—¶å€™åˆ¤æ–­ï¼Œè·å–åˆ°çš„ 3 å’Œé›†åˆå½“å‰çš„ 3 è¿˜æ˜¯ä¸€æ ·ï¼Œåˆ™æ­£å¸¸æ‰§è¡Œï¼Œå¦åˆ™æŠ¥é”™ throw new ConcurrentModificationException() é‚£æœ‰æ²¡æœ‰åŠæ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ CopyOnWriteArrayListï¼Œå¢åˆ å…ƒç´ æ—¶ï¼Œåˆ›å»ºæ–°æ•°ç»„ï¼Œå¤åˆ¶åŸæ•°ç»„ï¼Œå†™çš„æ—¶å€™åŠ é”ï¼Œå†™åœ¨æ–°æ•°ç»„ï¼Œè¯»çš„æ—¶å€™ä¸åŠ é”ï¼Œè¯»åœ¨æ—§æ•°ç»„ï¼ˆé€‚ç”¨äºè¯»å¤šå†™å°‘ï¼Œæ•°æ®é‡ä¸å¤§çš„åœºæ™¯ï¼‰","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"}]},{"title":"Javaé”ç›¸å…³çŸ¥è¯†ç‚¹","slug":"Javaé”ç›¸å…³çŸ¥è¯†ç‚¹","date":"2021-03-12T05:07:40.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2021/03/12/Javaé”ç›¸å…³çŸ¥è¯†ç‚¹.html","link":"","permalink":"https://linweiyuan.github.io/2021/03/12/Java%E9%94%81%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9.html","excerpt":"","text":"synchronizedsynchronized æœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼š ä½œç”¨äºæ™®é€šæ–¹æ³•ï¼šé”çš„æ˜¯å½“å‰ç±»å®ä¾‹å¯¹è±¡ ä½œç”¨äºé™æ€æ–¹æ³•ï¼šé”çš„æ˜¯å½“å‰ç±»çš„ class å¯¹è±¡ ä½œç”¨äºä»£ç å—ï¼šé”çš„æ˜¯æ‹¬å·é‡Œé¢çš„å¯¹è±¡ å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥ä»£ç å—æ—¶ï¼Œéœ€è¦è·å¾—é”æ‰èƒ½æ‰§è¡Œé‡Œé¢çš„ä»£ç ï¼Œåè¿‡æ¥ï¼Œå½“é€€å‡ºåŒæ­¥ä»£ç å—æˆ–è€…å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™è¦é‡Šæ”¾é”ï¼Œé€šè¿‡ javap -v è¿›è¡Œä»£ç çš„åç¼–è¯‘å¯ä»¥çœ‹åˆ°æ˜¯é€šè¿‡ monitorexter å’Œ monitorexit æŒ‡ä»¤å®ç°çš„ï¼Œå½“ monitor è¢«çº¿ç¨‹æŒæœ‰åï¼Œå°±å¤„äºé”å®šçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¸Šé”äº† 12345678910111213141516171819202122232425262728293031323334353637public void test(); descriptor: ()V flags: ACC_PUBLIC Code: stack=2, locals=3, args_size=1 0: aload_0 1: dup 2: astore_1 3: monitorenter 4: getstatic #2 // Field java/lang/System.out:Ljava/io/PrintStream; 7: ldc #3 // String Test 9: invokevirtual #4 // Method java/io/PrintStream.println:(Ljava/lang/String;)V 12: aload_1 13: monitorexit 14: goto 22 17: astore_2 18: aload_1 19: monitorexit 20: aload_2 21: athrow 22: return Exception table: from to target type 4 14 17 any 17 20 17 any LineNumberTable: line 4: 0 line 5: 4 line 6: 12 line 7: 22 StackMapTable: number_of_entries = 2 frame_type = 255 /* full_frame */ offset_delta = 17 locals = [ class Test, class java/lang/Object ] stack = [ class java/lang/Throwable ] frame_type = 250 /* chop */ offset_delta = 4 å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥äº†ä¸€ä¸ªå¯¹è±¡çš„ synchronized æ–¹æ³•åï¼Œå…¶ä»–çº¿ç¨‹æ˜¯å¦å¯ä»¥è¿›å…¥è¿™ä¸ªå¯¹è±¡çš„å…¶ä»–æ–¹æ³•ï¼Ÿ éœ€è¦åˆ†æƒ…å†µè®¨è®ºï¼š å¦‚æœè¿™ä¸ªæ–¹æ³•æ˜¯ synchronized ä¿®é¥°çš„ï¼Œä¸èƒ½ï¼Œé™¤éä¸Šé¢é‡Šæ”¾é”ï¼Œå¦‚æœæ²¡æœ‰åŠ  synchronizedï¼Œåˆ™å¯ä»¥è¿›å…¥ å¦‚æœè¿™ä¸ªæ–¹æ³•å†…éƒ¨æœ‰è°ƒç”¨ wait() æ–¹æ³•ï¼Œwait() ä¼šé‡Šæ”¾é”ï¼ˆsleep() ä¸ä¼šï¼‰ï¼Œåˆ™å¯ä»¥è¿›å…¥å…¶ä»– synchronized æ–¹æ³• å¦‚æœå…¶ä»–æ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œå¯ä»¥è¿›å…¥ï¼Œå› ä¸ºé™æ€æ–¹æ³•é”çš„æ˜¯å½“å‰ç±»çš„ class å¯¹è±¡ï¼Œéé™æ€çš„æ–¹æ³•é”çš„æ˜¯å½“å‰ç±»å»ºå‡ºæ¥çš„å¯¹è±¡ï¼Œä¸æ˜¯ç”¨ä¸€ä¸ªä¸œè¥¿ synchronized å’Œ ReentrantLock çš„åŒºåˆ« synchronized ReentrantLock æ˜¯å…³é”®å­—ï¼Œæ˜¯ JVM å±‚é¢çš„å®ç°ï¼Œé€šè¿‡æ“ä½œå¯¹è±¡å¤´ä¸­ mark word æ¥åŠ é” æ˜¯ç±»ï¼Œæ˜¯ JDK å±‚é¢çš„å®ç°ï¼Œé€šè¿‡ Unsafe ç±»çš„ park æ–¹æ³•æ¥åŠ é”ï¼Œè¿™æ˜¯ä¸¤è€…çš„æœ¬è´¨åŒºåˆ« è‡ªåŠ¨é‡Šæ”¾é” è¦æ‰‹åŠ¨é‡Šæ”¾ æ˜¯éå…¬å¹³é” å¯ä»¥è®¾ç½® ä¸èƒ½è·å–é”çŠ¶æ€ å¯ä»¥è·å–é”çš„çŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®ç­‰å¾…æ—¶é—´æ¥é¿å…æ­»é” å¯ä»¥é”æ–¹æ³•æˆ–è€…ä»£ç å¿« åªèƒ½é”ä»£ç å— volatileå…·æœ‰ä¸‰ä¸ªç‰¹æ€§ï¼š ä¿è¯å¯è§æ€§ï¼šç¨‹åºä¸­å®šä¹‰çš„å…±äº«å˜é‡å­˜åœ¨ä¸»å†…å­˜ï¼Œæ¯ä¸ªçº¿ç¨‹ä¸­çš„å˜é‡æ˜¯åœ¨å·¥ä½œå†…å­˜ä¸­æ“ä½œçš„ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹ A ä¿®æ”¹äº†ä¸»å†…å­˜ä¸­çš„ä¸€ä¸ªå…±äº«å˜é‡ï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹ B æ˜¯ä¸çŸ¥é“è¿™ä¸ªå˜é‡å·²ç»è¢«ä¿®æ”¹äº†ï¼Œå› ä¸ºçº¿ç¨‹ä¹‹é—´çš„å·¥ä½œå†…å­˜æ˜¯äº’ç›¸ä¸å¯è§çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ volatile çš„ä½œç”¨å°±æ˜¯è®©çº¿ç¨‹ A å’Œ B éƒ½å¯ä»¥æ„ŸçŸ¥åˆ°å¯¹æ–¹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå½“çº¿ç¨‹ A æ›´æ–°äº†å…±äº«å˜é‡ï¼Œä¼šå°†æ•°æ®å†™å›ä¸»å†…å­˜ä¸­ï¼Œè€Œçº¿ç¨‹ B æ¯æ¬¡å»è¯»å…±äº«å˜é‡æ—¶å»ä¸»å†…å­˜ä¸­è¯»å–ï¼Œè¿™æ ·å°±ä¿è¯äº†çº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ã€‚è¿™ç§ä¿è¯å¯è§æ€§çš„æœºåˆ¶æ˜¯å†…å­˜å±éšœï¼ˆmemory barrierï¼‰ï¼š Load Barrierï¼šè¯»å±éšœ Store Barrierï¼šå†™å±éšœ å†…å­˜å±éšœæœ‰ä¸¤ä¸ªä½œç”¨ï¼š ç¦æ­¢å±éšœä¸¤ä¾§çš„æŒ‡ä»¤é‡æ’åºä¼˜åŒ– å¼ºåˆ¶æŠŠç¼“å­˜ä¸­çš„è„æ•°æ®å†™å›ä¸»å†…å­˜ï¼Œå¹¶è®©ç¼“å­˜ä¸­çš„æ•°æ®å¤±æ•ˆï¼ˆè¿™ä¸å°±æ˜¯ MySQL å’Œ Redis é‚£ä¸€å¥—ï¼‰ ä¸ä¿è¯å¤åˆæ“ä½œçš„åŸå­æ€§ï¼šæ‰€è°“åŸå­æ€§ï¼Œå°±æ˜¯è¯´ä¸€ä¸ªæ“ä½œä¸å¯è¢«åˆ†å‰²ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚Java åªä¿è¯äº†åŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡å’Œèµ‹å€¼æ“ä½œæ˜¯åŸå­æ€§çš„ï¼ˆåœ¨ 32 ä½çš„ JDK ç¯å¢ƒä¸‹ï¼Œå¯¹ 64 ä½æ•°æ®çš„è¯»å–ä¸æ˜¯åŸå­æ€§æ“ä½œï¼‰ ç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼ˆæœ‰åºæ€§ï¼‰ï¼šæœ‰åºæ€§æŒ‡ç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¤„ç†å™¨ä¸ºäº†æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡ï¼Œå¯èƒ½ä¼šå¯¹è¾“å…¥çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œå®ƒä¸ä¿è¯ç¨‹åºä¸­æ¯ä¸ªè¯­å¥çš„æ‰§è¡Œå…ˆåé¡ºåºåŒä»£ç ä¸­çš„æ•°æ®ä¸€ç›´ï¼Œä½†æ˜¯å®ƒä¼šä¿è¯ç¨‹åºæœ€ç»ˆæ‰§è¡Œç»“æœå’Œä»£ç é¡ºåºæ‰§è¡Œçš„ç»“æœæ˜¯ä¸€è‡´çš„ã€‚è¦è¿›è¡Œé‡æ’åºï¼Œéœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œç¨‹åºè¿è¡Œçš„ç»“æœä¸èƒ½æ”¹å˜ å¦‚æœæ•°æ®å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œä¸å…è®¸é‡æ’åº volatile çš„ä½¿ç”¨åœºæ™¯ï¼š åŒé‡æ£€æµ‹å•ä¾‹ ç«‹ flag synchronized å’Œ volatile çš„åŒºåˆ« volatile synchronized åªèƒ½ä¿®é¥°å˜é‡ å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€ä»£ç å¿« ä»…èƒ½å®ç°å˜é‡çš„ä¿®æ”¹å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’ŒåŸå­æ€§ ä¸ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ å¯èƒ½ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"Netty","slug":"Netty","permalink":"https://linweiyuan.github.io/tags/Netty/"},{"name":"NIO","slug":"NIO","permalink":"https://linweiyuan.github.io/tags/NIO/"}]},{"title":"String, StringBuffer, StringBuilder","slug":"String-StringBuffer-StringBuilder","date":"2020-12-28T13:17:54.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2020/12/28/String-StringBuffer-StringBuilder.html","link":"","permalink":"https://linweiyuan.github.io/2020/12/28/String-StringBuffer-StringBuilder.html","excerpt":"","text":"String æ˜¯ final çš„ï¼Œæ¯æ¬¡æ“ä½œéƒ½ä¼šäº§ç”Ÿæ–°çš„ String StringBuffer å’Œ StringBuilder éƒ½æ˜¯åœ¨åŸå¯¹è±¡åŸºç¡€ä¸Šæ“ä½œ StringBuffer çº¿ç¨‹å®‰å…¨ï¼ˆå†…éƒ¨é‡‡ç”¨ synchronized æ¥å®ç°ï¼‰ï¼ŒStringBuilder çº¿ç¨‹ä¸å®‰å…¨ æ€§èƒ½ï¼šStringBuilder &gt; StringBuffer &gt; String ä¼˜å…ˆä½¿ç”¨ StringBuilderï¼Œå¤šçº¿ç¨‹å…±äº«å˜é‡æ—¶ä½¿ç”¨ StringBuffer","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"}]},{"title":"hashCode()å’Œequals()","slug":"hashCode-å’Œequals","date":"2020-12-25T12:04:41.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2020/12/25/hashCode-å’Œequals.html","link":"","permalink":"https://linweiyuan.github.io/2020/12/25/hashCode-%E5%92%8Cequals.html","excerpt":"","text":"ä»¥ HashSet ä¸ºä¾‹ï¼Œå› ä¸º hash ç®—æ³•ç›¸å¯¹æ¥è¯´æ¯”è¾ƒé«˜æ•ˆï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡ hashCode ä¸ä¸€æ ·ï¼Œåˆ™è¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œçœå»äº†éå† set é€ä¸ªå¯¹æ­¤æ˜¯å¦ç›¸åŒ å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™ hashCode ä¸€æ ·ï¼Œè°ƒç”¨ equals å¯¹æ¯”ä¸º true ä½†æ˜¯åè¿‡æ¥å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„ hashCode ç›¸ç­‰ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡åˆ™ä¸ä¸€å®šç›¸åŒï¼ˆhash å†²çªï¼‰ï¼Œéœ€è¦å†é€šè¿‡ equals è¿›ä¸€æ­¥åˆ¤æ–­ å¦‚æœé‡å†™äº† equalsï¼Œä¹Ÿè¦é‡å†™ hashCodeï¼Œå› ä¸ºæœ‰å¯èƒ½å‡ºç°ä¸¤ä¸ªå¯¹è±¡å†…å®¹ç›¸ç­‰ä½†æ˜¯åœ°å€ä¸ç›¸åŒçš„æƒ…å†µï¼Œå­˜æ”¾ä¹Ÿä¼šé€ æˆé‡å¤ å› æ­¤: hashCode() ç”¨æ¥åœ¨æœ€å¿«æ—¶é—´å†…åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œå¹¶å®šä½ç´¢å¼•ä½ç½®ï¼Œä½†å¯èƒ½å‡ºç°è¯¯å·®ï¼Œç”¨æ¥ä¿è¯æ•ˆç‡ equals() ç”¨æ¥ä¿è¯å¯é ","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"}]},{"title":"Finalä¿®é¥°ç¬¦","slug":"Finalä¿®é¥°ç¬¦","date":"2020-12-20T13:16:07.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2020/12/20/Finalä¿®é¥°ç¬¦.html","link":"","permalink":"https://linweiyuan.github.io/2020/12/20/Final%E4%BF%AE%E9%A5%B0%E7%AC%A6.html","excerpt":"","text":"ä¿®é¥°ç±»ï¼šä¸å¯ç»§æ‰¿ ä¿®é¥°æ–¹æ³•ï¼šä¸å¯é‡å†™ï¼Œä½†å¯é‡è½½ ä¿®é¥°å˜é‡ï¼šä¸€æ—¦è¢«èµ‹å€¼åˆ™ä¸èƒ½å†æ›´æ”¹ï¼ˆæ•°ç»„ä¸èƒ½å†èµ‹å€¼ï¼Œä½†æ˜¯é‡Œé¢çš„å€¼æ˜¯å¯å˜çš„ï¼‰ ä¸ºä»€ä¹ˆå†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®å±€éƒ¨ final å˜é‡ï¼Ÿå½“å¤–éƒ¨ç±»çš„æ–¹æ³•ç»“æŸæ—¶ï¼Œå¤–éƒ¨ç±»çš„å±€éƒ¨å˜é‡ç†åº”é”€æ¯äº†ï¼Œä½†æ˜¯å†…éƒ¨ç±»å¯èƒ½è¿˜å­˜åœ¨ï¼ˆæ¯”å¦‚çº¿ç¨‹è¿˜åœ¨è·‘ï¼‰ï¼Œæ­¤æ—¶å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»çš„å˜é‡ï¼Œå°±ä¼šå‡ºç°çŸ›ç›¾ï¼Œè¿™ä¸ªå˜é‡ä¸å­˜åœ¨ï¼Œæ‰€ä»¥å°±è¦æŠŠå¤–éƒ¨ç±»çš„å˜é‡å¤åˆ¶ä¸€ä»½åˆ°å†…éƒ¨ç±»ï¼Œç»™å®ƒä½¿ç”¨ï¼Œä½†æ˜¯ï¼Œä¸èƒ½è®©è¿™ä¸ªå˜é‡åœ¨å†…éƒ¨ç±»ä¸­è¢«ä¿®æ”¹åï¼Œå½±å“åˆ°å¤–éƒ¨ç±»ï¼Œå¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥åªèƒ½æ˜¯ final æˆ–è€…å¯ä»¥ç”¨å¦ä¸€ç§æ–¹æ³•ï¼Œåˆ©ç”¨åŸå­ç±»çš„ CAS ç‰¹æ€§æ¥è®¾ç½®å˜é‡å€¼","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"}]},{"title":"==å’Œequals","slug":"==å’Œequals","date":"2020-11-03T13:13:34.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2020/11/03/==å’Œequals.html","link":"","permalink":"https://linweiyuan.github.io/2020/11/03/==%E5%92%8Cequals.html","excerpt":"","text":"&#x3D;&#x3D; å¯¹æ¯”çš„æ˜¯æ ˆä¸­çš„å€¼ å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ ˆä¸­å­˜å˜é‡å€¼ï¼›å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œæ ˆä¸­å­˜çš„æ˜¯å †ä¸­å†…å­˜å¯¹è±¡çš„åœ°å€ Object çš„ equals ä¹Ÿæ˜¯ç”¨ &#x3D;&#x3D; å¯¹æ¯” 123public boolean equals(Object obj) &#123; return (this == obj);&#125; String ç»§æ‰¿ Objectï¼Œä¸ºä»€ä¹ˆ String çš„ equals èƒ½å¯¹æ¯”åˆ°å®é™…çš„å€¼ï¼Ÿ å› ä¸º String çš„ equals é‡å†™äº†ï¼Œé¦–å…ˆåˆ¤æ–­æ ˆä¸­åœ°å€æ˜¯å¦ç›¸ç­‰ï¼Œä¸æƒ³ç­‰åˆ™è¿›ä¸€æ­¥åˆ¤æ–­å­—ç¬¦ä¸²å†…å®¹ 12345678910111213public boolean equals(Object anObject) &#123; if (this == anObject) &#123; return true; &#125; if (anObject instanceof String) &#123; String aString = (String)anObject; if (coder() == aString.coder()) &#123; return isLatin1() ? StringLatin1.equals(value, aString.value) : StringUTF16.equals(value, aString.value); &#125; &#125; return false;&#125;","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"}]},{"title":"åˆ†å¸ƒå¼Sessionçš„å‡ ç§å®ç°æ–¹å¼","slug":"åˆ†å¸ƒå¼Sessionçš„å‡ ç§å®ç°æ–¹å¼","date":"2020-10-01T09:01:37.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2020/10/01/åˆ†å¸ƒå¼Sessionçš„å‡ ç§å®ç°æ–¹å¼.html","link":"","permalink":"https://linweiyuan.github.io/2020/10/01/%E5%88%86%E5%B8%83%E5%BC%8FSession%E7%9A%84%E5%87%A0%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F.html","excerpt":"","text":"åŒ…æ‹¬ä½†ä¸é™äºï¼š ç²˜æ€§ Sessionæ¯æ¬¡è¯·æ±‚éƒ½ä¼šè½¬å‘åˆ°æŒ‡å®šçš„æœºå™¨ï¼Œæ¯”å¦‚ Nginx çš„ ip_hashï¼Œå°†ç”¨æˆ·å’Œæœºå™¨ç»‘å®šèµ·æ¥ï¼Œé€ æˆå•æœºçš„æ•ˆæœï¼Œå®ç°èµ·æ¥è¾ƒä¸ºç®€å•ï¼Œåªéœ€åŠ ä¸€äº›é¢å¤–çš„é…ç½® ä½†æ˜¯è¿™ç§æ–¹å¼æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œä¸€æ—¦å½“å‰æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œç”¨æˆ·ä¼šè¢«è½¬å‘åˆ°å…¶ä»–æœåŠ¡å™¨ä¸Šï¼ŒSession ä¿¡æ¯å°±ä¼šä¸¢å¤± Session å¤åˆ¶è¿™ç§æ–¹å¼éœ€è¦æœåŠ¡å™¨çš„æ”¯æŒï¼Œæ¯å½“ Session å‘ç”Ÿæ”¹å˜ï¼Œè¯¥èŠ‚ç‚¹å°±ä¼šè‡ªåŠ¨å°† Session å†…å®¹å¹¿æ’­ç»™å…¶ä»–èŠ‚ç‚¹ å› æ­¤å¯¹æœåŠ¡å™¨çš„å¸¦å®½æœ‰ä¸€å®šçš„å ç”¨ï¼Œå¦‚æœæ•°æ®é‡è¿‡å¤šï¼Œå¯èƒ½ä¼šå¯¹è¯·æ±‚çš„å“åº”é€ æˆä¸€å®šçš„å½±å“ Session å…±äº«å¯ä»¥å°† Session ä¿¡æ¯å­˜å…¥ Redis ç¼ºç‚¹å°±æ˜¯æ¯æ¬¡å¼•å…¥ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶ï¼Œéƒ½è¦è€ƒè™‘å¯é æ€§é—®é¢˜ï¼ŒæŒ‚äº†æ€ä¹ˆåŠ Session æŒä¹…åŒ–åˆ°æ•°æ®åº“æŒä¹…åŒ– Session æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯å½“æœåŠ¡å™¨å‘ç”Ÿæ•…éšœçš„æ—¶å€™ï¼ŒSession ä¸ä¼šä¸¢å¤± ç¼ºç‚¹å°±æ˜¯ç»™æ•°æ®åº“é€ æˆäº†é¢å¤–çš„è´Ÿæ‹… Cookieå°†æ•°æ®æ”¾åœ¨ Cookie é‡Œï¼Œå®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å• åªæ˜¯æ•°æ®æ”¾åœ¨æµè§ˆå™¨é‡Œæ˜¯ä¸å®‰å…¨çš„ï¼Œä¸èƒ½æ”¾æ•æ„Ÿæ•°æ®","categories":[{"name":"æ¶æ„è®¾è®¡","slug":"æ¶æ„è®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://linweiyuan.github.io/tags/Redis/"},{"name":"Session","slug":"Session","permalink":"https://linweiyuan.github.io/tags/Session/"},{"name":"Cookie","slug":"Cookie","permalink":"https://linweiyuan.github.io/tags/Cookie/"}]},{"title":"å¦‚ä½•ç”Ÿæˆåˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€å”¯ä¸€ID","slug":"å¦‚ä½•ç”Ÿæˆåˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€å”¯ä¸€ID","date":"2020-09-10T08:43:10.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2020/09/10/å¦‚ä½•ç”Ÿæˆåˆ†å¸ƒå¼ç³»ç»Ÿå…¨å±€å”¯ä¸€ID.html","link":"","permalink":"https://linweiyuan.github.io/2020/09/10/%E5%A6%82%E4%BD%95%E7%94%9F%E6%88%90%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%85%A8%E5%B1%80%E5%94%AF%E4%B8%80ID.html","excerpt":"","text":"æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ç§ UUIDRedisåˆ©ç”¨ INCR å‘½ä»¤ï¼ŒINCR å‘½ä»¤æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼ŒRedis åˆæ˜¯å•çº¿ç¨‹ MongoDBåˆ©ç”¨ ObjectIdï¼ŒObjectId ç”± 4 éƒ¨åˆ†ç»„æˆï¼ˆæ—¶é—´æˆ³ï¼Œæœºå™¨æ ‡è¯†ç¬¦ï¼Œè¿›ç¨‹ IDï¼Œè‡ªå¢è®¡æ•°å™¨ï¼‰ åªèƒ½è¯´é‡å¤çš„æ¦‚ç‡å¯ä»¥å¿½ç•¥ä¸è®¡ ZooKeeperå¯ä»¥åˆ©ç”¨ ZooKeeper çš„é¡ºåºèŠ‚ç‚¹æ¥å®Œæˆï¼Œå½“åˆ›å»ºé¡ºåºèŠ‚ç‚¹æ—¶ï¼ŒZooKeeper ä¼šæ ¹æ®åˆ›å»ºçš„æ—¶é—´é¡ºåºï¼Œåœ¨èŠ‚ç‚¹åç§°åé¢æ·»åŠ  10 ä½çš„é¡ºåºç¼–å· Snowflakeæ¨ç‰¹çš„é›ªèŠ±ç®—æ³•ï¼Œè¶‹åŠ¿é€’å¢ï¼Œä¸€èˆ¬ä¸ä¼šé‡å¤ï¼Œé™¤éä¿®æ”¹ç³»ç»Ÿæ—¶é—´","categories":[{"name":"æ¶æ„è®¾è®¡","slug":"æ¶æ„è®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://linweiyuan.github.io/tags/Redis/"},{"name":"UUID","slug":"UUID","permalink":"https://linweiyuan.github.io/tags/UUID/"},{"name":"MongoDB","slug":"MongoDB","permalink":"https://linweiyuan.github.io/tags/MongoDB/"},{"name":"ZooKeeper","slug":"ZooKeeper","permalink":"https://linweiyuan.github.io/tags/ZooKeeper/"},{"name":"Snowflake","slug":"Snowflake","permalink":"https://linweiyuan.github.io/tags/Snowflake/"}]},{"title":"KotlinåŠ¨æ€ä»£ç†","slug":"KotlinåŠ¨æ€ä»£ç†","date":"2020-08-27T19:59:12.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2020/08/27/KotlinåŠ¨æ€ä»£ç†.html","link":"","permalink":"https://linweiyuan.github.io/2020/08/27/Kotlin%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86.html","excerpt":"","text":"1method!!.invoke(obj, *(args ?: emptyArray())) ç›¸æ¯”ä¹‹ä¸‹Javaçš„æ–¹å¼ 1method.invoke(obj, args);","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://linweiyuan.github.io/tags/Kotlin/"}]},{"title":"JDK1.8æ–°ç‰¹æ€§","slug":"JDK1-8æ–°ç‰¹æ€§","date":"2020-07-14T08:35:31.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2020/07/14/JDK1-8æ–°ç‰¹æ€§.html","link":"","permalink":"https://linweiyuan.github.io/2020/07/14/JDK1-8%E6%96%B0%E7%89%B9%E6%80%A7.html","excerpt":"","text":"å…¶å®è¿™ä¸ªæ—¶é—´ç‚¹è¿˜æ¥è°ˆ JDK 1.8 çš„æ–°ç‰¹æ€§æ˜¯æœ‰ç‚¹ä¸åˆæ—¶å®œçš„ï¼Œæ¯•ç«Ÿ JDK éƒ½å‡ºåˆ°å‡ äº†ï¼Œä½†æ˜¯åœ¨å¤§ç¯å¢ƒä¸‹ï¼ˆå›½å†…ï¼Œå›½å¤–ä¸çŸ¥é“ï¼‰ï¼Œåªè¦ Spring ä¸å‡ºè‡´å‘½æ¼æ´ï¼ŒJDK 1.8 åœ¨ 2026 å¹´ä¹‹å‰è¿˜æ˜¯ä¸»æµï¼Œæ¯•ç«Ÿè°æ²¡äº‹å»é‡æ„è€ç³»ç»Ÿï¼Œæ–°ç³»ç»Ÿå¼€å‘å¯é‡ä¸å¯æ±‚ å‡½æ•°å¼ç¼–ç¨‹ &#x2F; lambdaæ¯”å¦‚è·å–æœ€å°å€¼çš„å®ç°æ–¹å¼ä¹‹å‰ï¼Œå•°å—¦ 12345678int[] a = &#123;0, 1, 2, 3, -1, -2, 10&#125;;int min = Integer.MAX_VALUE;for (int i : a) &#123; if (i &lt; min) &#123; min = i; &#125;&#125;System.out.println(min); ä¹‹å 1System.out.println(IntStream.of(a).min().getAsInt()); å‡½æ•°æ¥å£1@FunctionalInterface åªèƒ½æœ‰ä¸€ä¸ªå¾…å®ç°çš„æ–¹æ³•ï¼ˆå¯æœ‰å¾ˆå¤šé»˜è®¤æ–¹æ³•ï¼‰ å‡½æ•°å¼ç¼–ç¨‹å¯é“¾å¼è°ƒç”¨ æ¥å£ è¾“å…¥å‚æ•° è¿”å›ç±»å‹ è¯´æ˜ Predicate T boolean æ–­è¨€ Consumer T æ—  æ¶ˆè´¹ä¸€ä¸ªæ•°æ® Function&lt;T, R&gt; T R è¾“å…¥ T è¾“å‡º R çš„å‡½æ•° Supplier æ—  T æä¾›ä¸€ä¸ªæ•°æ® UnaryOperator T T ä¸€å…ƒå‡½æ•°ï¼ˆè¾“å…¥è¾“å‡ºç±»å‹ç›¸åŒï¼‰ BiFunction&lt;T, U, R&gt; (T, U) R 2 ä¸ªè¾“å…¥ç›¸åŒçš„å‡½æ•° BinaryOperator (T, T) T äºŒå…ƒå‡½æ•°ï¼ˆè¾“å…¥è¾“å‡ºç±»å‹ç›¸åŒï¼‰ åŸºæœ¬æ•°æ®ç±»å‹çš„æ¼”å˜ Predicate -&gt; IntPredicateï¼Œå…¶ä»–çš„ç±»ä¼¼ æ–¹æ³•å¼•ç”¨éé™æ€æ–¹æ³•ï¼Œä½¿ç”¨å¯¹è±¡çš„å®ä¾‹æ¥å¼•ç”¨ ä½¿ç”¨ç±»åæ¥è®¿é—®ï¼Œå› ä¸º JDK è‡ªå¸¦äº†ç¬¬ä¸€ä¸ªå‚æ•°åœ¨æ–¹æ³•é‡Œï¼Œå†…å®¹æ˜¯ thisï¼ˆä¸æ˜¾ç¤ºï¼‰ï¼Œæ‰€ä»¥ç”¨ BiFunction 1Consumer&lt;String&gt; consumer = System.out::println; æ„é€ å‡½æ•°çš„æ–¹æ³•å¼•ç”¨ Java æ˜¯å€¼ä¼ é€’ ç±»å‹æ¨æ–­å˜é‡å¼•ç”¨JDK 1.8 ä¹‹å‰ï¼ŒåŒ¿åå‡½æ•°å†…éƒ¨è®¿é—®å¤–éƒ¨çš„å˜é‡ï¼Œå¤–éƒ¨å˜é‡è¦ä¸º finalï¼›lambda åˆ™å¯ä¸å†™ finalï¼ˆä½†å˜é‡ä¸èƒ½æ”¹ï¼Œå¦åˆ™ç¼–è¯‘å‡ºé”™ï¼‰ Stream æµç¼–ç¨‹ å¤–éƒ¨è¿­ä»£ï¼šfori å†…éƒ¨è¿­ä»£ï¼šå¹¶è¡Œæµ","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"}]},{"title":"ç¼“å­˜å’Œæ•°æ®åº“ä¸€è‡´æ€§çš„ä¿éšœæ–¹æ¡ˆ","slug":"ç¼“å­˜å’Œæ•°æ®åº“ä¸€è‡´æ€§çš„ä¿éšœæ–¹æ¡ˆ","date":"2020-06-07T08:02:32.000Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"2020/06/07/ç¼“å­˜å’Œæ•°æ®åº“ä¸€è‡´æ€§çš„ä¿éšœæ–¹æ¡ˆ.html","link":"","permalink":"https://linweiyuan.github.io/2020/06/07/%E7%BC%93%E5%AD%98%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%80%E8%87%B4%E6%80%A7%E7%9A%84%E4%BF%9D%E9%9A%9C%E6%96%B9%E6%A1%88.html","excerpt":"","text":"ä¸šç•Œæµè¡Œçš„æœ‰ä¸‹é¢å‡ ç§ï¼Œä¸èƒ½è¯´å­°ä¼˜å­°åŠ£ï¼Œåªèƒ½å…·ä½“é—®é¢˜å…·ä½“åˆ†æï¼Œè½¯ä»¶å¼€å‘æ²¡æœ‰é“¶å¼¹ åŒæ­¥åˆ é™¤åŒæ­¥åˆ é™¤è¯´æ˜äº†æ˜¯åŒæ­¥ï¼Œæ‰€ä»¥æµç¨‹çš„å¤„ç†å°±æ˜¯ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå…ˆæ›´æ–°æ•°æ®åº“çš„æ•°æ®ï¼Œå†å¯¹ç¼“å­˜è¿›è¡Œåˆ é™¤ æ²¡æœ‰é—®é¢˜å—ï¼Ÿ å‡å¦‚å¹¶å‘åœºæ™¯ä¸‹ï¼Œæœ‰ä¸¤æ¡çº¿ç¨‹ï¼Œä¸€æ¡çº¿ç¨‹æŸ¥è¯¢äº†æ•°æ®åº“ï¼Œè¿˜æ²¡æ¥å¾—åŠå†™ç¼“å­˜ï¼Œä½†æ˜¯å¦ä¸€æ¡çº¿ç¨‹æ›´æ–°äº†è¿™æ¡æ•°æ®åº“è®°å½•ï¼Œå¹¶å®Œæˆäº†å†™ç¼“å­˜æ“ä½œï¼Œè¿™æ—¶åŸæ¥çš„çº¿ç¨‹å†å›è¿‡å¤´æ¥å†™ç¼“å­˜ï¼Œå°±ä¼šæœ‰è„æ•°æ® åˆå‡å¦‚æœ¬æ¥æ˜¯åº”è¯¥åœ¨ API é‡Œè¿›è¡Œæ•°æ®çš„æ›´æ–°çš„ï¼Œä½†æ˜¯æœ‰äººç›´æ¥è¿ä¸Šæ•°æ®åº“è¿›è¡Œ updateï¼Œè¿™æ ·æ•°æ®åº“çš„æ•°æ®æ˜¯è¢«åˆ æ‰äº†ï¼Œä½†æ˜¯åœ¨ API çš„å±‚é¢å¹¶ä¸çŸ¥é“ï¼Œæ‰€ä»¥ç¼“å­˜ä¸­çš„æ•°æ®è¿˜æ˜¯æ—§çš„ å†åŠ å…¥åŒæ­¥åˆ é™¤è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸äº†ï¼Œä¹Ÿä¼šå­˜åœ¨è„æ•°æ®é—®é¢˜ å»¶æ—¶åŒåˆ å»¶æ—¶åŒåˆ é¡¾åæ€ä¹‰å°±æ˜¯å»¶æ—¶ + åŒåˆ ï¼Œå…ˆåˆ ä¸€æ¬¡ç¼“å­˜ï¼Œæ¥ç€æ›´æ–°æ•°æ®åº“ï¼Œä¼‘çœ æ¯«ç§’çº§çš„æ—¶é—´ï¼Œå†åˆ ä¸€æ¬¡ç¼“å­˜ æ²¡æœ‰é—®é¢˜å—ï¼Ÿ åˆ°åº•è¦ä¼‘çœ å¤šä¹…ï¼Œè¿™ä¸ªè¦çœ‹å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚ æ•°æ®åº“ä¸»ä»æ¶æ„ä¸‹ï¼Œå†™ä¸»åº“ï¼Œæ•°æ®åŒæ­¥åˆ°ä»åº“éœ€è¦ä¸€å®šçš„æ—¶é—´ï¼Œä¸èƒ½ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œä¸‡ä¸€åŒåˆ åæ•°æ®è¿˜æ²¡åŒæ­¥å®Œæˆï¼Œæ­¤æ—¶æœ‰è¯·æ±‚è¿‡æ¥äº†ï¼Œå°±ç¼“å­˜äº†æ—§æ•°æ® ç›‘å¬ binlogç›‘å¬ binlog å…¶å®è§£å†³äº†åŒæ­¥åˆ é™¤çš„åœºæ™¯ä¸‹ï¼Œé€šè¿‡ API å¤–æ“ä½œæ•°æ®åº“çš„é—®é¢˜ æ¯”å¦‚ç”¨ Canalï¼Œåªè¦ä½ æ›´æ–°æ•°æ®åº“ï¼Œæ— è®ºä½ æ˜¯æ­£å¸¸è¯·æ±‚ API æ›´æ–°ï¼Œè¿˜æ˜¯ç›´æ¥è¿æ•°æ®åº“ï¼Œéƒ½èƒ½ç›‘å¬åˆ°ï¼Œç„¶åå°±èƒ½å¯¹ç¼“å­˜è¿›è¡Œåˆ é™¤ æ²¡æœ‰é—®é¢˜å—ï¼Ÿ å’Œæ¶ˆæ¯é˜Ÿåˆ—ä¸€æ ·ï¼Œè§£è€¦äº†ï¼Œååé‡æé«˜äº†ï¼Œä½†æ˜¯ä¸¥é‡ä¾èµ–ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶ï¼ŒCanal æŒ‚äº†æ€ä¹ˆåŠ","categories":[{"name":"æ¶æ„è®¾è®¡","slug":"æ¶æ„è®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://linweiyuan.github.io/tags/MySQL/"},{"name":"Redis","slug":"Redis","permalink":"https://linweiyuan.github.io/tags/Redis/"}]},{"title":"Spring Bootäº‹åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šå¤±æ•ˆ","slug":"Spring-Bootäº‹åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šå¤±æ•ˆ","date":"2020-05-01T03:58:34.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2020/05/01/Spring-Bootäº‹åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šå¤±æ•ˆ.html","link":"","permalink":"https://linweiyuan.github.io/2020/05/01/Spring-Boot%E4%BA%8B%E5%8A%A1%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E5%A4%B1%E6%95%88.html","excerpt":"","text":"Spring Boot çš„äº‹åŠ¡ç®¡ç†æ˜¯ä¾èµ– AOP çš„ï¼ŒAOP åˆä¸åå°„å’ŒåŠ¨æ€ä»£ç†å…³ç³»å¯†ä¸å¯åˆ†ï¼Œæ‰€ä»¥ï¼Œæœ‰ä¸‹é¢å‡ ç§æ–¹å¼ï¼ŒåŒ…æ‹¬ Spring æœ¬èº«ï¼Œæ•°æ®åº“æœ¬èº«çš„é…ç½®æ˜¯å¦åˆç† bean å¯¹è±¡æ²¡æœ‰è¢« Spring å®¹å™¨ç®¡ç† æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ä¸æ˜¯ public è‡ªèº«è°ƒç”¨ æ•°æ®æºæ²¡æœ‰é…ç½®äº‹åŠ¡ç®¡ç†å™¨ æ•°æ®åº“ä¸æ”¯æŒäº‹åŠ¡ å¼‚å¸¸è¢«æ•è· å¼‚å¸¸ç±»å‹é”™è¯¯æˆ–è€…é…ç½®é”™è¯¯","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://linweiyuan.github.io/tags/Spring-Boot/"}]},{"title":"å¾®ä¿¡å¼€å‘çš„å‘","slug":"å¾®ä¿¡å¼€å‘çš„å‘","date":"2020-04-27T08:12:13.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2020/04/27/å¾®ä¿¡å¼€å‘çš„å‘.html","link":"","permalink":"https://linweiyuan.github.io/2020/04/27/%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%E7%9A%84%E5%9D%91.html","excerpt":"","text":"å‚æ•°éƒ¨åˆ†xml, éƒ¨åˆ†json æ¥å£æ ¡éªŒé¦–æ¬¡æ ¡éªŒæ¥å£SHA-1å‚æ•°å€¼å­—å…¸åº, å…¶ä»–æ¥å£MD5å‚æ•°å€¼key, valueå­—å…¸åº å¾®ä¿¡æ”¯ä»˜ä¼ä¸šä»˜æ¬¾: å‚æ•°mch_appid, mchid, æ—è¾¹ç­¾åç®—æ³•é“¾æ¥çš„ç¤ºä¾‹æ•´ä¸ªappid, mch_idæ”¯ä»˜éªŒæ”¶æŒ‡å¼• å°±æ˜¯sandbox å‚æ•°åˆå˜æˆmch_id ä¸èƒ½è¾“å…¥éšæ„é‡‘é¢","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://linweiyuan.github.io/tags/Kotlin/"},{"name":"WeChatPay","slug":"WeChatPay","permalink":"https://linweiyuan.github.io/tags/WeChatPay/"}]},{"title":"Spring Bootè·¨åŸŸé…ç½®","slug":"Spring-Bootè·¨åŸŸé…ç½®","date":"2020-03-13T07:54:05.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2020/03/13/Spring-Bootè·¨åŸŸé…ç½®.html","link":"","permalink":"https://linweiyuan.github.io/2020/03/13/Spring-Boot%E8%B7%A8%E5%9F%9F%E9%85%8D%E7%BD%AE.html","excerpt":"","text":"å‰åç«¯è·¨åŸŸé—®é¢˜è§£å†³æ–¹æ¡ˆå¤šç§å¤šæ ·ï¼Œå‰ç«¯å¯ä»¥é€šè¿‡ä¸­é—´ä»¶è§£å†³ï¼Œå› ä¸ºè·¨åŸŸå‘ç”Ÿåœ¨æµè§ˆå™¨çš„ XHR ä¸­ï¼Œæ™®é€šçš„ HTTP è¯·æ±‚æ˜¯æ­£å¸¸çš„ å¦ä¸€ç§æ˜¯åœ¨ç½‘å…³é‚£é‡Œè¿›è¡Œé…ç½®ï¼Œæ¯”å¦‚åˆ©ç”¨ Nginx åšåå‘ä»£ç†æˆ–è€…è´Ÿè½½å‡è¡¡ï¼Œå¯ä»¥åœ¨ Nginx ä¸Šé¢é…ç½®å¯¹åº”çš„å“åº”å¤´ å¦‚æœè¦åœ¨ API çš„å±‚é¢è¿›è¡Œé…ç½®ï¼ŒSpring Boot æä¾›äº†å¤šç§æ–¹å¼ï¼Œä¸‹é¢æ˜¯å…¶ä¸­ä¸€ç§ 1234567891011@Configurationpublic class CorsConfig implements WebMvcConfigurer &#123; @Override public void addCorsMappings(CorsRegistry registry) &#123; registry.addMapping(&quot;/**&quot;) .allowedOrigins(&quot;*&quot;) .allowCredentials(true) .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;) .maxAge(3600); &#125;&#125;","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://linweiyuan.github.io/tags/Spring-Boot/"},{"name":"CORS","slug":"CORS","permalink":"https://linweiyuan.github.io/tags/CORS/"}]},{"title":"Dockerç›¸å…³çŸ¥è¯†ç‚¹","slug":"Dockerç›¸å…³çŸ¥è¯†ç‚¹","date":"2020-02-12T06:44:54.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2020/02/12/Dockerç›¸å…³çŸ¥è¯†ç‚¹.html","link":"","permalink":"https://linweiyuan.github.io/2020/02/12/Docker%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9.html","excerpt":"","text":"å®¹å™¨å’Œè™šæ‹Ÿæœºçš„æ¯”è¾ƒ ç‰¹æ€§ å®¹å™¨ è™šæ‹Ÿæœº å¯åŠ¨é€Ÿåº¦ ç§’çº§ åˆ†é’Ÿçº§ æ€§èƒ½ æ¥è¿‘åŸç”Ÿ è¾ƒå¼± å†…å­˜ä»£ä»· å¾ˆå° è¾ƒå¤š ç¡¬ç›˜ä½¿ç”¨ ä¸€èˆ¬ä¸º MB ä¸€èˆ¬ä¸º GB è¿è¡Œå¯†åº¦ å•æœºæ”¯æŒä¸Šåƒä¸ªå®¹å™¨ ä¸€èˆ¬å‡ åä¸ª éš”ç¦»æ€§ å®Œå…¨éš”ç¦» å®Œå…¨éš”ç¦» è¿ç§»æ€§ ä¼˜ç§€ ä¸€èˆ¬ é•œåƒè‡ªèº«æ˜¯åªè¯»çš„ï¼Œå®¹å™¨ä»é•œåƒå¯åŠ¨çš„æ—¶å€™ï¼Œä¼šåœ¨é•œåƒçš„æœ€ä¸Šå±‚åˆ›å»ºä¸€ä¸ªå¯å†™å±‚ Dockerfiledockerfile ä¸€èˆ¬æ ¼å¼ 12345678FROMENVRUNADDï¼ˆè‡ªåŠ¨è§£å‹ï¼‰COPYï¼ˆä¸è‡ªåŠ¨è§£å‹ï¼‰EXPOSECMDENTRYPOINT .dockerignore å¿½ç•¥ build çš„å†…å®¹ åŸºç¡€é•œåƒ alpineapk â€“update add â€“no-cache è¿™æ ·å¯ä»¥å¤§å¹…åº¦å‡å°‘æ„å»ºå‡ºæ¥çš„ docker é•œåƒçš„å¤§å° ç¥ç§˜é•œåƒ scratchå…¶å®è¿™ä¸ªé•œåƒä½ å»æ‹‰æ˜¯ä¼šæŠ¥é”™çš„ï¼Œæ›´å¤šçš„æ˜¯ä¸€ç§ç±»ä¼¼çº¦å®šçš„ä¸œè¥¿ï¼Œå‘Šè¯‰ Dockerï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ä¸ªç©ºçš„ä¸œè¥¿ 1FROM scratch åŸºæœ¬æ¦‚å¿µdocker æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª C&#x2F;S æ¶æ„ docker æœåŠ¡ç«¯ unix://var/run/docker.socket å¦‚æœè¦ä»¥ç«¯å£çš„æ–¹å¼æš´éœ²ï¼Œåˆ™éœ€è¦ä¿®æ”¹æ‰§è¡Œå‘½ä»¤ï¼Œè®¾ç½®åœ°å€å’Œç«¯å£ï¼Œæ¯”å¦‚ docker daemon -H 0.0.0.0:1234 å®¢æˆ·ç«¯å¦‚æœè¦è¿æ¥ä¸åŒçš„æœåŠ¡ç«¯ï¼Œä¹Ÿéœ€è¦é¢å¤–æŒ‡å®šï¼Œæ¯”å¦‚ docker -H tcp://127.0.0.1:1234 version å‘½ä»¤ ip addr show docker0 èƒ½çœ‹åˆ° docker ç½‘å¡çš„ç›¸å…³ä¿¡æ¯ docker registry å¯ä»¥é…ç½® hooks é€šçŸ¥ï¼ˆpull or pushï¼‰ docker ç¬¬ä¸‰æ–¹å®‰å…¨æ£€æµ‹å·¥å…·ï¼š docker -&gt; docker bench CoreOS -&gt; clair å®¹å™¨é‡Œçš„ç½‘ç»œ eth0 &lt;-&gt; docker0 ç½‘æ¡¥ä¸Šçš„ vethXXXï¼ˆveth pairï¼Œå½“æ•°æ®åŒ…å‘é€åˆ°ä¸€ä¸ªæ¥å£æ—¶å¦å¤–ä¸€ä¸ªæ¥å£ä¹Ÿå¯ä»¥æ¥æ”¶åˆ°ç›¸åŒçš„æ•°æ®åŒ…ï¼‰ docker çš„ link ä¸»è¦æ˜¯æ·»åŠ ä¸€ä¸ªæ‰€è¿æ¥å®¹å™¨çš„ä¸»æœºååˆ°å®¹å™¨å†…çš„&#x2F;etc&#x2F;hosts æ–‡ä»¶ä¸­ æŸ¥çœ‹ docker ç½‘ç»œä¿¡æ¯ docker network ls docker ç½‘ç»œåˆ†ä¸‰ç§ï¼šnullã€hostã€bridge etcdç®€å•: RESTful æ¥å£å®‰å…¨: åŸºäº HTTPSå¿«é€Ÿ: æ”¯æŒæ¯ç§’ 1000 ä¸ªå†™æ“ä½œå¯é : åŸºäº Raft ç®—æ³• èŠ‚ç‚¹ä¸ªæ•°æ¨èä¸ºå¥‡æ•°ä¸ªï¼Œæœ€å°‘ä¸º 3 ä¸ª è¶Šå¤šèŠ‚ç‚¹èƒ½æä¾›æ›´å¤šçš„å†—ä½™æ€§ï¼Œä½†ä¼šå¸¦æ¥å†™æ•°æ®æ€§èƒ½çš„ä¸‹é™ Docker Swarmdocker swarm ä¹Ÿæ”¯æŒè°ƒåº¦ï¼Œäº²å’Œæ€§è¿™äº› k8s çš„æ¦‚å¿µ KubernetesPod ä¸ºä»€ä¹ˆä¸èƒ½é€šè¿‡ IP è®¿é—®ï¼Ÿ å› ä¸º Pod éšæ—¶å¯èƒ½ä¼šå‘ç”Ÿæ•…éšœï¼Œé‡å¯åå¯èƒ½ä¼šè¢«è°ƒåº¦åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šï¼ŒIP åœ°å€å°±ä¼šæ”¹å˜ é€šè¿‡ Service æ¥è®¿é—®ï¼ŒService è¢«åˆ›å»ºåï¼Œä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ª Cluster IPï¼ŒåŸºäº kube-proxy å®ç° kube-proxy ç»´æŠ¤èŠ‚ç‚¹ä¸Šçš„ç½‘ç»œè§„åˆ™ï¼Œä½œç”¨æ˜¯ä½¿å‘å¾€ Service çš„æµé‡ï¼ˆClusterIP + ç«¯å£ï¼‰è´Ÿè½½å‡è¡¡åˆ°æ­£ç¡®çš„åç«¯ Pod Label ä¸»è¦æ˜¯ç”¨æ¥åˆ†ç±»èµ„æºï¼Œæ¯”å¦‚ name&#x3D;nginxï¼Œrelease&#x3D;alpha|betaï¼Œæœ‰é•¿åº¦é™åˆ¶ Annotation åˆ™ä¸»è¦æ˜¯ç»™å¯¹è±¡å¢åŠ æ›´ä¸°å¯Œçš„æè¿°ä¿¡æ¯ï¼Œå¯ä»¥æ˜¯ä»»æ„çš„ï¼Œæ•°æ®é‡å¯ä»¥å¾ˆå¤§ï¼Œå¯ä»¥åŒ…å«ç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ•°æ® Namespaceç±»ä¼¼äºç§Ÿæˆ·çš„æ¦‚å¿µï¼ŒåŒä¸€ä¸ªå‘½åç©ºé—´çš„èµ„æºä¸å…è®¸é‡åï¼Œä½†ä¸åŒå‘½åç©ºé—´ä¸‹åˆ™å…è®¸ default: èµ„æºæœªæŒ‡å®šå‘½åç©ºé—´çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤å±äºè¯¥å‘½åç©ºé—´ kube-systemï¼šç”± Kubernetes è‡ªèº«åˆ›å»ºçš„èµ„æºå±äºè¯¥å‘½åç©ºé—´ä¸‹ hyperkubeï¼šæä¾›æ‰€æœ‰çš„ k8s ç»„ä»¶æ”¯æŒ etcdï¼šæä¾›æ•°æ®åº“å­˜å‚¨ pauseï¼šä¸€ä¸ªè½»é‡çº§çš„åŸºç¡€è®¾æ–½å®¹å™¨ï¼Œç”¨äºä¸ºæ¯ä¸ª Pod æå‰åˆ›å»ºå‘½åç©ºé—´ï¼Œå…¶ä»–ä»€ä¹ˆä¹Ÿä¸åš PodPod çš„åˆ›å»ºæµç¨‹ kubectl å‘½ä»¤å‘èµ·ä¸€ä¸ªåˆ›å»º Pod çš„è¯·æ±‚å»åˆ° kube-apiserver kube-apiserver å®ŒæˆåŸºæœ¬çš„éªŒè¯å’Œæˆæƒæ“ä½œï¼ŒæŠŠ Pod çš„ç›¸å…³ä¿¡æ¯å†™å…¥ etcd kube-scheduler å®šæ—¶è¯·æ±‚ kube-apiserverï¼Œç¡®å®š Pod è¦è°ƒåº¦çš„ä½ç½® kube-apiserver å†™ etcd kube-apiserver å°†ä¿¡æ¯å‘ç»™ kubelet å®Œæˆ Pod çš„åˆ›å»º kube-controller-manager å®šæ—¶è¯·æ±‚ kube-apiserverï¼Œçœ‹ Pod æ˜¯å¦æŒ‚æ‰ å„ä¸ªç»„ä»¶åŠå…¶ä½œç”¨ åç§° ä½œç”¨ etcd è®°å½•æ‰€æœ‰èŠ‚ç‚¹å’Œèµ„æºçš„çŠ¶æ€ kube-apiserver æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯å’Œå…¶ä»–ç»„ä»¶çš„è¯·æ±‚ï¼Œæ›´æ–° etcd ä¸­çš„æ•°æ® kube-scheduler è´Ÿè´£å…·ä½“çš„èµ„æºè°ƒåº¦å·¥ä½œ kube-controller-manager æä¾›æ§åˆ¶å™¨æœåŠ¡ï¼Œç›‘è§†é›†ç¾¤çš„çŠ¶æ€ï¼Œä¸€ä½†ä¸æ»¡è¶³çŠ¶æ€åˆ™é‡‡å–æ“ä½œï¼Œè®©çŠ¶æ€æ¢å¤æ­£å¸¸ kubelet è´Ÿè´£å¹²æ´» kube-proxy ç½‘ç»œè½¬å‘ï¼ˆé»˜è®¤è½®è¯¢ï¼‰","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://linweiyuan.github.io/tags/Kubernetes/"},{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"}]},{"title":"æŸç«™ç¨‹åºå’Œæ–‡ä»¶ä¸Šä¼ æ¼æ´","slug":"æŸç«™ç¨‹åºå’Œæ–‡ä»¶ä¸Šä¼ æ¼æ´","date":"2020-01-25T06:44:43.000Z","updated":"2022-11-04T01:56:25.126Z","comments":true,"path":"2020/01/25/æŸç«™ç¨‹åºå’Œæ–‡ä»¶ä¸Šä¼ æ¼æ´.html","link":"","permalink":"https://linweiyuan.github.io/2020/01/25/%E6%9F%90%E7%AB%99%E7%A8%8B%E5%BA%8F%E5%92%8C%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E.html","excerpt":"","text":"åˆ©ç”¨ç¨‹åºæ¼æ´æˆåŠŸä»¥ admin èº«ä»½ç™»å½•åå°, æ•°æ®æ³„éœ² ä»»æ„æ–‡ä»¶ç±»å‹ä¸Šä¼ , jspx å° shell Windows æ“ä½œç³»ç»Ÿ æ•°æ®åº“é…ç½®æ³„éœ²","categories":[{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://linweiyuan.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Windows","slug":"Windows","permalink":"https://linweiyuan.github.io/tags/Windows/"},{"name":"Vulnerability","slug":"Vulnerability","permalink":"https://linweiyuan.github.io/tags/Vulnerability/"},{"name":"JSPX","slug":"JSPX","permalink":"https://linweiyuan.github.io/tags/JSPX/"}]},{"title":"Ankoæ”¾å¼ƒç»´æŠ¤","slug":"Ankoæ”¾å¼ƒç»´æŠ¤","date":"2019-12-02T13:13:54.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2019/12/02/Ankoæ”¾å¼ƒç»´æŠ¤.html","link":"","permalink":"https://linweiyuan.github.io/2019/12/02/Anko%E6%94%BE%E5%BC%83%E7%BB%B4%E6%8A%A4.html","excerpt":"","text":"ç”¨Ankoå†™è¿‡ä¸€ä¸ªAndroidåº”ç”¨ -&gt; æ€ªç‰©çŒäººé‡‘æ‰‹æŒ‡ for Android, æœ€å–œæ¬¢çš„å°±æ˜¯doAsyncå’ŒuiThread, ä»Šå¤©å‡çº§ä¸‹ä¾èµ–, å‘ç°æç¤ºAnko is deprecated, å¹¶ä¸”ç»™å‡ºäº†ä¸€ä¸ªè¯´æ˜ -&gt; Discontinuing Anko æˆªæ­¢ç›®å‰15.4kçš„Star, è¿™ä¸ªé¡¹ç›®ç¡®å®å¾ˆå¥½, çœŸæ˜¯ä»¤äººæƒ‹æƒœ å¸Œæœ›Ktorèƒ½æŒç»­å‘å±•","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://linweiyuan.github.io/tags/Kotlin/"},{"name":"Anko","slug":"Anko","permalink":"https://linweiyuan.github.io/tags/Anko/"}]},{"title":"æŸç«™XSSæ¼æ´","slug":"æŸç«™XSSæ¼æ´","date":"2019-11-11T07:28:35.000Z","updated":"2022-11-04T01:56:25.126Z","comments":true,"path":"2019/11/11/æŸç«™XSSæ¼æ´.html","link":"","permalink":"https://linweiyuan.github.io/2019/11/11/%E6%9F%90%E7%AB%99XSS%E6%BC%8F%E6%B4%9E.html","excerpt":"","text":"æ’å…¥ä»»æ„ JS è„šæœ¬ JS è„šæœ¬åŠ è½½","categories":[{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://linweiyuan.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Vulnerability","slug":"Vulnerability","permalink":"https://linweiyuan.github.io/tags/Vulnerability/"},{"name":"XSS","slug":"XSS","permalink":"https://linweiyuan.github.io/tags/XSS/"},{"name":"JSPX","slug":"JSPX","permalink":"https://linweiyuan.github.io/tags/JSPX/"}]},{"title":"PyPIåŠ é€Ÿ","slug":"PyPIåŠ é€Ÿ","date":"2019-10-06T01:47:06.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/10/06/PyPIåŠ é€Ÿ.html","link":"","permalink":"https://linweiyuan.github.io/2019/10/06/PyPI%E5%8A%A0%E9%80%9F.html","excerpt":"","text":"12[global]index-url = https://mirrors.tuna.tsinghua.edu.cn/pypi/simple","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://linweiyuan.github.io/tags/Python/"},{"name":"pip","slug":"pip","permalink":"https://linweiyuan.github.io/tags/pip/"}]},{"title":"Javaå•ä¾‹è®¾è®¡æ¨¡å¼","slug":"Javaå•ä¾‹è®¾è®¡æ¨¡å¼","date":"2019-09-24T02:21:34.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/09/24/Javaå•ä¾‹è®¾è®¡æ¨¡å¼.html","link":"","permalink":"https://linweiyuan.github.io/2019/09/24/Java%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html","excerpt":"","text":"Java å®ç°å•ä¾‹è®¾è®¡æ¨¡å¼çš„éƒ¨åˆ†ä¾‹å­ï¼Œå¹¶ä¸æ˜¯å…¨éƒ¨ æ™®é€šé¥¿æ±‰å¼ä½•ä¸ºé¥¿æ±‰ï¼Œå°±æ˜¯å¾ˆé¥¿äº†ï¼Œè¦é©¬ä¸Šèƒ½åƒåˆ°ä¸œè¥¿ï¼ˆå®ä¾‹å…ˆåˆå§‹åŒ–å¥½ï¼Œè¦ç”¨æ—¶å°±ç›´æ¥æ‹¿æ¥ç”¨ï¼‰ 123456789101112package singleton;public class Singleton &#123; private static final Singleton INSTANCE = new Singleton(); private Singleton() &#123; &#125; public static Singleton getInstance() &#123; return INSTANCE; &#125;&#125; è¿™ç§æ–¹å¼å°±èƒ½å®ç°å•ä¾‹äº†å—ï¼Ÿæµ‹è¯•ä¸‹ 1234public static void main(String[] args) &#123; System.out.println(Singleton.getInstance()); System.out.println(Singleton.getInstance());&#125; è¾“å‡ºç›¸åŒçš„åœ°å€ï¼Œç¡®å®èƒ½å®ç° 12singleton.Singleton@6bf2d08esingleton.Singleton@6bf2d08e ä»ä¸Šé¢è¾“å‡ºå¯ä»¥çœ‹åˆ°æ˜¯å®ç°äº†çš„ï¼Œä½†æ˜¯æœ‰æ½œåœ¨çš„é—®é¢˜ 12345678910public static void main(String[] args) throws Exception &#123; System.out.println(Singleton.getInstance()); Constructor&lt;?&gt;[] declaredConstructors = Singleton.class.getDeclaredConstructors(); for (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123; declaredConstructor.setAccessible(true); Object obj = declaredConstructor.newInstance(); System.out.println(obj); &#125;&#125; è¿™æ ·å°±ä¼šå¾—åˆ°ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ 12singleton.Singleton@6bf2d08esingleton.Singleton@1b701da1 å¦‚ä½•è§£å†³ï¼Ÿ è¦å®ç°å•ä¾‹ï¼Œæ ¸å¿ƒæœ‰ä¸¤ç‚¹ï¼š ç§æœ‰åŒ–æ„é€ æ–¹æ³•ï¼Œä¸èƒ½è®©åˆ«äºº new æä¾›è·å–å®ä¾‹çš„æ–¹æ³• ä¸Šé¢çš„ä»£ç å°±æ˜¯æŠŠåŸæ¥ private çš„æ„é€ æ–¹æ³•è®¾ä¸º publicï¼Œç„¶å new äº†ä¸‹ï¼Œé‚£çŸ¥é“äº†è¿™ä¸€ç‚¹ï¼Œå°±å¯ä»¥åœ¨æ„é€ æ–¹æ³•é‚£é‡Œå¯¹åº”åœ°è¿›è¡Œå¤„ç† æˆ‘éƒ½é¥¿æ±‰äº†ï¼Œå®ä¾‹æ—©å°±æœ‰äº†ï¼Œä½ è¿˜æ¥ newï¼ŒæŠ›ä¸ªå¼‚å¸¸ç»™ä½  12345private Singleton() &#123; if (INSTANCE != null) &#123; throw new RuntimeException(&quot;!&quot;); &#125;&#125; å†æ¥æµ‹è¯•ä¸‹ 12singleton.Singleton@6bf2d08eException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException å†å·²ç»æœ‰ä¸€ä¸ªå®ä¾‹çš„æƒ…å†µä¸‹ï¼Œå†é€šè¿‡åå°„æ¥ newï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ ä½†æ˜¯ï¼Œæ²¡æœ‰å…¶ä»–çš„é—®é¢˜äº†å—ï¼Ÿå†æ¥æµ‹è¯•ä¸‹ 12345678910public static void main(String[] args) throws Exception &#123; System.out.println(Singleton.getInstance()); ByteArrayOutputStream bos = new ByteArrayOutputStream(); ObjectOutputStream oos = new ObjectOutputStream(bos); oos.writeObject(Singleton.getInstance()); ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(bos.toByteArray())); Object obj = ois.readObject(); System.out.println(obj);&#125; æ¶‰åŠåˆ°äº†æµçš„æ“ä½œï¼Œå•ä¾‹ç±»éœ€è¦å®ç° Serializable æ¥å£ ç»“æœå¦‚ä¸‹ 12singleton.Singleton@5eb5c224singleton.Singleton@5ae9a829 åˆå¾—åˆ°äº†ä¸¤ä¸ªä¸åŒçš„å®ä¾‹ å¦‚ä½•è§£å†³ï¼Ÿ 123private Object readResolve() &#123; return INSTANCE;&#125; å†æ¬¡æŸ¥çœ‹è¾“å‡ºç»“æœ 12singleton.Singleton@5eb5c224singleton.Singleton@5eb5c224 è§£å†³äº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆ readResolve() èƒ½è§£å†³åºåˆ—åŒ–å¯¼è‡´ä¸¤ä¸ªå¯¹è±¡çš„é—®é¢˜ï¼Œè¿™ä¸ªå°±è¦ç¨å¾®çœ‹ç‚¹ JDK æºç ï¼ˆJDK 1.8ï¼‰ é¦–å…ˆä»æµ‹è¯•ä»£ç çš„ readObject() å…¥æ‰‹ï¼ˆåˆ æ‰ä¸é‡ç‚¹å…³æ³¨æˆ–è€…è¯´çœ‹ä¸æ‡‚çš„ä»£ç ï¼Œçœ‹æºç çœŸçš„è¦æ·±å…¥æ¯ä¸€è¡Œå—ï¼Ÿä½ è¦è¿™ä¹ˆè¯´ï¼Œé‚£æœ€æ ¸å¿ƒçš„éƒ½æ˜¯ native æ–¹æ³•ï¼‰ 1Object obj = ois.readObject(); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354class: java.io.ObjectInputStreampublic final Object readObject() throws IOException, ClassNotFoundException &#123; return readObject(Object.class);&#125;private final Object readObject(Class&lt;?&gt; type) throws IOException, ClassNotFoundException&#123; ... Object obj = readObject0(type, false); return obj; ...&#125;private Object readObject0(Class&lt;?&gt; type, boolean unshared) throws IOException &#123; ... case TC_OBJECT: if (type == String.class) &#123; throw new ClassCastException(&quot;Cannot cast an object to java.lang.String&quot;); &#125; return checkResolve(readOrdinaryObject(unshared)); ...&#125;private Object readOrdinaryObject(boolean unshared) throws IOException&#123; if (obj != null &amp;&amp; handles.lookupException(passHandle) == null &amp;&amp; // æ£€æŸ¥æ˜¯å¦æœ‰ readResolve æ–¹æ³• desc.hasReadResolveMethod()) &#123; // å¦‚æœæœ‰ readResolve æ–¹æ³•ï¼Œåˆ™è¿”å›è¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡ Object rep = desc.invokeReadResolve(obj); if (unshared &amp;&amp; rep.getClass().isArray()) &#123; rep = cloneArray(rep); &#125; if (rep != obj) &#123; // Filter the replacement object if (rep != null) &#123; if (rep.getClass().isArray()) &#123; filterCheck(rep.getClass(), Array.getLength(rep)); &#125; else &#123; filterCheck(rep.getClass(), -1); &#125; &#125; handles.setObject(passHandle, obj = rep); &#125; &#125; return obj;&#125; 123456789101112131415161718192021class: java.io.ObjectStreamClassboolean hasReadResolveMethod() &#123; requireInitialized(); return (readResolveMethod != null);&#125;private ObjectStreamClass(final Class&lt;?&gt; cl) &#123; ... if (serializable) &#123; AccessController.doPrivileged(new PrivilegedAction&lt;Void&gt;() &#123; public Void run() &#123; readResolveMethod = getInheritableMethod( cl, &quot;readResolve&quot;, null, Object.class); return null; &#125; &#125;); &#125; ...&#125; ä¸Šé¢å°±æ˜¯ä¸ºä»€ä¹ˆ readResolve() èƒ½é˜²æ­¢ååºåˆ—åŒ–å‡ºæ¥ä¸åŒçš„å¯¹è±¡ ä½†æ˜¯è¿™æ ·ï¼Œå°±èƒ½å®ç°å•ä¾‹äº†å—ï¼Ÿå†æ¥æµ‹è¯•ä¸‹åˆ«çš„ 12345678public static void main(String[] args) throws Exception &#123; System.out.println(Singleton.getInstance()); Field field = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;); field.setAccessible(true); Unsafe unsafe = (Unsafe) field.get(null); System.out.println(unsafe.allocateInstance(Singleton.class));&#125; 12singleton.Singleton@2a139a55singleton.Singleton@6d06d69c è¿™æ ·åˆèƒ½å¾—åˆ°ä¸¤ä¸ªå¯¹è±¡äº†ï¼Œå› ä¸ºæ˜¯æ¯”è¾ƒåº•å±‚çš„ Unsafe ç±»ï¼Œæ‰€ä»¥é¢„é˜²ä¸äº† é‚£ä¹ˆæœ‰æ²¡æœ‰å…¶ä»–æ–¹æ³•ï¼Œæœ‰ï¼Œå°±æ˜¯æšä¸¾é¥¿æ±‰ æšä¸¾ç±»é¥¿æ±‰å¼123public enum Singleton1 &#123; INSTANCE;&#125; æµ‹è¯•åå°„ç ´åå•ä¾‹ 12345678public static void main(String[] args) throws Exception &#123; System.out.println(Singleton.INSTANCE); Constructor&lt;Singleton&gt; constructor = Singleton.class.getDeclaredConstructor(); constructor.setAccessible(true); Object obj = constructor.newInstance(); System.out.println(obj);&#125; å¾—åˆ°äº†ä¸€ä¸ªå¼‚å¸¸ java.lang.NoSuchMethodExceptionï¼Œé€šè¿‡ javap ç¼–è¯‘å‡ºæ¥çš„ class æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ç±»çš„ç»“æ„ 123456public final class singleton.Singleton extends java.lang.Enum&lt;singleton.Singleton&gt; &#123; public static final singleton.Singleton INSTANCE; public static singleton.Singleton[] values(); public static singleton.Singleton valueOf(java.lang.String); static &#123;&#125;;&#125; é‡Œé¢ç¡®å®æ²¡æœ‰æ— å‚æ„é€ æ–¹æ³•ï¼Œå†çœ‹ç»§æ‰¿çš„ java.lang.Enum ç±» 123456789public abstract class Enum&lt;E extends Enum&lt;E&gt;&gt; implements Comparable&lt;E&gt;, Serializable &#123; ... protected Enum(String name, int ordinal) &#123; this.name = name; this.ordinal = ordinal; &#125; ...&#125; protected èƒ½è¢«ç»§æ‰¿ï¼Œæ‰€ä»¥æšä¸¾ç±»é‡Œæ˜¯æœ‰å¸¦å‚çš„æ„é€ æ–¹æ³•çš„ï¼Œå¦‚æœè°ƒç”¨å¸¦å‚çš„æ„é€ æ–¹æ³•ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆ 12345678public static void main(String[] args) throws Exception &#123; System.out.println(Singleton.INSTANCE); Constructor&lt;Singleton&gt; constructor = Singleton.class.getDeclaredConstructor(String.class, int.class); constructor.setAccessible(true); Object obj = constructor.newInstance(); System.out.println(obj);&#125; 12INSTANCEException in thread &quot;main&quot; java.lang.IllegalArgumentException: Cannot reflectively create enum objects å¯ä»¥è°ƒç”¨ï¼Œä½†æ˜¯æŠ¥é”™äº†ï¼Œçœ‹å›åå°„çš„æºç ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢åšäº†ä¸€ä¸ªåˆ¤æ–­ 123456789101112class: java.lang.reflect.Constructor@CallerSensitivepublic T newInstance(Object ... initargs) throws InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException&#123; ... if ((clazz.getModifiers() &amp; Modifier.ENUM) != 0) throw new IllegalArgumentException(&quot;Cannot reflectively create enum objects&quot;); ...&#125; æ‰€ä»¥æšä¸¾é¥¿æ±‰ï¼Œæ˜¯åœ¨ JDK çš„å±‚é¢è¿›è¡Œäº†é˜²åå°„ å†è¯•è¯•ååºåˆ—åŒ– 12345678910public static void main(String[] args) throws Exception &#123; System.out.println(Singleton.INSTANCE); ByteArrayOutputStream bos = new ByteArrayOutputStream(); ObjectOutputStream oos = new ObjectOutputStream(bos); oos.writeObject(Singleton.INSTANCE); ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(bos.toByteArray())); Object obj = ois.readObject(); System.out.println(obj);&#125; 12INSTANCEINSTANCE å¾—åˆ°çš„æ˜¯ç›¸åŒçš„å¯¹è±¡ï¼Œè¦äº†è§£åŸå› ï¼Œéœ€è¦ä»åºåˆ—åŒ–çœ‹èµ· 1oos.writeObject(Singleton.INSTANCE); 123456789101112131415161718192021222324252627282930313233class: java.io.ObjectOutputStreampublic final void writeObject(Object obj) throws IOException &#123; ... try &#123; writeObject0(obj, false); &#125; catch (IOException ex) &#123; if (depth == 0) &#123; writeFatalException(ex); &#125; throw ex; &#125;&#125;private void writeObject0(Object obj, boolean unshared) throws IOException&#123; ... else if (obj instanceof Enum) &#123; writeEnum((Enum&lt;?&gt;) obj, desc, unshared); &#125; ...&#125;private void writeEnum(Enum&lt;?&gt; en, ObjectStreamClass desc, boolean unshared) throws IOException&#123; ... // å…¶å®åºåˆ—åŒ–å°±æ˜¯å­˜æšä¸¾ç±»å¯¹è±¡çš„ name writeString(en.name(), false);&#125; å†çœ‹ååºåˆ—åŒ–ï¼Œå¤§éƒ¨åˆ†ä»£ç å’Œä¸Šé¢æ™®é€šç±»çš„ååºåˆ—åŒ–ç›¸åŒï¼Œè¿™é‡Œé‡ç‚¹åˆ—å‡ºä¸åŒçš„ 12345678910111213141516171819202122232425262728293031323334class: java.io.ObjectInputStreamprivate Object readObject0(Class&lt;?&gt; type, boolean unshared) throws IOException &#123; ... case TC_ENUM: if (type == String.class) &#123; throw new ClassCastException(&quot;Cannot cast an enum to java.lang.String&quot;); &#125; return checkResolve(readEnum(unshared)); ...&#125;private Enum&lt;?&gt; readEnum(boolean unshared) throws IOException &#123; ... Enum&lt;?&gt; result = null; ... // æ ¸å¿ƒæ˜¯è¿™è¡Œ Enum&lt;?&gt; en = Enum.valueOf((Class)cl, name); result = en; ... return result;&#125;public static &lt;T extends Enum&lt;T&gt;&gt; T valueOf(Class&lt;T&gt; enumType, String name) &#123; // ç›´æ¥æ ¹æ® name æ‹¿å›æšä¸¾ç±»å®ä¾‹ï¼Œå¯¹åº”ä¸Šé¢å­˜çš„ nameï¼Œæ‹¿åˆ°çš„å°±æ˜¯åŒä¸€ä¸ª T result = enumType.enumConstantDirectory().get(name); if (result != null) return result; if (name == null) throw new NullPointerException(&quot;Name is null&quot;); throw new IllegalArgumentException( &quot;No enum constant &quot; + enumType.getCanonicalName() + &quot;.&quot; + name);&#125; æ‰€ä»¥æšä¸¾é¥¿æ±‰ä¹Ÿæ˜¯åœ¨ JDK çš„å±‚é¢è¿›è¡Œäº†é˜²ååºåˆ—åŒ– é‚£ä¹ˆ Unsafe åˆæ€ä¹ˆæ · 12345678public static void main(String[] args) throws Exception &#123; System.out.println(Singleton.INSTANCE); Field field = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;); field.setAccessible(true); Unsafe unsafe = (Unsafe) field.get(null); System.out.println(unsafe.allocateInstance(Singleton.class));&#125; 12INSTANCEnull è¿”å›äº†ä¸€ä¸ª nullï¼Œå› ä¸ºè¿™ä¸ªæ˜¯ native æ–¹æ³•ï¼Œå…·ä½“å®ç°çš„ä»£ç çœ‹ä¸æ‡‚ï¼Œè¿™é‡Œåªæ”¾å‡º Java è¿™è¾¹çš„ä»£ç  123456class: sun.misc.Unsafe/** Allocate an instance but do not run any constructor. Initializes the class if it has not yet been. */public native Object allocateInstance(Class&lt;?&gt; cls) throws InstantiationException; æ‰€ä»¥ä¹Ÿå¯ä»¥è¯´ï¼Œæšä¸¾é¥¿æ±‰ä¹Ÿèƒ½é˜² Unsafe æ™®é€šæ‡’æ±‰å¼æ‡’æ±‰å°±æ˜¯æ²¡æœ‰è¿™ä¹ˆé¥¿ï¼Œä½†æ˜¯å¾ˆæ‡’ï¼Œå› ä¸ºæ‡’ï¼Œæ‰€ä»¥æˆ‘ä¸æå‰ç»™ä½ å‡†å¤‡å¥½ä¸œè¥¿ï¼Œä½ å‚¬æˆ‘çš„æ—¶å€™æˆ‘å†æ¥å‡†å¤‡ï¼Œä¸‹é¢çš„ä»£ç éƒ½èƒ½å®ç°å•ä¾‹ï¼Œç»“æœå°±ä¸æ”¾äº† 12345678910public class Singleton &#123; private static Singleton INSTANCE = null; public static Singleton getInstance() &#123; if (INSTANCE == null) &#123; INSTANCE = new Singleton(); &#125; return INSTANCE; &#125;&#125; è¿™ç§æ–¹æ³•æœ‰ä¸ªé—®é¢˜ï¼Œå› ä¸º INSTANCE å…¶å®æ˜¯ä¸€ä¸ªå…±äº«å˜é‡ï¼Œå…±äº«å˜é‡åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹å°±ä¼šæœ‰èµ„æºç«äº‰çš„é—®é¢˜ï¼Œæ‰€ä»¥å¯èƒ½ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¼šåˆ¤æ–­ INSTANCE æ˜¯ nullï¼Œæ‰€ä»¥åˆ›å»ºäº†ä¸¤ä¸ªå¯¹è±¡ æ—¢ç„¶è¿™æ ·ï¼Œé‚£æ— è„‘ synchronized å°±å®Œäº† 12345678910public class Singleton &#123; private static Singleton INSTANCE = null; public synchronized static Singleton getInstance() &#123; if (INSTANCE == null) &#123; INSTANCE = new Singleton(); &#125; return INSTANCE; &#125;&#125; å¯ä»¥æ˜¯å¯ä»¥ï¼Œä½†æ˜¯é”çš„ç²’åº¦å¤ªå¤§äº†ï¼Œå¹¶å‘é‡å¾ˆå¤§çš„æƒ…å†µä¸‹æ€§èƒ½ä¼šæœ‰å½±å“ï¼ˆå¤§éƒ¨åˆ†åœºæ™¯ä¸‹è¿™äº›éƒ½æ˜¯ç©ºè¯å¥—è¯ï¼‰ï¼Œæ‰€ä»¥è¦å°†é”ç»†åŒ– 123456789101112public class Singleton &#123; private static Singleton INSTANCE = null; public static Singleton getInstance() &#123; if (INSTANCE == null) &#123; synchronized (Singleton.class) &#123; INSTANCE = new Singleton(); &#125; &#125; return INSTANCE; &#125;&#125; è¿™æ ·ä¸€æ¥ï¼Œåªæœ‰ INSTANCE æ˜¯ null çš„æ—¶å€™æ‰ä¼šåŠ é”ï¼Œæ€§èƒ½å°±ä¼šå¤§å¤§æå‡ ä½†æ˜¯ä¹Ÿä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œç†æƒ³æƒ…å†µä¸‹æ˜¯è¯·æ±‚ä¸€ä¸ªæ¥ç€ä¸€ä¸ªæ¥ï¼Œç¬¬ä¸€ä¸ªæ¥äº†ï¼Œnullï¼Œåˆå§‹åŒ–ï¼Œåé¢çš„ç›´æ¥ returnï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¹Ÿä¼šå­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹éƒ½åˆ¤æ–­æ˜¯ nullï¼Œæ‰€ä»¥éƒ½è¿›å»äº† if ä»£ç å—ï¼Œè™½ç„¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¿›å…¥ synchronized ä»£ç å—ï¼Œä½†æ˜¯ä¸€ä¸ªçº¿ç¨‹ new äº†ï¼Œå°±é‡Šæ”¾é”äº†ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹è¿˜æ˜¯ä¼š newï¼Œè¿™æ ·å°±ä¼šæœ‰ä¸¤ä¸ªå®ä¾‹ å¦‚ä½•è§£å†³ï¼Ÿåœ¨ synchronized å—é‡Œå†åˆ¤æ–­ä¸€æ¬¡ 1234567891011121314public class Singleton &#123; private static Singleton INSTANCE = null; public static Singleton getInstance() &#123; if (INSTANCE == null) &#123; synchronized (Singleton.class) &#123; if (INSTANCE == null) &#123; INSTANCE = new Singleton(); &#125; &#125; &#125; return INSTANCE; &#125;&#125; è¿™æ ·è™½ç„¶æœ‰å¤šä¸ªçº¿ç¨‹åˆ¤æ–­ INSTANCE æ˜¯ nullï¼Œä»è€Œè¿›å…¥ if ä»£ç å—ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¿›å…¥ synchronized å—è¿›è¡Œ new å¯¹è±¡ï¼Œè™½ç„¶ new å®Œäº†åˆ«çš„çº¿ç¨‹è¿˜èƒ½è¿›å…¥ï¼Œä½†è¿›å…¥åå†åˆ¤æ–­ï¼Œå°±ä¸ä¼šå† new äº† çœ‹ä¼¼è§£å†³äº†ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼åœ¨ JVM å±‚é¢æœ‰ä¸€ä¸ªé—®é¢˜ new å¯¹è±¡çš„æ—¶å€™ä¸€èˆ¬ä¼šåŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š åˆ†é…å†…å­˜ç©ºé—´ å˜é‡åˆå§‹åŒ– è¿”å›å†…å­˜åœ°å€ï¼ˆèµ‹å€¼ï¼‰ ä½†æ˜¯ JVM ä¼šè¿›è¡Œä¸€äº›ä¼˜åŒ–ï¼Œæ±Ÿæ¹–äººç§°æŒ‡ä»¤é‡æ’åºï¼Œå°±æ˜¯å¯èƒ½ä¼šå…ˆèµ‹å€¼äº†å†åˆå§‹åŒ–å˜é‡ï¼Œè¿™æ ·ä»¥æ¥åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹å°±ä¼šå¾—åˆ°ä¸€ä¸ªæœªåˆå§‹åŒ–çš„å¯¹è±¡ï¼Œé‚£ç”¨èµ·æ¥ä¼šå°±æœ‰å¥‡æ€ªçš„é—®é¢˜ï¼Œä¸ºäº†ç¦æ­¢è¿™ä¸ªè´Ÿä¼˜åŒ–ï¼ˆå•ä¾‹åœºæ™¯ä¸‹æ˜¯è´Ÿä¼˜åŒ–ï¼‰ï¼Œéœ€è¦ç”¨ volatile å…³é”®å­— volatile é€šè¿‡å¢åŠ å†…å­˜å±éšœçš„æ–¹å¼ï¼Œç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ‰‹åŠ¨å¢åŠ å†…å­˜å±éšœï¼Œé€šè¿‡ Unsafe ç±»çš„ä¸€äº› fence ç›¸å…³çš„æ–¹æ³•ï¼ˆè¿™ä¸ªä¸å¸¸ç”¨ï¼Œé™¤éæ˜¯å¾ˆåº•å±‚çš„ä»£ç ï¼‰ï¼Œvolatile è¿˜ä¿è¯å¯è§æ€§ï¼Œè¯¦ç»†çš„ä¸œè¥¿å¯èƒ½å•ç‹¬è°ˆæ¯”è¾ƒåˆé€‚ å…¶ä»–æ³¨æ„çš„ç‚¹å’Œé¥¿æ±‰å¼ç›¸åŒ å†…éƒ¨ç±»æ‡’æ±‰å¼å†…éƒ¨ç±»æ˜¯ç±»åŠ è½½çš„æ—¶å€™å°±åˆå§‹åŒ–ï¼Œç±»åŠ è½½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå…¶ä»–æ³¨æ„çš„ç‚¹ä¹Ÿå’Œä¸Šé¢çš„ç±»ä¼¼ 123456789101112public class Singleton &#123; private Singleton() &#123; &#125; private static final class InstanceHolder &#123; private static final Singleton INSTANCE = new Singleton(); &#125; public static Singleton getInstance() &#123; return InstanceHolder.INSTANCE; &#125;&#125; æœ€åæ€»ç»“ï¼šå¤§å®¶éƒ½è¯´ç”¨æšä¸¾ç±»å•ä¾‹å¥½","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"}]},{"title":"VirtualBoxå‹ç¼©è™šæ‹Ÿç¡¬ç›˜","slug":"VirtualBoxå‹ç¼©è™šæ‹Ÿç¡¬ç›˜","date":"2019-08-06T14:16:22.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2019/08/06/VirtualBoxå‹ç¼©è™šæ‹Ÿç¡¬ç›˜.html","link":"","permalink":"https://linweiyuan.github.io/2019/08/06/VirtualBox%E5%8E%8B%E7%BC%A9%E8%99%9A%E6%8B%9F%E7%A1%AC%E7%9B%98.html","excerpt":"","text":"Linux12sudo dd if=/dev/zero of=/empty bs=1Msudo rm -f /empty Windowsä¸‹è½½ -&gt; Sysinternals Suite 1sdelete â€“z C: å…³æœºæ‰§è¡Œ 1vboxmanage modifyhd xxx.vdi --compact æç¤º 10%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%","categories":[{"name":"è™šæ‹Ÿæœº","slug":"è™šæ‹Ÿæœº","permalink":"https://linweiyuan.github.io/categories/%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"VirtualBox","slug":"VirtualBox","permalink":"https://linweiyuan.github.io/tags/VirtualBox/"}]},{"title":"Android License","slug":"Android-License","date":"2019-07-26T14:39:22.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2019/07/26/Android-License.html","link":"","permalink":"https://linweiyuan.github.io/2019/07/26/Android-License.html","excerpt":"","text":"Android å¼€å‘ä¸­æç¤ºLicense for package xxx not accepted. 1yes | sdkmanager --licenses","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://linweiyuan.github.io/tags/Android/"}]},{"title":"å‡å°‘MySQLå†…å­˜å ç”¨","slug":"å‡å°‘MySQLå†…å­˜å ç”¨","date":"2019-07-21T10:07:49.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2019/07/21/å‡å°‘MySQLå†…å­˜å ç”¨.html","link":"","permalink":"https://linweiyuan.github.io/2019/07/21/%E5%87%8F%E5%B0%91MySQL%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8.html","excerpt":"","text":"MySQL é«˜ç‰ˆæœ¬é»˜è®¤å¼€å¯performance_schema -&gt; Performance Schema Startup Configuration ç”¨ Docker å¯åŠ¨ä¸€ä¸ª MySQL å®¹å™¨, å¼€å¯çš„æƒ…å†µä¸‹å¯åŠ¨å®Œæˆå ç”¨å†…å­˜æ¥è¿‘ 400M å…³é—­é…ç½® 12[mysqld]performance_schema=OFF é‡å¯ MySQL å ç”¨å†…å­˜ 100M å·¦å³","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://linweiyuan.github.io/tags/MySQL/"}]},{"title":"i3statusæ˜¾ç¤ºç½‘é€Ÿ","slug":"i3statusæ˜¾ç¤ºç½‘é€Ÿ","date":"2019-07-20T05:23:24.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2019/07/20/i3statusæ˜¾ç¤ºç½‘é€Ÿ.html","link":"","permalink":"https://linweiyuan.github.io/2019/07/20/i3status%E6%98%BE%E7%A4%BA%E7%BD%91%E9%80%9F.html","excerpt":"","text":"ä¸‹è½½è„šæœ¬ -&gt; net-speed.sh, ä¿®æ”¹baræ‰§è¡Œç¨‹åºè·¯å¾„æŒ‡å‘è„šæœ¬ 123bar &#123; status_command exec net-speed.sh&#125; ä¿®æ”¹æˆå¥½çœ‹çš„æ ¼å¼ 1echo &quot;$&#123;rate&#125;| $&#123;line&#125;&quot; || exit 1 é‡æ–°åŠ è½½ i3 é…ç½®æ–‡ä»¶","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"},{"name":"i3","slug":"i3","permalink":"https://linweiyuan.github.io/tags/i3/"},{"name":"i3status","slug":"i3status","permalink":"https://linweiyuan.github.io/tags/i3status/"}]},{"title":"Linuxå’ŒWindowså…±äº«ç¡¬ç›˜æŒ‚è½½é—®é¢˜è§£å†³æ–¹æ¡ˆ","slug":"Linuxå’ŒWindowså…±äº«ç¡¬ç›˜æŒ‚è½½é—®é¢˜è§£å†³æ–¹æ¡ˆ","date":"2019-07-02T12:25:01.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/07/02/Linuxå’ŒWindowså…±äº«ç¡¬ç›˜æŒ‚è½½é—®é¢˜è§£å†³æ–¹æ¡ˆ.html","link":"","permalink":"https://linweiyuan.github.io/2019/07/02/Linux%E5%92%8CWindows%E5%85%B1%E4%BA%AB%E7%A1%AC%E7%9B%98%E6%8C%82%E8%BD%BD%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html","excerpt":"","text":"åŒç³»ç»Ÿ Linux + Windows 10, Windows ä¸‹æœ‰ NTFS æ ¼å¼ 1T ç¡¬ç›˜(æ¯”å¦‚ D ç›˜), Linux ä¸‹æŒ‰éœ€æŒ‚è½½æ—¶å‡ºç°é—®é¢˜ 1sudo mount /dev/sdb1 Temp æŠ¥é”™ 12345The disk contains an unclean file system (0, 0).Metadata kept in Windows cache, refused to mount.Falling back to read-only mount because the NTFS partition is in anunsafe state. Please resume and shutdown Windows fully (no hibernationor fast restarting.) åˆ©ç”¨ntfsfixå‘½ä»¤è§£å†³ 1sudo ntfsfix /dev/sdb1 ä¿®å¤è„æ•°æ® 1234567891011121314Mounting volume... The disk contains an unclean file system (0, 0).Metadata kept in Windows cache, refused to mount.FAILEDAttempting to correct errors...Processing $MFT and $MFTMirr...Reading $MFT... OKReading $MFTMirr... OKComparing $MFTMirr to $MFT... OKProcessing of $MFT and $MFTMirr completed successfully.Setting required flags on partition... OKGoing to empty the journal ($LogFile)... OKChecking the alternate boot sector... OKNTFS volume version is 3.1.NTFS partition /dev/sdb1 was processed successfully. ä»¥è¯»å†™æ–¹å¼é‡æ–°åŠ è½½ 1sudo mount -o rw /dev/sdb1","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"},{"name":"NTFS","slug":"NTFS","permalink":"https://linweiyuan.github.io/tags/NTFS/"},{"name":"Windows","slug":"Windows","permalink":"https://linweiyuan.github.io/tags/Windows/"}]},{"title":"æŸç«™è¶Šæƒæ¼æ´","slug":"æŸç«™è¶Šæƒæ¼æ´","date":"2019-06-07T06:34:55.000Z","updated":"2022-11-04T01:56:25.130Z","comments":true,"path":"2019/06/07/æŸç«™è¶Šæƒæ¼æ´.html","link":"","permalink":"https://linweiyuan.github.io/2019/06/07/%E6%9F%90%E7%AB%99%E8%B6%8A%E6%9D%83%E6%BC%8F%E6%B4%9E.html","excerpt":"","text":"æ™®é€šç”¨æˆ·ç™»å½• åˆ©ç”¨æ™®é€šç”¨æˆ·èº«ä»½é‡ç½® admin å¯†ç  admin ç™»å½• æ•°æ®æ³„éœ²","categories":[{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://linweiyuan.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Vulnerability","slug":"Vulnerability","permalink":"https://linweiyuan.github.io/tags/Vulnerability/"},{"name":"Unauthorized","slug":"Unauthorized","permalink":"https://linweiyuan.github.io/tags/Unauthorized/"}]},{"title":"JavassiståŠ¨æ€å¢å¼ºç±»","slug":"JavassiståŠ¨æ€å¢å¼ºç±»","date":"2019-06-05T16:07:35.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/06/05/JavassiståŠ¨æ€å¢å¼ºç±».html","link":"","permalink":"https://linweiyuan.github.io/2019/06/05/Javassist%E5%8A%A8%E6%80%81%E5%A2%9E%E5%BC%BA%E7%B1%BB.html","excerpt":"","text":"Userç±»ï¼Œåªæœ‰ä¸€ä¸ªå­—æ®µusernameï¼Œåœ¨ä¸ç»§æ‰¿æˆ–è€…å…¶ä»–æ–¹å¼å‰æä¸‹åˆ©ç”¨Javassistå®ç°ç±»å¢å¼º å¯ä»¥çœ‹åˆ°.classæ–‡ä»¶å·²è¢«ä¿®æ”¹ é‡æ–°åŠ è½½å­—èŠ‚ç åå‘ç°passwordè®¾ä¸ºprivateæ²¡è¾“å‡ºï¼Œusernameå€¼è¢«ä¿®æ”¹ï¼Œflagè®¾ä¸ºpublicè¢«è¾“å‡ºï¼Œgetterä¹Ÿè¢«è¾“å‡º","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"},{"name":"Java","slug":"ç¨‹åºè®¾è®¡/Java","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"Javassist","slug":"Javassist","permalink":"https://linweiyuan.github.io/tags/Javassist/"},{"name":"Reflection","slug":"Reflection","permalink":"https://linweiyuan.github.io/tags/Reflection/"}]},{"title":"Mavenä¸Šä¼ Nexusç§æœå¸¦æºç ","slug":"Mavenä¸Šä¼ Nexusç§æœå¸¦æºç ","date":"2019-06-03T08:26:59.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/06/03/Mavenä¸Šä¼ Nexusç§æœå¸¦æºç .html","link":"","permalink":"https://linweiyuan.github.io/2019/06/03/Maven%E4%B8%8A%E4%BC%A0Nexus%E7%A7%81%E6%9C%8D%E5%B8%A6%E6%BA%90%E7%A0%81.html","excerpt":"","text":"åŠ maven-source-pluginæ’ä»¶ 123456789101112131415&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;attach&gt;true&lt;/attach&gt; &lt;/configuration&gt; &lt;executions&gt; &lt;execution&gt; &lt;phase&gt;compile&lt;/phase&gt; &lt;goals&gt; &lt;goal&gt;jar&lt;/goal&gt; &lt;/goals&gt; &lt;/execution&gt; &lt;/executions&gt;&lt;/plugin&gt; settings.xmlé…ç½®éªŒè¯ä¿¡æ¯ 123456789&lt;settings&gt; &lt;servers&gt; &lt;server&gt; &lt;id&gt;id&lt;/id&gt; &lt;username&gt;username&lt;/username&gt; &lt;password&gt;password&lt;/password&gt; &lt;/server&gt; &lt;/servers&gt;&lt;/settings&gt; pom.xmlä¸­çš„idè¦å’Œsettings.xmlä¸­çš„ä¸€è‡´ 123456&lt;distributionManagement&gt; &lt;repository&gt; &lt;id&gt;id&lt;/id&gt; &lt;url&gt;url&lt;/url&gt; &lt;/repository&gt;&lt;/distributionManagement&gt;","categories":[{"name":"æ„å»ºå·¥å…·","slug":"æ„å»ºå·¥å…·","permalink":"https://linweiyuan.github.io/categories/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"https://linweiyuan.github.io/tags/Maven/"},{"name":"Nexus","slug":"Nexus","permalink":"https://linweiyuan.github.io/tags/Nexus/"}]},{"title":"Javaå®šæ—¶å™¨","slug":"Javaå®šæ—¶å™¨","date":"2019-05-21T18:20:09.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/05/21/Javaå®šæ—¶å™¨.html","link":"","permalink":"https://linweiyuan.github.io/2019/05/21/Java%E5%AE%9A%E6%97%B6%E5%99%A8.html","excerpt":"","text":"ç®€å•èµ·è§ç”¨Kotlinå†™ scheduleAtFixedRate12345678910val timerTaskPool = Executors.newScheduledThreadPool(2)timerTaskPool.scheduleAtFixedRate( object : TimerTask() &#123; override fun run() &#123; println(Date()) Thread.sleep(2000) &#125; &#125;, 0, 3, TimeUnit.SECONDS) è¿è¡Œç»“æœ 123Wed May 22 02:24:52 CST 2019Wed May 22 02:24:55 CST 2019Wed May 22 02:24:58 CST 2019 ä¹Ÿå°±æ˜¯ä¸é¡¾å‰é¢çš„ä»»åŠ¡æœ‰æ²¡æ‰§è¡Œå®Œ, å»¶è¿ŸæŒ‡å®šæ—¶é—´å°±å†æ¬¡æ‰§è¡Œä»»åŠ¡ scheduleWithFixedDelay12345678910val timerTaskPool = Executors.newScheduledThreadPool(2)timerTaskPool.scheduleWithFixedDelay( object : TimerTask() &#123; override fun run() &#123; println(Date()) Thread.sleep(2000) &#125; &#125;, 0, 3, TimeUnit.SECONDS) è¿è¡Œç»“æœ 123Wed May 22 02:26:04 CST 2019Wed May 22 02:26:09 CST 2019Wed May 22 02:26:14 CST 2019 å»¶è¿Ÿ 3 ç§’, ç¡äº† 2 ç§’, é—´éš” 5 ç§’ å®šæ—¶ä»»åŠ¡å°½é‡ç”¨ Pool, å› ä¸º Timer åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸Šå¯èƒ½å­˜åœ¨æ—¶é—´ä¸ä¸€è‡´æˆ–è€…æ— æ³•æ•è·å¼‚å¸¸çš„é—®é¢˜","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"Kotlin","slug":"Kotlin","permalink":"https://linweiyuan.github.io/tags/Kotlin/"},{"name":"ThreadPool","slug":"ThreadPool","permalink":"https://linweiyuan.github.io/tags/ThreadPool/"}]},{"title":"Flask Dockerfileæ¨¡æ¿","slug":"Flask-Dockerfileæ¨¡æ¿","date":"2019-05-20T12:20:48.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2019/05/20/Flask-Dockerfileæ¨¡æ¿.html","link":"","permalink":"https://linweiyuan.github.io/2019/05/20/Flask-Dockerfile%E6%A8%A1%E6%9D%BF.html","excerpt":"","text":"python:alpineåŸºäº Python3, ä¾èµ–ä¸‹è½½è¿‡ç¨‹ä¸­éœ€è¦ build, å®‰è£…python3-dev,build-base,gcc, build å®Œååˆ æ‰, é•œåƒå¯å‡å°‘å‡ ç™¾ M 123456789101112131415161718FROM python:alpineLABEL maintainer=&quot;linweiyuan &lt;root@linweiyuan.com&gt;&quot;ENV FOLDER é¡¹ç›®åå­—COPY . $&#123;FOLDER&#125;WORKDIR $&#123;FOLDER&#125;RUN sed -i &#x27;s/dl-cdn.alpinelinux.org/mirrors.tuna.tsinghua.edu.cn/g&#x27; /etc/apk/repositories \\ &amp;&amp; apk add --no-cache python3-dev build-base gcc \\ &amp;&amp; pip install --no-cache-dir -r requirements.txt \\ &amp;&amp; apk del python3-dev build-base gccEXPOSE 5000CMD [&quot;flask&quot;,&quot;run&quot;,&quot;--host=0.0.0.0&quot;]","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://linweiyuan.github.io/tags/Python/"},{"name":"Flask","slug":"Flask","permalink":"https://linweiyuan.github.io/tags/Flask/"},{"name":"Dockerfile","slug":"Dockerfile","permalink":"https://linweiyuan.github.io/tags/Dockerfile/"}]},{"title":"Goæ—¥æœŸæ ¼å¼åŒ–","slug":"Goæ—¥æœŸæ ¼å¼åŒ–","date":"2019-05-19T16:24:52.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/05/19/Goæ—¥æœŸæ ¼å¼åŒ–.html","link":"","permalink":"https://linweiyuan.github.io/2019/05/19/Go%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96.html","excerpt":"","text":"æ–‡æ¡£ -&gt; time - The Go Programming Language 1time.Now().Format(&quot;2006-01-02 15:04:05&quot;) çœŸæ˜¯ä¸€è‚¡æ¸…æµ","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Go","slug":"Go","permalink":"https://linweiyuan.github.io/tags/Go/"}]},{"title":"Goäº¤å‰ç¼–è¯‘","slug":"Goäº¤å‰ç¼–è¯‘","date":"2019-05-19T15:33:25.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/05/19/Goäº¤å‰ç¼–è¯‘.html","link":"","permalink":"https://linweiyuan.github.io/2019/05/19/Go%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91.html","excerpt":"","text":"Linux1CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build main.go Windows1CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build main.go macOS1CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build main.go å…¶ä»–é€‰é¡¹ $GOOS $GOARCH android arm darwin 386 darwin amd64 darwin arm darwin arm64 dragonfly amd64 freebsd 386 freebsd amd64 freebsd arm linux 386 linux amd64 linux arm linux arm64 linux ppc64 linux ppc64le linux mips linux mipsle linux mips64 linux mips64le linux s390x netbsd 386 netbsd amd64 netbsd arm openbsd 386 openbsd amd64 openbsd arm plan9 386 plan9 amd64 solaris amd64 windows 386 windows amd64","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Go","slug":"Go","permalink":"https://linweiyuan.github.io/tags/Go/"}]},{"title":"pem to key","slug":"pem-to-key","date":"2019-05-12T06:39:55.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2019/05/12/pem-to-key.html","link":"","permalink":"https://linweiyuan.github.io/2019/05/12/pem-to-key.html","excerpt":"","text":"12openssl x509 -in fullchain1.pem -out server.crtopenssl rsa -in privkey1.pem -out server.key","categories":[{"name":"å®ç”¨æŠ€å·§","slug":"å®ç”¨æŠ€å·§","permalink":"https://linweiyuan.github.io/categories/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"openssl","slug":"openssl","permalink":"https://linweiyuan.github.io/tags/openssl/"}]},{"title":"Linuxç»´æŠ¤","slug":"Linuxç»´æŠ¤","date":"2019-05-06T20:59:11.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/05/06/Linuxç»´æŠ¤.html","link":"","permalink":"https://linweiyuan.github.io/2019/05/06/Linux%E7%BB%B4%E6%8A%A4.html","excerpt":"","text":"å¯åŠ¨ 1single init=/bin/bash æ”¹å¯†ç æç¤ºAuthentication Token Manipulation Error 1mount -rw -o remount /","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"}]},{"title":"åˆ é™¤Dockeræ— ç”¨é•œåƒ","slug":"åˆ é™¤Dockeræ— ç”¨é•œåƒ","date":"2019-05-05T04:39:04.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2019/05/05/åˆ é™¤Dockeræ— ç”¨é•œåƒ.html","link":"","permalink":"https://linweiyuan.github.io/2019/05/05/%E5%88%A0%E9%99%A4Docker%E6%97%A0%E7%94%A8%E9%95%9C%E5%83%8F.html","excerpt":"","text":"ä¸€é”®åˆ é™¤ build è¿‡ç¨‹ä¸­äº§ç”Ÿçš„&lt;none&gt;é•œåƒ 1docker images -a | grep none | awk &#x27;&#123;print $3&#125;&#x27; | xargs docker rmi æˆ–è€… 1docker rmi $(docker images -a | grep none | awk &#x27;&#123;print $3&#125;&#x27;)","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"}]},{"title":"Nginxé…ç½®SSE","slug":"Nginxé…ç½®SSE","date":"2019-04-26T02:37:42.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/04/26/Nginxé…ç½®SSE.html","link":"","permalink":"https://linweiyuan.github.io/2019/04/26/Nginx%E9%85%8D%E7%BD%AESSE.html","excerpt":"","text":"åŠ ä¸ªé…ç½® 1proxy_buffering off; ç»æµ‹è¯•, X-Accel-Buffering: noä¸å¥½ä½¿ ä¸ WebSocket æ¯”è¾ƒçš„è¯, SSE åªèƒ½æœåŠ¡å™¨æ¨, WS å…¨åŒå·¥, ä¸è¿‡ SSE æ›´è½»é‡","categories":[{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://linweiyuan.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://linweiyuan.github.io/tags/Nginx/"},{"name":"Server Send Event","slug":"Server-Send-Event","permalink":"https://linweiyuan.github.io/tags/Server-Send-Event/"}]},{"title":"Dockeræ­å»ºç§æœ‰ä»“åº“","slug":"Dockeræ­å»ºç§æœ‰ä»“åº“","date":"2019-04-25T13:28:57.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2019/04/25/Dockeræ­å»ºç§æœ‰ä»“åº“.html","link":"","permalink":"https://linweiyuan.github.io/2019/04/25/Docker%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93.html","excerpt":"","text":"èµ·ä¸ªå®¹å™¨ 1234567891011registry: container_name: registry image: registry volumes: - ./registry:/var/lib/registry/docker/registry/v2 - ./registry/auth:/auth environment: - REGISTRY_AUTH=htpasswd - REGISTRY_AUTH_HTPASSWD_REALM=Auth - REGISTRY_AUTH_HTPASSWD_PATH=/auth restart: unless-stopped Auth 1htpasswd -Bb -c authï¼ˆæ–‡ä»¶åï¼‰ ç”¨æˆ·å å¯†ç ","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"},{"name":"Registry","slug":"Registry","permalink":"https://linweiyuan.github.io/tags/Registry/"}]},{"title":"Nginxæ–‡ä»¶æµè§ˆ","slug":"Nginxæ–‡ä»¶æµè§ˆ","date":"2019-04-20T18:23:01.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/04/20/Nginxæ–‡ä»¶æµè§ˆ.html","link":"","permalink":"https://linweiyuan.github.io/2019/04/20/Nginx%E6%96%87%E4%BB%B6%E6%B5%8F%E8%A7%88.html","excerpt":"","text":"123autoindex on;autoindex_exact_size off;autoindex_localtime on; autoindex_exact_size -&gt; onæ˜¾ç¤ºå­—èŠ‚, offæ˜¾ç¤ºäººçœ‹çš„ autoindex_localtime -&gt; onæ˜¾ç¤ºæœåŠ¡å™¨æ—¶é—´, offåˆ™ GMT ä¸­æ–‡ä¹±ç åŠ charset utf-8;","categories":[{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://linweiyuan.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://linweiyuan.github.io/tags/Nginx/"}]},{"title":"Nginxçš„Basicè®¤è¯","slug":"Nginxçš„Basicè®¤è¯","date":"2019-04-20T12:48:21.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/04/20/Nginxçš„Basicè®¤è¯.html","link":"","permalink":"https://linweiyuan.github.io/2019/04/20/Nginx%E7%9A%84Basic%E8%AE%A4%E8%AF%81.html","excerpt":"","text":"å‚è€ƒ -&gt; Restricting Access with HTTP Basic Authentication æ•æ„ŸæœåŠ¡ä¸æƒ³å¯¹å¤–æš´éœ², ç®€å•åŠ ä¸ªBasic Authentication AUR æ˜¯ä¸ªå¥½ä¸œè¥¿, htpasswdä¹Ÿæœ‰äº†, apache-toolsè¿˜å¯ä»¥åˆ©ç”¨ ab è¿›è¡Œå‹åŠ›æµ‹è¯• 1234567891011121314âœ ~ proxychains yaourt htpasswd[proxychains] config file found: /etc/proxychains.conf[proxychains] preloading /usr/lib/libproxychains4.so1 archlinuxcn/apache-tools 2.4.25-1 [installed] Useful Apache tools - htdigest, htpasswd, ab, htdbm2 aur/apache-tools 2.4.39-1 [installed: 2.4.25-1] (115) (1.01) Useful Apache tools - htdigest, htpasswd, ab, htdbm3 aur/python-htpasswd-git .r31.ef677a5-1 (0) (0.00) Python Library for working with htpasswd user (only basic authorization) and group files4 aur/python2-htpasswd-git .r31.ef677a5-1 (5) (0.05) Python 2 Library for working with htpasswd user (only basic authorization) and group files==&gt; Enter nÂ° of packages to be installed (e.g., 1 2 3 or 1-3)==&gt; ---------------------------------------------------------==&gt; ç”Ÿæˆå¯†ç  1htpasswd -c æ–‡ä»¶å ç”¨æˆ·å æŒ‚è½½è¿› nginx å®¹å™¨, åœ¨éœ€è¦çš„ä½ç½®é…ç½® 12auth_basic &quot;Auth&quot;;auth_basic_user_file `è®¤è¯æ–‡ä»¶è·¯å¾„`; æ³¨æ„æ–‡ä»¶æƒé™é—®é¢˜ curl æµ‹è¯•ä¸€ä¸‹æ˜¯å¦ç”Ÿæ•ˆ 123456789101112131415&lt; HTTP/1.1 401 Unauthorized&lt; Server: nginx/1.15.12&lt; Date: Sat, 20 Apr 2019 12:53:31 GMT&lt; Content-Type: text/html&lt; Content-Length: 180&lt; Connection: keep-alive&lt; WWW-Authenticate: Basic realm=&quot;Auth&quot;&lt;&lt;html&gt;&lt;head&gt;&lt;title&gt;401 Authorization Required&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;center&gt;&lt;h1&gt;401 Authorization Required&lt;/h1&gt;&lt;/center&gt;&lt;hr&gt;&lt;center&gt;nginx/1.15.12&lt;/center&gt;&lt;/body&gt;&lt;/html&gt; æ­£å¸¸ä½¿ç”¨","categories":[{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://linweiyuan.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://linweiyuan.github.io/tags/Nginx/"}]},{"title":"Nginxåå‘ä»£ç†WebSocket","slug":"Nginxåå‘ä»£ç†WebSocket","date":"2019-04-20T11:13:41.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/04/20/Nginxåå‘ä»£ç†WebSocket.html","link":"","permalink":"https://linweiyuan.github.io/2019/04/20/Nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86WebSocket.html","excerpt":"","text":"123456location /ws &#123; proxy_pass http://?; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection &quot;upgrade&quot;;&#125; å®æµ‹ä¸€ä¸ªè‡ªå·±çš„ WS æœåŠ¡åªéœ€proxy_set_header Upgrade $http_upgrade;å°±è¶³å¤Ÿ","categories":[{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://linweiyuan.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://linweiyuan.github.io/tags/Nginx/"},{"name":"WebSocket","slug":"WebSocket","permalink":"https://linweiyuan.github.io/tags/WebSocket/"}]},{"title":"Mavenä»£ç†è®¾ç½®","slug":"Mavenä»£ç†è®¾ç½®","date":"2019-03-29T15:48:25.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/03/29/Mavenä»£ç†è®¾ç½®.html","link":"","permalink":"https://linweiyuan.github.io/2019/03/29/Maven%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE.html","excerpt":"","text":"å‚è€ƒ -&gt; Configuring a proxy ç¼–è¾‘~/.m2/settings.xmlæ–‡ä»¶ 1234567891011&lt;settings&gt; &lt;proxies&gt; &lt;proxy&gt; &lt;id&gt;proxy&lt;/id&gt; &lt;active&gt;true&lt;/active&gt; &lt;protocol&gt;https&lt;/protocol&gt; &lt;host&gt;127.0.0.1&lt;/host&gt; &lt;port&gt;8118&lt;/port&gt; &lt;/proxy&gt; &lt;/proxies&gt;&lt;/settings&gt;","categories":[{"name":"æ„å»ºå·¥å…·","slug":"æ„å»ºå·¥å…·","permalink":"https://linweiyuan.github.io/categories/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Maven","slug":"Maven","permalink":"https://linweiyuan.github.io/tags/Maven/"},{"name":"Privoxy","slug":"Privoxy","permalink":"https://linweiyuan.github.io/tags/Privoxy/"}]},{"title":"æŸç«™ç”¨æˆ·å¼±å£ä»¤","slug":"æŸç«™ç”¨æˆ·å¼±å£ä»¤","date":"2019-03-18T07:18:17.000Z","updated":"2022-11-04T01:56:25.126Z","comments":true,"path":"2019/03/18/æŸç«™ç”¨æˆ·å¼±å£ä»¤.html","link":"","permalink":"https://linweiyuan.github.io/2019/03/18/%E6%9F%90%E7%AB%99%E7%94%A8%E6%88%B7%E5%BC%B1%E5%8F%A3%E4%BB%A4.html","excerpt":"","text":"å€Ÿä¹¦å†å²è®°å½• ä¸ªäººä¿¡æ¯","categories":[{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://linweiyuan.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Vulnerability","slug":"Vulnerability","permalink":"https://linweiyuan.github.io/tags/Vulnerability/"},{"name":"ASPX","slug":"ASPX","permalink":"https://linweiyuan.github.io/tags/ASPX/"}]},{"title":"åˆ›å»ºè¿è¡ŒAVDå‘½ä»¤","slug":"åˆ›å»ºè¿è¡ŒAVDå‘½ä»¤","date":"2019-03-17T14:24:06.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2019/03/17/åˆ›å»ºè¿è¡ŒAVDå‘½ä»¤.html","link":"","permalink":"https://linweiyuan.github.io/2019/03/17/%E5%88%9B%E5%BB%BA%E8%BF%90%E8%A1%8CAVD%E5%91%BD%E4%BB%A4.html","excerpt":"","text":"åˆ›å»º 1avdmanager create avd -n &quot;9.0&quot; -k &quot;system-images;android-28;default;x86_64&quot; è¿è¡Œ 1emulator -noaudio -avd 9.0 -noaudioé˜²ç³»ç»Ÿç ´éŸ³","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://linweiyuan.github.io/tags/Android/"},{"name":"AVD","slug":"AVD","permalink":"https://linweiyuan.github.io/tags/AVD/"}]},{"title":"FFmpegä¸‹è½½M3U8","slug":"FFmpegä¸‹è½½M3U8","date":"2019-03-11T18:46:10.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2019/03/11/FFmpegä¸‹è½½M3U8.html","link":"","permalink":"https://linweiyuan.github.io/2019/03/11/FFmpeg%E4%B8%8B%E8%BD%BDM3U8.html","excerpt":"","text":"1ffmpeg -i url æ–‡ä»¶å","categories":[{"name":"å®ç”¨æŠ€å·§","slug":"å®ç”¨æŠ€å·§","permalink":"https://linweiyuan.github.io/categories/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"},{"name":"FFmpeg","slug":"FFmpeg","permalink":"https://linweiyuan.github.io/tags/FFmpeg/"}]},{"title":"VirtualBoxè®¾ç½®åˆ†è¾¨ç‡","slug":"VirtualBoxè®¾ç½®åˆ†è¾¨ç‡","date":"2019-03-06T17:10:01.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2019/03/06/VirtualBoxè®¾ç½®åˆ†è¾¨ç‡.html","link":"","permalink":"https://linweiyuan.github.io/2019/03/06/VirtualBox%E8%AE%BE%E7%BD%AE%E5%88%86%E8%BE%A8%E7%8E%87.html","excerpt":"","text":"1VBoxManage setextradata &quot;è™šæ‹Ÿæœºåå­—&quot; VBoxInternal2/EfiGraphicsResolution 1920x1080","categories":[{"name":"è™šæ‹Ÿæœº","slug":"è™šæ‹Ÿæœº","permalink":"https://linweiyuan.github.io/categories/%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"VirtualBox","slug":"VirtualBox","permalink":"https://linweiyuan.github.io/tags/VirtualBox/"}]},{"title":"Linuxç”Ÿæˆå¼ºå¯†ç ","slug":"Linuxç”Ÿæˆå¼ºå¯†ç ","date":"2019-03-06T17:07:32.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2019/03/06/Linuxç”Ÿæˆå¼ºå¯†ç .html","link":"","permalink":"https://linweiyuan.github.io/2019/03/06/Linux%E7%94%9F%E6%88%90%E5%BC%BA%E5%AF%86%E7%A0%81.html","excerpt":"","text":"1openssl rand -base64 32 | head -c 32; echo","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"}]},{"title":"æ²¹ç®¡è§†é¢‘ä¸‹è½½é…ç½®","slug":"æ²¹ç®¡è§†é¢‘ä¸‹è½½é…ç½®","date":"2019-03-06T16:58:44.000Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"2019/03/06/æ²¹ç®¡è§†é¢‘ä¸‹è½½é…ç½®.html","link":"","permalink":"https://linweiyuan.github.io/2019/03/06/%E6%B2%B9%E7%AE%A1%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD%E9%85%8D%E7%BD%AE.html","excerpt":"","text":"ä»£ç†ä¸‹è½½å¹¶è®¾ç½®æ–‡ä»¶å, æ–°å»ºæˆ–ç¼–è¾‘~/.config/youtube-dl/config 12--proxy socks5://127.0.0.1:1080-o %(title)s.%(ext)s","categories":[{"name":"å®ç”¨æŠ€å·§","slug":"å®ç”¨æŠ€å·§","permalink":"https://linweiyuan.github.io/categories/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"},{"name":"youtube-dl","slug":"youtube-dl","permalink":"https://linweiyuan.github.io/tags/youtube-dl/"}]},{"title":"ç›´æ¥æ“ä½œNextcloudæ–‡ä»¶","slug":"ç›´æ¥æ“ä½œNextcloudæ–‡ä»¶","date":"2019-02-12T10:03:19.000Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"2019/02/12/ç›´æ¥æ“ä½œNextcloudæ–‡ä»¶.html","link":"","permalink":"https://linweiyuan.github.io/2019/02/12/%E7%9B%B4%E6%8E%A5%E6%93%8D%E4%BD%9CNextcloud%E6%96%87%E4%BB%B6.html","excerpt":"","text":"ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šé¢æ“ä½œæ–‡ä»¶, çœå»äº†ä¸Šä¼ æ“ä½œ, å¤§æ–‡ä»¶å°¤å…¶é«˜æ•ˆ Nextcloud æä¾›äº†å·¥å…·, å°†æ“ä½œåŒæ­¥åˆ°æ•°æ®åº“ä¸­, æ³¨æ„æŒ‡å®šæ‰§è¡Œç”¨æˆ·, å¦åˆ™ä¼šæœ‰æƒé™é—®é¢˜ 12docker exec -it -u www-data nextcloud ./occ files:cleanupdocker exec -it -u www-data nextcloud ./occ files:scan --all åˆ·æ–°ç½‘é¡µ, å³å¯çœ‹åˆ°åŒæ­¥æ•ˆæœ","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"},{"name":"Nextcloud","slug":"Nextcloud","permalink":"https://linweiyuan.github.io/tags/Nextcloud/"}]},{"title":"æŸç«™ä»»æ„æ–‡ä»¶ä¸Šä¼ æ‹¿rootæƒé™","slug":"æŸç«™ä»»æ„æ–‡ä»¶ä¸Šä¼ æ‹¿rootæƒé™","date":"2019-02-05T05:50:07.000Z","updated":"2022-11-04T01:56:25.126Z","comments":true,"path":"2019/02/05/æŸç«™ä»»æ„æ–‡ä»¶ä¸Šä¼ æ‹¿rootæƒé™.html","link":"","permalink":"https://linweiyuan.github.io/2019/02/05/%E6%9F%90%E7%AB%99%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%8B%BFroot%E6%9D%83%E9%99%90.html","excerpt":"","text":"æŸç«™ä¸€å¤„å›¾ç‰‡ä¸Šä¼ æœªé™åˆ¶æ–‡ä»¶ç±»å‹, ä¸Šä¼ å° shell å‘ç°ç”¨æˆ·æ˜¯ root, å¯†ç æœªçŸ¥ ç›´æ¥ä¸Šä¼  ssh å…¬é’¥ ç™»å½•æˆåŠŸ","categories":[{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://linweiyuan.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Vulnerability","slug":"Vulnerability","permalink":"https://linweiyuan.github.io/tags/Vulnerability/"},{"name":"JSP","slug":"JSP","permalink":"https://linweiyuan.github.io/tags/JSP/"}]},{"title":"CoreOSåˆå§‹åŒ–è„šæœ¬","slug":"CoreOSåˆå§‹åŒ–è„šæœ¬","date":"2019-01-30T06:18:05.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2019/01/30/CoreOSåˆå§‹åŒ–è„šæœ¬.html","link":"","permalink":"https://linweiyuan.github.io/2019/01/30/CoreOS%E5%88%9D%E5%A7%8B%E5%8C%96%E8%84%9A%E6%9C%AC.html","excerpt":"","text":"1234567891011121314151617181920&#123; &quot;ignition&quot;: &#123; &quot;config&quot;: &#123;&#125;, &quot;timeouts&quot;: &#123;&#125;, &quot;version&quot;: &quot;2.1.0&quot; &#125;, &quot;networkd&quot;: &#123;&#125;, &quot;passwd&quot;: &#123; &quot;users&quot;: [ &#123; &quot;name&quot;: &quot;core&quot;, &quot;sshAuthorizedKeys&quot;: [ &quot;ssh-rsa xxx&quot; ] &#125; ] &#125;, &quot;storage&quot;: &#123;&#125;, &quot;systemd&quot;: &#123;&#125;&#125;","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"CoreOS","slug":"CoreOS","permalink":"https://linweiyuan.github.io/tags/CoreOS/"}]},{"title":"cURLå¿«é€Ÿè¿æ¥Tencent-GuestWifi","slug":"cURLå¿«é€Ÿè¿æ¥Tencent-GuestWifi","date":"2019-01-16T07:01:09.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2019/01/16/cURLå¿«é€Ÿè¿æ¥Tencent-GuestWifi.html","link":"","permalink":"https://linweiyuan.github.io/2019/01/16/cURL%E5%BF%AB%E9%80%9F%E8%BF%9E%E6%8E%A5Tencent-GuestWifi.html","excerpt":"","text":"1curl &quot;http://10.33.172.65:8000/login&quot; -d &quot;username=Tencent-GuestWifi&amp;password=$1&quot; ä½¿ç”¨ 1./wifi.sh éªŒè¯ç ","categories":[{"name":"å®ç”¨æŠ€å·§","slug":"å®ç”¨æŠ€å·§","permalink":"https://linweiyuan.github.io/categories/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"},{"name":"cURL","slug":"cURL","permalink":"https://linweiyuan.github.io/tags/cURL/"}]},{"title":"VirtualBoxé»˜è®¤Headlesså¯åŠ¨","slug":"VirtualBoxé»˜è®¤Headlesså¯åŠ¨","date":"2018-12-29T03:17:37.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2018/12/29/VirtualBoxé»˜è®¤Headlesså¯åŠ¨.html","link":"","permalink":"https://linweiyuan.github.io/2018/12/29/VirtualBox%E9%BB%98%E8%AE%A4Headless%E5%90%AF%E5%8A%A8.html","excerpt":"","text":"VBox åœ¨ i3 ä¸‹æ‰“å¼€ä¼šç¼©æˆä¸€ä¸ªå°æ¡†, ç‰¹åˆ«å®‰è£…äº†å¢å¼ºå·¥å…·å, æ ¹æœ¬æ— æ³•æ­£å¸¸ä½¿ç”¨ æ›²çº¿æ•‘å›½æ–¹æ¡ˆ æŠŠè‡ªåŠ¨æ‹‰ä¼¸å»æ‰, åˆ†è¾¨ç‡å˜æˆ 800x600 æŠŠ VBox æ”¹æˆ Headless å¯åŠ¨éšè—æ‰ i3 å°æ¡†, å‚è€ƒ -&gt; Ticket #13308 1VBoxManage modifyvm &quot;è™šæ‹Ÿæœºåå­—&quot; --defaultfrontend headless æ‰“å¼€ Remote Display, VBox èœå•ä¸Šçš„, å¦‚æœ 3389 ç«¯å£æ˜ å°„è¿˜éœ€è¦ç™»å½•å’Œé¢å¤–é…ç½®ä¸æ¨è rdesktop ç›´è¿, æ‰¾è¿‡å…¶ä»– GUI, å‘ç°ä¸å¤ªå¥½ä½¿ 1alias rdp=&quot;nohup rdesktop-vrdp 127.0.0.1 &amp;&quot; æŠŠ rdesktop ç»‘å®šå¿«æ·é”®, æˆ‘é€‰çš„æ˜¯Alt+Q 1bindsym Mod1+q [class=&quot;rdesktop&quot;] scratchpad show æš‚æ—¶è§£å†³é—®é¢˜","categories":[{"name":"è™šæ‹Ÿæœº","slug":"è™šæ‹Ÿæœº","permalink":"https://linweiyuan.github.io/categories/%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"},{"name":"i3","slug":"i3","permalink":"https://linweiyuan.github.io/tags/i3/"},{"name":"VirtualBox","slug":"VirtualBox","permalink":"https://linweiyuan.github.io/tags/VirtualBox/"}]},{"title":"Wgetä¸‹è½½Google Driveæ–‡ä»¶","slug":"Wgetä¸‹è½½Google-Driveæ–‡ä»¶","date":"2018-12-27T10:29:15.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2018/12/27/Wgetä¸‹è½½Google-Driveæ–‡ä»¶.html","link":"","permalink":"https://linweiyuan.github.io/2018/12/27/Wget%E4%B8%8B%E8%BD%BDGoogle-Drive%E6%96%87%E4%BB%B6.html","excerpt":"","text":"1wget --no-check-certificate -r &#x27;https://docs.google.com/uc?export=download&amp;id=æ–‡ä»¶ID&#x27; -O æ–‡ä»¶å å…¶ä¸­æ–‡ä»¶ ID å¯ä»¥åœ¨ Share é‡Œè·å–, æ³¨æ„-rå‚æ•°","categories":[{"name":"å®ç”¨æŠ€å·§","slug":"å®ç”¨æŠ€å·§","permalink":"https://linweiyuan.github.io/categories/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"},{"name":"Wget","slug":"Wget","permalink":"https://linweiyuan.github.io/tags/Wget/"},{"name":"Google Drive","slug":"Google-Drive","permalink":"https://linweiyuan.github.io/tags/Google-Drive/"}]},{"title":"Arch Linuxä¸‹IDEAå¤±å»ç„¦ç‚¹","slug":"Arch-Linuxä¸‹IDEAå¤±å»ç„¦ç‚¹","date":"2018-12-19T11:00:59.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/12/19/Arch-Linuxä¸‹IDEAå¤±å»ç„¦ç‚¹.html","link":"","permalink":"https://linweiyuan.github.io/2018/12/19/Arch-Linux%E4%B8%8BIDEA%E5%A4%B1%E5%8E%BB%E7%84%A6%E7%82%B9.html","excerpt":"","text":"ç¯å¢ƒArch Linux (4.19.9-arch1-1-ARCH) KDE + Plasma IDEA 2018.3.2 æè¿°çª—å£åˆ‡æ¢å, ç»å¸¸åˆ‡æ¢ä¸å›æ¥, ä»»åŠ¡æ è™½ç„¶æœ‰ç„¦ç‚¹, ä½†æ˜¯çª—å£æ— æ³•æ˜¾ç¤º, è¦ç‚¹å…¶ä»–çª—å£åå†ç‚¹å› IDEA æ‰èƒ½åˆ‡æ¢å›æ¥, éå¸¸ä¸ä¾¿ è§£å†³æ–¹æ¡ˆå‚è€ƒ -&gt; IntelliJ stealing focus, ä¿®æ”¹ Help -&gt; Edit Custom Properties 1suppress.focus.stealing=false é‡å¯ IDEA å, ä¸€åˆ‡æ­£å¸¸","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"},{"name":"IDEA","slug":"IDEA","permalink":"https://linweiyuan.github.io/tags/IDEA/"}]},{"title":"è§£å†³ZuulFilterä¹±ç ","slug":"è§£å†³ZuulFilterä¹±ç ","date":"2018-12-16T18:03:38.000Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"2018/12/16/è§£å†³ZuulFilterä¹±ç .html","link":"","permalink":"https://linweiyuan.github.io/2018/12/16/%E8%A7%A3%E5%86%B3ZuulFilter%E4%B9%B1%E7%A0%81.html","excerpt":"","text":"è®¾ç½®å“åº”å¤´ 1234val context = RequestContext.getCurrentContext()context.setSendZuulResponse(false)context.addZuulResponseHeader(&quot;Content-Type&quot;, &quot;application/json;charset=UTF-8&quot;)context.responseBody = JSON.toJSONString(response)","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://linweiyuan.github.io/tags/Spring-Cloud/"},{"name":"Zuul","slug":"Zuul","permalink":"https://linweiyuan.github.io/tags/Zuul/"}]},{"title":"Spring Boot jarç˜¦èº«æ–¹æ¡ˆ","slug":"Spring-Boot-jarç˜¦èº«æ–¹æ¡ˆ","date":"2018-12-14T10:16:01.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/12/14/Spring-Boot-jarç˜¦èº«æ–¹æ¡ˆ.html","link":"","permalink":"https://linweiyuan.github.io/2018/12/14/Spring-Boot-jar%E7%98%A6%E8%BA%AB%E6%96%B9%E6%A1%88.html","excerpt":"","text":"Spring Boot å›ºç„¶å¥½ç”¨, åå…«èˆ¬æ­¦è‰ºé›†äºä¸€èº«, ä½†æ˜¯å¸¦æ¥çš„åæœæ˜¯ jar åŒ…å¤ªå¤§, æ™®é€šåŠ ä¸ª web æ¨¡å—å†™ä¸ª HelloWorldController æ‰“åŒ…å‡ºæ¥éƒ½è¦ 30+M, å¦‚æœè¦ä¿®æ”¹ä¸€è¡Œä»£ç æˆ–é…ç½®éƒ½è¦é‡æ–°ä¸Šä¼ ã€‚å›½å¤– VPS è¿˜å¥½, å¸¦å®½å¼¥è¡¥äº†å°å»¶è¿Ÿçš„ä¸è¶³, å›½å†…å°æ°´ç®¡ç®€ç›´ä¸èƒ½å¿, å½“ç„¶ CI&#x2F;CD å°±å¦å½“åˆ«è®º åœ¨ä½¿ç”¨ Spring Cloud è¿‡ç¨‹ä¸­, æŠŠé¡¹ç›®åˆ†æˆäº†å‡ ä¸ªå¾®æœåŠ¡, åŠ äº†å‡ ä¸ª Spring Cloud ç»„ä»¶å’Œé¡¹ç›®å…¬ç”¨æ¨¡å—å, æ‰“åŒ…å‡ºæ¥çš„ jar æœ‰ 200+M, è¿™ä¸åˆ©äºå¿«é€Ÿè¿­ä»£ã€‚å¥½åœ¨ Maven å’Œ Gradle éƒ½æä¾›äº†ä¸€äº›æ–¹æ³• Maven ç¯‡è™½ç„¶å¯ä»¥é€šè¿‡mvn dependency:copy-dependenciesæŠŠä¾èµ–æ‹·å‡ºæ¥, ä½†æ˜¯å¦‚æœé¡¹ç›®ä¸­æœ‰ç›¸äº’ä¾èµ–, ä¼šæŠ¥é”™, æ‰€ä»¥è¿˜æ˜¯æ‰‹åŠ¨æŠŠ jar åŒ…åˆ†è§£ Spring Boot æ‰“åŒ…å‡ºæ¥çš„ jar åŒ…ç»“æ„æ˜¯ 123- BOOT-INF - classes - lib æŠŠ lib æ‹·åˆ°æŸä¸ªä½ç½®, å…¶ä»–å¾®æœåŠ¡ jar å¤„ç†æ–¹å¼ä¸€æ ·, jar åŒ…æç¤ºé‡å¤å°±è·³è¿‡ åˆ†è§£å®Œåä¿®æ”¹parentçš„pom.xml 1234567891011121314151617&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;layout&gt;ZIP&lt;/layout&gt; &lt;includes&gt; &lt;include&gt; &lt;groupId&gt;qw&lt;/groupId&gt; &lt;artifactId&gt;er&lt;/artifactId&gt; &lt;/include&gt; &lt;/includes&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; groupIdå’ŒartifactIdæ„é€ ä¸€ä¸ªä¸å­˜åœ¨çš„, ç„¶åå†æ‰“åŒ…, æ­¤æ—¶æ‰“å‡ºæ¥çš„ jar åŒ…ç»“æ„æ˜¯ 12- BOOT-INF - classes è¿™é‡Œæ³¨æ„ layout è¦æ”¹æˆ ZIP, jar åŒ…é…ç½®ä¸ºMain-Class: org.springframework.boot.loader.PropertiesLauncher å¦‚æœä¸æ”¹, é…ç½®ä¸ºMain-Class: org.springframework.boot.loader.JarLauncher, ä¼šæ— æ³•å¯åŠ¨ Gradle ç¯‡ ï¼ˆåŸºäº Kotlin DSL, é Groovyï¼‰12345678tasks &#123; withType&lt;BootJar&gt; &#123; manifest &#123; attributes(&quot;Main-Class&quot; to &quot;org.springframework.boot.loader.PropertiesLauncher&quot;) &#125; exclude(&quot;**/*.jar&quot;) &#125;&#125; æŸ¥çœ‹ä¸€ä¸‹å¤§å°, åªæœ‰ 100+K, æœªåˆ†è§£ä¹‹å‰æ˜¯ 200+M, æ­¤æ—¶åŸºæœ¬å¯ä»¥å®ç°ç§’ä¼  æœ€åä¿®æ”¹ jar åŒ…å¯åŠ¨æ–¹å¼ 1java -jar -Dloader.path=jaråŒ…åˆ†è§£å‡ºæ¥çš„è·¯å¾„ jaråŒ… æˆ–è€…ç›´æ¥å†™è¿›é…ç½®æ–‡ä»¶loader.propertiesï¼ˆyml æ–‡ä»¶ä¸è¡Œï¼‰å†æ‰“åŒ…, å°±ä¸éœ€è¦é¢å¤–å†æŒ‡å®šç¯å¢ƒå˜é‡ 1loader.path=jaråŒ…åˆ†è§£å‡ºæ¥çš„è·¯å¾„ æ­¤æ—¶ jar å¯ä»¥æ­£å¸¸å¯åŠ¨æä¾›æœåŠ¡ å¦‚æœæ˜¯å®¹å™¨éƒ¨ç½², åªéœ€æŒ‚è½½ lib è¿›å»å³å¯","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://linweiyuan.github.io/tags/Spring-Cloud/"},{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://linweiyuan.github.io/tags/Spring-Boot/"}]},{"title":"æ§åˆ¶Dockerå®¹å™¨å¯åŠ¨é¡ºåº","slug":"æ§åˆ¶Dockerå®¹å™¨å¯åŠ¨é¡ºåº","date":"2018-12-12T08:07:48.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2018/12/12/æ§åˆ¶Dockerå®¹å™¨å¯åŠ¨é¡ºåº.html","link":"","permalink":"https://linweiyuan.github.io/2018/12/12/%E6%8E%A7%E5%88%B6Docker%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E9%A1%BA%E5%BA%8F.html","excerpt":"","text":"æœ‰äº›åœºæ™¯éœ€è¦æ§åˆ¶ Docker å®¹å™¨çš„å¯åŠ¨é¡ºåº, æ¯”å¦‚ä¸€ä¸ªåç«¯æœåŠ¡è¦ä¾èµ– MySQLã€Redisã€RabbitMQ ç­‰, åˆæˆ–è€… Eureka Client ä¸€å®šè¦åœ¨ Eureka Server å¯åŠ¨åæ‰èƒ½è¿æ¥ã€ä» Config Server è·å–é…ç½®ç­‰ Docker æä¾›äº† depends_on ç­‰ä¸œè¥¿, é¡¾åæ€ä¹‰å°±æ˜¯å¤„ç†ä¾èµ–å…³ç³»çš„, ä½†å…¶å®å¹¶ä¸æ˜¯ æ¯”å¦‚æœ‰ Aã€B, B depends_on A, å®¹å™¨å¯åŠ¨æ—¶, Docker ä¼šç¡®ä¿å…ˆå¯åŠ¨ A å†å¯åŠ¨ B, ä½†æ˜¯å¯èƒ½ B å¯åŠ¨å®Œäº† A è¿˜åœ¨å¯åŠ¨, å®ƒå¹¶ä¸èƒ½ä¿è¯ A å¯åŠ¨å®Œäº† B æ‰å¯åŠ¨, è¯¦æƒ… -&gt; Control startup order in Compose Docker æ¨èäº†å‡ ä¸ªéå®˜æ–¹å·¥å…·, éƒ½è¯•è¿‡å, å‘ç°åªæœ‰dockerizeèƒ½ç”¨ wait-for-it.shè¿™ç©æ„ä¸å…¼å®¹ alpine, ç›´æ¥æŠ¥é”™ wait-forè¿™ç©æ„è¯´æ˜¯å…¼å®¹äº† alpine, ä½†æ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­å…¨éƒ¨è¯·æ±‚éƒ½è¶…æ—¶æ— æ³•è¿›è¡Œä¸‹ä¸€æ­¥, ä¸çŸ¥é“æ˜¯ä¸æ˜¯æ‰“å¼€æ–¹å¼ä¸å¯¹ dockerizeåªéœ€è¦åŠ å…¥åˆ°å®¹å™¨ä¸­è¿è¡Œå³å¯, ä¸æƒ³æ‰‹åŠ¨åŠ çš„å¯ä»¥è‡ªå·± build ä¸€ä¸ªé•œåƒå‡ºæ¥ é¦–å…ˆç»™dockerizeåŠ æ‰§è¡Œæƒé™, ç„¶åç¼–å†™ Dockerfile 123FROM openjdk:8-jre-alpineADD dockerize /dockerize build å®Œä¹‹åæ›¿æ¢åŸæ¥é•œåƒ, æ”¹å†™æ‰§è¡Œå‘½ä»¤, æ¯”å¦‚ Zuul ä¾èµ– Eureka Server 123zuul: image: ä½ åˆšbuildçš„é•œåƒ command: ./dockerize -wait tcp://eureka-server:8761 -- java -jar -Xms64m -Xmx64m /zuul.jar docker-compose å¯åŠ¨å, ä¼šå‡ºç°ç±»ä¼¼ä¿¡æ¯ 12345zuul | 2018/12/12 08:04:37 Waiting for: tcp://eureka-server:8761...zuul_1 | 2018/12/12 08:04:42 Problem with dial: dial tcp 172.17.0.1:8761: connect: connection refused. Sleeping 1s...zuul_1 | 2018/12/12 08:27:10 Connected to tcp://eureka-server:8761 ç­‰ Eureka Server å¯åŠ¨å®Œ, Zuul æ‰å¯åŠ¨","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"},{"name":"Docker Compose","slug":"Docker-Compose","permalink":"https://linweiyuan.github.io/tags/Docker-Compose/"}]},{"title":"RabbitMQ in Dockerå†…å­˜è®¾ç½®","slug":"RabbitMQ-in-Dockerå†…å­˜è®¾ç½®","date":"2018-12-11T14:41:28.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/12/11/RabbitMQ-in-Dockerå†…å­˜è®¾ç½®.html","link":"","permalink":"https://linweiyuan.github.io/2018/12/11/RabbitMQ-in-Docker%E5%86%85%E5%AD%98%E8%AE%BE%E7%BD%AE.html","excerpt":"","text":"123rabbitmq: environment: - RABBITMQ_VM_MEMORY_HIGH_WATERMARK=96M","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"},{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"https://linweiyuan.github.io/tags/RabbitMQ/"}]},{"title":"Dockerå®¹å™¨dpkgæŠ¥é”™","slug":"Dockerå®¹å™¨dpkgæŠ¥é”™","date":"2018-12-10T13:39:25.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/12/10/Dockerå®¹å™¨dpkgæŠ¥é”™.html","link":"","permalink":"https://linweiyuan.github.io/2018/12/10/Docker%E5%AE%B9%E5%99%A8dpkg%E6%8A%A5%E9%94%99.html","excerpt":"","text":"åœ¨ Arch Linux çš„ Kernel æ»šåˆ° 4.19 å, å®¹å™¨å†…æ‰§è¡Œ Debian ç³»çš„ dpkg æŠ¥é”™, ä¸€èˆ¬æ˜¯ 1dpkg: error: error creating new backup file &#x27;/var/lib/dpkg/status-old&#x27;: Invalid cross-device link åŸå›  -&gt; #836211 - dpkg: Cannot upgrade some packages on overlayfs: Invalid cross-device link - Debian Bug report log åœ¨å®˜æ–¹ä¿®å¤è¿™ä¸ª bug ä¹‹å‰, è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ä¸ª é™çº§å†…æ ¸è‡³ 4.18 ä¿®æ”¹å†…æ ¸å‚æ•°(æ¨è) ä¿®æ”¹å†…æ ¸å‚æ•°æœ‰å‡ ä¸ªæ–¹å¼, æ¯”è¾ƒæ–¹ä¾¿çš„æ˜¯æ”¹/etc/default/grub, åŠ ä¸Šoverlay.metacopy=N 1GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet overlay.metacopy=N&quot; ä¿®æ”¹å®Œå, é‡æ–°ç”Ÿæˆgrub.cfg 1sudo grub-mkconfig -o /boot/grub/grub.cfg åˆ°ç›®å‰ä¸ºæ­¢(18 å¹´ 12 æœˆ 10 æ—¥), å†…æ ¸æ»šåˆ°äº† 4.19.8, è¿™ä¸ª bug è¿˜å­˜åœ¨4.19.11-arch1-1-ARCH (18 å¹´ 12 æœˆ 21 æ—¥)ä¿®å¤äº†è¿™ä¸ª bug","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"}]},{"title":"Feignä½¿ç”¨Hystrixä¸ç”Ÿæ•ˆ","slug":"Feignä½¿ç”¨Hystrixä¸ç”Ÿæ•ˆ","date":"2018-12-05T14:31:29.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/12/05/Feignä½¿ç”¨Hystrixä¸ç”Ÿæ•ˆ.html","link":"","permalink":"https://linweiyuan.github.io/2018/12/05/Feign%E4%BD%BF%E7%94%A8Hystrix%E4%B8%8D%E7%94%9F%E6%95%88.html","excerpt":"","text":"æ£€æŸ¥æ˜¯ä¸æ˜¯ç‰ˆæœ¬é—®é¢˜, å‚è€ƒ -&gt;Disable HystrixCommands For FeignClients By Default ä¿®æ”¹é…ç½® 123feign: hystrix: enabled: true","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://linweiyuan.github.io/tags/Spring-Cloud/"},{"name":"Feign","slug":"Feign","permalink":"https://linweiyuan.github.io/tags/Feign/"},{"name":"Hystrix","slug":"Hystrix","permalink":"https://linweiyuan.github.io/tags/Hystrix/"}]},{"title":"Arch Linuxè§£å†³deepin-wechaté—ªé€€","slug":"Arch-Linuxè§£å†³deepin-wechaté—ªé€€","date":"2018-12-05T02:37:11.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/12/05/Arch-Linuxè§£å†³deepin-wechaté—ªé€€.html","link":"","permalink":"https://linweiyuan.github.io/2018/12/05/Arch-Linux%E8%A7%A3%E5%86%B3deepin-wechat%E9%97%AA%E9%80%80.html","excerpt":"","text":"1yaourt -S deepin-wechat å®‰è£…åå¯åŠ¨é—ªé€€, ä¿®æ”¹é…ç½®æ–‡ä»¶/opt/deepinwine/apps/Deepin-WeChat/run.sh åŸå†…å®¹ 1/opt/deepinwine/tools/run.sh $BOTTLENAME $APPVER &quot;$1&quot; &quot;$2&quot; &quot;$3&quot; æ³¨é‡Šæ‰, æˆ–è€…æ›¿æ¢ä¸º 1env WINEPREFIX=&quot;$HOME/.deepinwine/Deepin-WeChat&quot; wine &quot;c:\\\\Program Files\\\\Tencent\\\\WeChat\\\\WeChat.exe&quot; &amp; å¯åŠ¨ä¸€åˆ‡æ­£å¸¸, ç‰ˆæœ¬2.6.4.38-4","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"},{"name":"deepin-wechat","slug":"deepin-wechat","permalink":"https://linweiyuan.github.io/tags/deepin-wechat/"}]},{"title":"Arch Linuxå®‰è£…è„šæœ¬","slug":"Arch-Linuxå®‰è£…è„šæœ¬","date":"2018-11-17T09:53:20.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/11/17/Arch-Linuxå®‰è£…è„šæœ¬.html","link":"","permalink":"https://linweiyuan.github.io/2018/11/17/Arch-Linux%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC.html","excerpt":"","text":"é€‚ç”¨äºUEFI + KDE + Plasma 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299#!/bin/bashprepare() &#123; # åˆ†åŒº DISK=/dev/nvme0n1 ESP=/dev/nvme0n1p1 ROOT=/dev/nvme0n1p2 parted $DISK mklabel gpt parted $DISK mkpart primary 1 512M parted $DISK mkpart primary &#x27;512M -1&#x27; # -1è½¬ä¹‰ parted $DISK set 1 boot on # æ ¼å¼åŒ– mkfs.fat -F32 $ESP mkfs.ext4 $ROOT # æŒ‚è½½ mount $ROOT /mnt mkdir -p /mnt/boot/efi mount $ESP /mnt/boot/efi # archlinuxæº echo &#x27;Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/x86_64&#x27; &gt; /etc/pacman.d/mirrorlist # å®‰è£… pacstrap /mnt base base-devel bash-completion grub efibootmgr genfstab -U -p /mnt &gt; /mnt/etc/fstab # é…ç½®grub arch-chroot /mnt grub-install --efi-directory=/boot/efi --bootloader-id=Arch arch-chroot /mnt grub-mkconfig -o /boot/grub/grub.cfg arch-chroot /mnt sed &#x27;/set timeout=5/&#123;s/5/0/&#125;&#x27; -i /boot/grub/grub.cfg # åé¢è¿˜ä¼šç”¨åˆ° cp install.sh /mnt/root # é‡å¯ umount /mnt/boot/efi umount /mnt reboot -f&#125;pgk=( adobe-source-han-sans-cn-fonts adobe-source-han-sans-jp-fonts adobe-source-han-sans-kr-fonts # anaconda android-apktool android-emulator android-file-transfer # android-ndk android-platform android-sdk-build-tools android-studio android-support android-support-repository android-tools apache-tools ark chromium deepin-screenshot deepin-screen-recorder docker docker-compose # docker-machine dolphin fcitx-im fcitx-sogoupinyin filelight filezilla # gimp git gwenview gradle intellij-idea-ultimate-edition intellij-idea-ultimate-edition-jre jdk8 jq kate kcm-fcitx kdialog kinfocenter konsole libreoffice-still libsodium lrzsz maven metasploit mlocate netease-cloud-music net-tools nodejs noto-fonts noto-fonts-emoji npm ntfs-3g okteta okular # openntpd openssh pepper-flash phonon-qt5-vlc plasma-desktop plasma-nm plasma-pa powerdevil # powerpill privoxy proxychains-ng python-pip redis-desktop-manager rsync sddm shadowsocks sublime-text-dev teamviewer typora unrar unzip user-manager virtualbox-ext-oracle virtualbox-guest-iso virtualbox-host-modules-arch vokoscreen-git wewechat wireshark-qt xorg-server xorg-xkill yakuake youtube-dl zip zsh)aur=( android-google-repository android-sources-28 android-x86-64-system-image-28 archlinux-themes-sddm burpsuite deepin-wine-thunderspeed dex2jar dirbuster # jd-gui # buildå¤ªä¹… maltego python-genpac)aur() &#123; yaourt -S --noconfirm --needed $&#123;aur[@]&#125;&#125;setup() &#123; # åŸºæœ¬æ•°æ® HOSTNAME=&#x27;ä¸»æœºå&#x27; USERNAME=&#x27;ç”¨æˆ·å&#x27; PASSWORD=&#x27;å¯†ç &#x27; SS_CONFIG_NAME=&#x27;SSé…ç½®æ–‡ä»¶å&#x27; SS_SERVER=&#x27;SSæœåŠ¡å™¨åœ°å€&#x27; SS_PORT=&#x27;SSç«¯å£&#x27; SS_PASSWORD=&#x27;SSå¯†ç &#x27; SS_METHOD=&#x27;SSåŠ å¯†æ–¹å¼&#x27; # archlinuxcnæº sed &#x27;/#Color\\|#TotalDownload\\|#\\[multilib\\]/&#123;s/#//&#125;&#x27; -i /etc/pacman.conf sed &#x27;s/Required DatabaseOptional/Never/g&#x27; -i /etc/pacman.conf sed &#x27;94s/#//&#x27; -i /etc/pacman.conf # [multilib] echo -e &#x27;\\n[archlinuxcn]\\nServer = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/x86_64&#x27; &gt;&gt; /etc/pacman.conf pacman -Syy --noconfirm archlinuxcn-keyring yaourt # ç”¨æˆ· useradd -m $USERNAME # sudoå…å¯†ç  echo -e &quot;\\n$USERNAME ALL=(ALL) NOPASSWD: ALL&quot; &gt;&gt; /etc/sudoers echo $USERNAME:$PASSWORD | chpasswd # å®‰è£…éœ€è¦çš„åŒ… pacman -S --noconfirm --needed $&#123;pgk[@]&#125; # shadowsocks mv /etc/shadowsocks/example.json /etc/shadowsocks/$SS_CONFIG_NAME.json sed &quot;s/my_server_ip/$SS_SERVER/g&quot; -i /etc/shadowsocks/$SS_CONFIG_NAME.json sed &quot;s/8388/$SS_PORT/g&quot; -i /etc/shadowsocks/$SS_CONFIG_NAME.json sed &quot;s/mypassword/$SS_PASSWORD/g&quot; -i /etc/shadowsocks/$SS_CONFIG_NAME.json sed &quot;s/aes-256-cfb/$SS_METHOD/g&quot; -i /etc/shadowsocks/$SS_CONFIG_NAME.json systemctl enable shadowsocks@$SS_CONFIG_NAME.service systemctl start shadowsocks@$SS_CONFIG_NAME.service # proxychains-ng sed &#x27;/#quiet_mode/&#123;s/#//&#125;&#x27; -i /etc/proxychains.conf # å‡å°‘è¾“å‡º sed &quot;s/socks4 127.0.0.1 9050/\\nsocks5 127.0.0.1 1080/g&quot; -i /etc/proxychains.conf # privoxy sed &#x27;s/127.0.0.1:8118/0.0.0.0:8118/g&#x27; -i /etc/privoxy/config echo -e &#x27;\\nforward-socks5 / 127.0.0.1:1080 .&#x27; &gt;&gt; /etc/privoxy/config systemctl enable privoxy.service systemctl start privoxy.service sleep 1s # é…ç½®ç”Ÿæ•ˆå»¶è¿Ÿ # AURä½¿ç”¨HTTPä»£ç† export http_proxy=127.0.0.1:8118 export https_proxy=127.0.0.1:8118 # AURä¸èƒ½ç”¨root cp install.sh /home/$USERNAME/ chown $USERNAME:$USERNAME /home/$USERNAME/install.sh cd /home/$USERNAME # æƒé™é—®é¢˜ su $USERNAME -c &quot;/home/$USERNAME/install.sh aur&quot; ################################################## # è¯¦ç»†é…ç½® # ä¸»æœº hostnamectl set-hostname $HOSTNAME # æ—¶åŒº timedatectl set-timezone Asia/Shanghai # å›½é™…åŒ– sed &#x27;/#en_US.UTF-8\\|#zh_CN.UTF-8/&#123;s/#//&#125;&#x27; -i /etc/locale.gen locale-gen echo &#x27;LANG=en_US.UTF-8&#x27; &gt; /etc/locale.conf # åŸºæœ¬æ–‡ä»¶å¤¹ su $USERNAME -c &#x27;cd ~ &amp;&amp; mkdir Data Documents Downloads Music Pictures Project Software Temp Videos&#x27; # anaconda # echo &#x27;export PATH=/opt/anaconda/bin:$PATH&#x27; &gt;&gt; /etc/profile # android echo &#x27;export ANDROID_HOME=/opt/android-sdk&#x27; &gt;&gt; /etc/profile ln -s /opt/android-ndk /opt/android-sdk/ndk-bundle chown -R $USERNAME:$USERNAME /opt/android-sdk # Android Studioéœ€è¦å†™æ–‡ä»¶åˆ°è¿™äº›ç›®å½•ï¼ŒAURé‡Œæ‰¾ä¸åˆ°åŒ… # chown -R $USERNAME:$USERNAME /opt/android-ndk # deepin-screen-recorder su $USERNAME -c &quot;mkdir -p /home/$USERNAME/.config/deepin/deepin-screen-recorder&quot; su $USERNAME -c &quot;echo -e \\&quot;[fileformat]\\nsave_directory=/home/$USERNAME/Videos\\&quot; &gt; ~/.config/deepin/deepin-screen-recorder/config.conf&quot; # docker gpasswd -a $USERNAME docker mkdir /etc/systemd/system/docker.service.d echo -e &#x27;[Service]\\nEnvironment=&quot;HTTP_PROXY=127.0.0.1:8118&quot;\\nEnvironment=&quot;HTTPS_PROXY=127.0.0.1:8118&quot;&#x27; &gt; /etc/systemd/system/docker.service.d/proxy.conf # å³ä½¿å®˜æ–¹ä¸­å›½ä»“åº“æˆ–é˜¿é‡Œäº‘ä¹Ÿä¸å¥½ä½¿ systemctl enable docker.service # fcitx su $USERNAME -c &quot;echo -e &#x27;export GTK_IM_MODULE=fcitx\\nexport QT_IM_MODULE=fcitx\\nexport XMODIFIERS=@im=fcitx&#x27; &gt; /home/$USERNAME/.xprofile&quot; # jdk echo &#x27;export JAVA_HOME=/usr/lib/jvm/java-8-jdk&#x27; &gt;&gt; /etc/profile # mlocate updatedb # nano sed &#x27;48s/# //&#x27; -i /etc/nanorc # è¡Œå· sed &#x27;262s/# //&#x27; -i /etc/nanorc # ä»£ç é«˜äº® # nodejs npm i -g cnpm --registry=https://registry.npm.taobao.org npm i -g hexo-cli # openntpd # systemctl enable openntpd.service # systemctl start openntpd.service # plasma-nm systemctl enable NetworkManager.service # privoxy sed &#x27;s/127.0.0.1:8118/0.0.0.0:8118/g&#x27; -i /etc/privoxy/config echo -e &#x27;\\nforward-socks5 / 127.0.0.1:1080 .&#x27; &gt;&gt; /etc/privoxy/config systemctl enable privoxy.service systemctl start privoxy.service # python-genpac su $USERNAME -c &quot;genpac --format=pac --pac-proxy=\\&quot;SOCKS5 127.0.0.1:1080\\&quot; &gt; /home/$USERNAME/.pac&quot; # sddm sddm --example-config &gt; /etc/sddm.conf sed &#x27;/Current=/&#123;s/=/=archlinux-simplyblack/&#125;&#x27; -i /etc/sddm.conf # ä¸»é¢˜ systemctl enable sddm.service # teamviewer systemctl enable teamviewerd.service # virtualbox gpasswd -a $USERNAME vboxusers # wireshark gpasswd -a $USERNAME wireshark # zsh echo $PASSWORD | sudo -S su $USERNAME -c &quot;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot; reboot -f&#125;$1 è¿›å…¥ livecd æ—¶æ‰§è¡Œ 1./install.sh prepare é‡å¯åæ‰§è¡Œ 1./install setup","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://linweiyuan.github.io/tags/Shell/"}]},{"title":"Kotliné‡å¯å¤©ç¿¼ç½‘å…³","slug":"Kotliné‡å¯å¤©ç¿¼ç½‘å…³","date":"2018-11-13T10:24:39.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/11/13/Kotliné‡å¯å¤©ç¿¼ç½‘å…³.html","link":"","permalink":"https://linweiyuan.github.io/2018/11/13/Kotlin%E9%87%8D%E5%90%AF%E5%A4%A9%E7%BF%BC%E7%BD%91%E5%85%B3.html","excerpt":"","text":"Jsoup ä¾èµ– 1implementation &quot;org.jsoup:jsoup:1.11.3&quot; 1234567891011121314151617181920212223242526272829303132333435363738import org.jsoup.Connectionimport org.jsoup.Jsoupimport java.util.regex.Patternfun main(args: Array&lt;String&gt;) &#123; val username = &quot;admin&quot; val password = &quot;123456&quot; val gateway = &quot;http://192.168.1.1&quot; val indexUrl = &quot;$gateway/cgi-bin/luci&quot; val rebootUrl = &quot;$gateway/cgi-bin/luci/admin/reboot&quot; val response = Jsoup.connect(indexUrl) .data(&quot;username&quot;, username) .data(&quot;psd&quot;, password) .method(Connection.Method.POST) .followRedirects(false) .execute() when (response.statusCode()) &#123; 200 -&gt; println(&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;) 302 -&gt; &#123; val cookies = response.cookies() val html = Jsoup.connect(&quot;$gateway$&#123;response.header(&quot;Location&quot;)&#125;&quot;) .cookies(cookies) .get() .html() val matcher = Pattern.compile(&quot;token: &#x27;(.*?)&#x27;&quot;).matcher(html) if (matcher.find()) &#123; Jsoup.connect(rebootUrl) .cookies(cookies) .data(&quot;token&quot;, matcher.group(1)) .post() &#125; &#125; &#125;&#125;","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://linweiyuan.github.io/tags/Kotlin/"},{"name":"jsoup","slug":"jsoup","permalink":"https://linweiyuan.github.io/tags/jsoup/"}]},{"title":"Arch Linuxç½‘æ˜“äº‘éŸ³ä¹Bugè§£å†³","slug":"Arch-Linuxç½‘æ˜“äº‘éŸ³ä¹Bugè§£å†³","date":"2018-10-27T16:50:12.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/10/27/Arch-Linuxç½‘æ˜“äº‘éŸ³ä¹Bugè§£å†³.html","link":"","permalink":"https://linweiyuan.github.io/2018/10/27/Arch-Linux%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90Bug%E8%A7%A3%E5%86%B3.html","excerpt":"","text":"å¿˜è®°ä»å“ªä¸ªç‰ˆæœ¬å¼€å§‹, ç½‘æ˜“äº‘éŸ³ä¹æ‰“å¼€å…³æ‰ç•Œé¢å, ç¨‹åºåœ¨ç³»ç»Ÿæ‰˜ç›˜åŒºèµ°åˆ°äº†é€šçŸ¥æ é‚£é‡Œ (KDE + Plasma), å¹¶ä¸”æ— æ³•æ‰“å¼€å³é”®èœå•, å‚è€ƒ -&gt; AUR (en) - netease-cloud-musicä¸Šçš„è§£å†³æ–¹æ¡ˆ, ä¿®æ”¹å¯åŠ¨å‘½ä»¤ 1XDG_CURRENT_DESKTOP=DDE netease-cloud-music %U","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"}]},{"title":"Arch Linuxå–æ¶ˆRedis Desktop Managerçš„è‡ªåŠ¨æ›´æ–°","slug":"Arch-Linuxå–æ¶ˆRedis-Desktop-Managerçš„è‡ªåŠ¨æ›´æ–°","date":"2018-10-27T16:38:51.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/10/27/Arch-Linuxå–æ¶ˆRedis-Desktop-Managerçš„è‡ªåŠ¨æ›´æ–°.html","link":"","permalink":"https://linweiyuan.github.io/2018/10/27/Arch-Linux%E5%8F%96%E6%B6%88Redis-Desktop-Manager%E7%9A%84%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0.html","excerpt":"","text":"è®©Pacmanå»ç®¡ç†è½¯ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒå¥½, ä¿®æ”¹/etc/hosts 10.0.0.0 redisdesktop.com","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"}]},{"title":"è§£å†³SSHç™»å½•CentOSæ…¢","slug":"è§£å†³SSHç™»å½•CentOSæ…¢","date":"2018-10-18T10:00:25.000Z","updated":"2022-11-04T01:56:25.134Z","comments":true,"path":"2018/10/18/è§£å†³SSHç™»å½•CentOSæ…¢.html","link":"","permalink":"https://linweiyuan.github.io/2018/10/18/%E8%A7%A3%E5%86%B3SSH%E7%99%BB%E5%BD%95CentOS%E6%85%A2.html","excerpt":"","text":"å…³é—­ DNS åå‘è§£æ ç¼–è¾‘/etc/ssh/sshd_config 1UseDNS no","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"CentOS","slug":"CentOS","permalink":"https://linweiyuan.github.io/tags/CentOS/"}]},{"title":"Arch Linuxæœç‹—è¾“å…¥æ³•æ»šæŒ‚","slug":"Arch-Linuxæœç‹—è¾“å…¥æ³•æ»šæŒ‚","date":"2018-09-15T03:41:17.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/09/15/Arch-Linuxæœç‹—è¾“å…¥æ³•æ»šæŒ‚.html","link":"","permalink":"https://linweiyuan.github.io/2018/09/15/Arch-Linux%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95%E6%BB%9A%E6%8C%82.html","excerpt":"","text":"æœç‹—è¾“å…¥æ³•æ»šæŒ‚äº†, è€æ˜¯æç¤ºè¾“å…¥æ³•å¼‚å¸¸, è¯·åˆ é™¤é…ç½®æ–‡ä»¶ä»€ä¹ˆçš„, è¯•è¿‡å…¨éƒ¨ä¸è¡Œ ä¸çŸ¥é“æ€ä¹ˆè§£å†³, WiKi ä¹Ÿæ²¡è¯´ä»€ä¹ˆ, äºæ˜¯è‡ªå·±æ‘¸ç´¢ å°å¼æœºæ»šæŒ‚äº†, ç¬”è®°æœ¬è¿˜æ˜¯å¥½çš„, äºæ˜¯æŠŠé…ç½® rsync è¿‡å», not work é‡ç°ç¯å¢ƒ, å‡çº§ç¬”è®°æœ¬, é‡å¯åæœç„¶æ»šæŒ‚äº†, æŸ¥çœ‹æ—¥å¿—æªå‡ºå‡ ä¸ªè½¯ä»¶ æ”¹æºã€pacman -Suu é™çº§ã€pacman -U ç­‰ä¸€ç³»åˆ—æ“ä½œæœ€åçš„æœ€åå‘ç°æ˜¯ libidn-1.34-2-x86_64.pkg.tar.xz ç”±äº vlc-3.0.4-2-x86_64.pkg.tar.xz åˆä¾èµ–å®ƒ, æ‰€ä»¥æŠŠè¿™ä¸¤ä¸ªæš‚æ—¶åŠ å…¥ IgnorePkg æ¢å¤æ­£å¸¸, æœç‹—è¾“å…¥æ³•å½“å‰ç‰ˆæœ¬ç‰ˆæœ¬2.2.0.0108-3 å½“å¤©è¾“å…¥æ³•æ›´æ–°, ä¿®å¤äº†è¿™ä¸ª bug -&gt; fcitx-sogoupinyin 2.2.0.0108-4","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"},{"name":"Fcitx","slug":"Fcitx","permalink":"https://linweiyuan.github.io/tags/Fcitx/"}]},{"title":"MySQL in Dockeræ—¶åŒºè®¾ç½®","slug":"MySQL-in-Dockeræ—¶åŒºè®¾ç½®","date":"2018-09-04T10:03:54.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/09/04/MySQL-in-Dockeræ—¶åŒºè®¾ç½®.html","link":"","permalink":"https://linweiyuan.github.io/2018/09/04/MySQL-in-Docker%E6%97%B6%E5%8C%BA%E8%AE%BE%E7%BD%AE.html","excerpt":"","text":"123mysql: environment: - TZ=Asia/Shanghai","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"},{"name":"MySQL","slug":"MySQL","permalink":"https://linweiyuan.github.io/tags/MySQL/"}]},{"title":"Jenkins in Dockerä¿®æ”¹æ—¶é—´","slug":"Jenkins-in-Dockeræ—¶åŒºè®¾ç½®","date":"2018-09-03T15:02:26.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/09/03/Jenkins-in-Dockeræ—¶åŒºè®¾ç½®.html","link":"","permalink":"https://linweiyuan.github.io/2018/09/03/Jenkins-in-Docker%E6%97%B6%E5%8C%BA%E8%AE%BE%E7%BD%AE.html","excerpt":"","text":"å®˜æ–¹æ–‡æ¡£è®¿é—® 403, æŸ¥èµ„æ–™å’Œæµ‹è¯•, ä¸‹é¢æ–¹å¼å¯è¡Œ 12345jenkins: environment: - JAVA_OPTS=-Duser.timezone=Asia/Shanghai volumes: - /etc/localtime:/etc/localtime","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"},{"name":"Jenkins","slug":"Jenkins","permalink":"https://linweiyuan.github.io/tags/Jenkins/"}]},{"title":"æŸç«™MySQLå¼±å£ä»¤å¯¼è‡´ä»»æ„æ•°æ®ä¿®æ”¹","slug":"æŸç«™MySQLå¼±å£ä»¤å¯¼è‡´ä»»æ„æ•°æ®ä¿®æ”¹","date":"2018-08-25T05:21:24.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2018/08/25/æŸç«™MySQLå¼±å£ä»¤å¯¼è‡´ä»»æ„æ•°æ®ä¿®æ”¹.html","link":"","permalink":"https://linweiyuan.github.io/2018/08/25/%E6%9F%90%E7%AB%99MySQL%E5%BC%B1%E5%8F%A3%E4%BB%A4%E5%AF%BC%E8%87%B4%E4%BB%BB%E6%84%8F%E6%95%B0%E6%8D%AE%E4%BF%AE%E6%94%B9.html","excerpt":"","text":"ä¸šåŠ¡æ•°æ®åº“ jeeplus ä»»æ„æ•°æ®å¢åˆ æ”¹æŸ¥","categories":[{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://linweiyuan.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://linweiyuan.github.io/tags/MySQL/"},{"name":"Vulnerability","slug":"Vulnerability","permalink":"https://linweiyuan.github.io/tags/Vulnerability/"}]},{"title":"æŸç«™MySQLå¼±å£ä»¤","slug":"æŸç«™MySQLå¼±å£ä»¤","date":"2018-08-12T03:52:12.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2018/08/12/æŸç«™MySQLå¼±å£ä»¤.html","link":"","permalink":"https://linweiyuan.github.io/2018/08/12/%E6%9F%90%E7%AB%99MySQL%E5%BC%B1%E5%8F%A3%E4%BB%A4.html","excerpt":"","text":"ä»»æ„è¡¨å¢åˆ æ”¹æŸ¥","categories":[{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://linweiyuan.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://linweiyuan.github.io/tags/MySQL/"},{"name":"Vulnerability","slug":"Vulnerability","permalink":"https://linweiyuan.github.io/tags/Vulnerability/"}]},{"title":"ä¿®æ”¹waråŒ…é‡Œé¢çš„å†…å®¹","slug":"ä¿®æ”¹waråŒ…é‡Œé¢çš„å†…å®¹","date":"2018-07-18T06:22:48.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2018/07/18/ä¿®æ”¹waråŒ…é‡Œé¢çš„å†…å®¹.html","link":"","permalink":"https://linweiyuan.github.io/2018/07/18/%E4%BF%AE%E6%94%B9war%E5%8C%85%E9%87%8C%E9%9D%A2%E7%9A%84%E5%86%85%E5%AE%B9.html","excerpt":"","text":"ä¸€èˆ¬æƒ…å†µä¸‹, å¼€å‘ä¼šåˆ†ä¸ºdevã€testã€prodæˆ–æ›´å¤š, åœ¨æ²¡æœ‰å¾ˆå¥½åœ°å¤„ç†å¥½è‡ªåŠ¨åŒ–çš„æƒ…å†µä¸‹å°±è¦äººå·¥æ‰“åŒ…, äººå°±éš¾å…ä¼šå‡ºç°å¤±è¯¯ å…ˆè§£åŒ…, ç”¨jarè€Œä¸æ˜¯java 1jar -xvf waråŒ… ä¿®æ”¹å¥½æ–‡ä»¶, å†æ›¿æ¢å°åŒ… 1jar -uvf waråŒ… ä¿®æ”¹çš„æ–‡ä»¶çš„è·¯å¾„ å‰åè·¯å¾„è¦ä¸€è‡´","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"war","slug":"war","permalink":"https://linweiyuan.github.io/tags/war/"}]},{"title":"Linuxè·¯ç”±é…ç½®","slug":"Linuxè·¯ç”±é…ç½®","date":"2018-07-17T02:11:18.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/07/17/Linuxè·¯ç”±é…ç½®.html","link":"","permalink":"https://linweiyuan.github.io/2018/07/17/Linux%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE.html","excerpt":"","text":"123sudo route delete -net 0.0.0.0 wlp2s0sudo route add -net 10.124.0.0 gw 172.27.35.1 netmask 255.255.0.0 wlp2s0sudo route add -net 10.150.0.0 gw 172.27.35.1 netmask 255.255.0.0 wlp2s0","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"}]},{"title":"Gitlabæ›´æ–°ä»£ç æç¤º","slug":"GitLabæ›´æ–°ä»£ç æç¤º","date":"2018-07-13T08:50:13.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/07/13/GitLabæ›´æ–°ä»£ç æç¤º.html","link":"","permalink":"https://linweiyuan.github.io/2018/07/13/GitLab%E6%9B%B4%E6%96%B0%E4%BB%A3%E7%A0%81%E6%8F%90%E7%A4%BA.html","excerpt":"","text":"å‘é€ç«¯ 1234567891011121314151617try &#123; StringBuilder content = new StringBuilder(); List&lt;Commits&gt; commits = root.getCommits(); for (Commits commit : commits) &#123; Author author = commit.getAuthor(); content.append(author.getName()).append(&quot; - &quot;).append(author.getEmail()).append(&quot;\\n\\n&quot;) .append(&quot;push detected&quot;).append(&quot;\\n\\n&quot;) .append(commit.getMessage()); byte[] bytes = content.toString().getBytes(); DatagramSocket socket = new DatagramSocket(); socket.send(new DatagramPacket(bytes, bytes.length, InetAddress.getByName(&quot;192.168.1.255&quot;), 11111)); socket.close(); &#125;&#125; catch (Exception e) &#123; e.printStackTrace();&#125; æ¥æ”¶ç«¯ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879import javax.imageio.ImageIO;import javax.swing.*;import java.awt.*;import java.awt.event.MouseAdapter;import java.awt.event.MouseEvent;import java.net.DatagramPacket;import java.net.DatagramSocket;public class Reminder extends JFrame &#123; private DatagramSocket socket; public Reminder() throws Exception &#123; initSystemTray(); initListen(initSocket()); &#125; private void initSystemTray() throws Exception &#123; SystemTray tray = SystemTray.getSystemTray(); TrayIcon trayIcon = new TrayIcon(ImageIO.read(getClass().getResourceAsStream(&quot;icon.png&quot;)), &quot;&quot;); trayIcon.setToolTip(&quot;&quot;); tray.add(trayIcon); trayIcon.addMouseListener(new MouseAdapter() &#123; @Override public void mouseClicked(MouseEvent e) &#123; if (e.getButton() == MouseEvent.BUTTON2) &#123; socket.close(); System.exit(0); &#125; &#125; &#125;); &#125; private DatagramPacket initSocket() throws Exception &#123; socket = new DatagramSocket(11111); byte[] bytes = new byte[1024]; return new DatagramPacket(bytes, bytes.length); &#125; private void initListen(DatagramPacket packet) throws Exception &#123; while (true) &#123; socket.receive(packet); showDialog(packet); &#125; &#125; private void showDialog(DatagramPacket packet) &#123; JFrame frame = new JFrame(); frame.setSize(300, 150); frame.setLocationRelativeTo(null); frame.setDefaultCloseOperation(DISPOSE_ON_CLOSE); JTextArea area = new JTextArea(); String osName = System.getProperty(&quot;os.name&quot;); switch (osName) &#123; case &quot;Linux&quot;: area.setFont(new Font(&quot;WenQuanYi Micro Hei&quot;, Font.PLAIN, 14)); break; default: break; &#125; area.setText(new String(packet.getData())); frame.add(area); frame.setVisible(true); &#125; public static void main(String[] args) &#123; try &#123; new Reminder(); UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"ç‰ˆæœ¬æ§åˆ¶","slug":"ç‰ˆæœ¬æ§åˆ¶","permalink":"https://linweiyuan.github.io/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"}],"tags":[{"name":"GitLab","slug":"GitLab","permalink":"https://linweiyuan.github.io/tags/GitLab/"},{"name":"Socket","slug":"Socket","permalink":"https://linweiyuan.github.io/tags/Socket/"},{"name":"UDP","slug":"UDP","permalink":"https://linweiyuan.github.io/tags/UDP/"},{"name":"Swing","slug":"Swing","permalink":"https://linweiyuan.github.io/tags/Swing/"}]},{"title":"æ— å›¾å½¢åŒ–ç•Œé¢ä¸‹WebLogicç¬¬ä¸‰æ–¹API","slug":"æ— å›¾å½¢åŒ–ç•Œé¢ä¸‹WebLogicç¬¬ä¸‰æ–¹API","date":"2018-06-19T08:20:32.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2018/06/19/æ— å›¾å½¢åŒ–ç•Œé¢ä¸‹WebLogicç¬¬ä¸‰æ–¹API.html","link":"","permalink":"https://linweiyuan.github.io/2018/06/19/%E6%97%A0%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%95%8C%E9%9D%A2%E4%B8%8BWebLogic%E7%AC%AC%E4%B8%89%E6%96%B9API.html","excerpt":"","text":"éƒ¨ç½² 1234567java -cp weblogic.jar weblogic.Deployer \\-adminurl t3://127.0.0.1:7001 \\-user ç”¨æˆ·å \\-password å¯†ç  \\-redeploy \\-name è‡ªå®šä¹‰åå­— \\-source waråŒ… æ›´æ”¹ä¸­å¿ƒçš„é”å®šå¹¶ç¼–è¾‘ -&gt; é‡Šæ”¾é…ç½® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061import org.jsoup.Connection;import org.jsoup.Jsoup;import java.util.Map;public class FuckWebLogic &#123; public static void main(String[] args) &#123; try &#123; String SERVER = &quot;http://127.0.0.1:7001/console&quot;; Connection connection = Jsoup.connect(SERVER + &quot;/j_security_check&quot;) .method(Connection.Method.POST) .data(&quot;j_username&quot;, &quot;username&quot;) .data(&quot;j_password&quot;, &quot;password&quot;) .followRedirects(false);//ä¸è‡ªåŠ¨é‡å®šå‘, ä¸ºäº†ä¸‹é¢æ ¹æ®çŠ¶æ€ç åˆ¤æ–­æ˜¯å¦ç™»å½•æˆåŠŸ, ä¸ç„¶éƒ½æ˜¯è¿”å›200 Connection.Response response = connection.execute(); int statusCode = response.statusCode(); switch (statusCode) &#123; case 200: System.out.println(&quot;login err&quot;); break; case 302: System.out.println(&quot;login ok&quot;); //ç™»å½•æˆåŠŸçš„Cookie Map&lt;String, String&gt; cookies = response.cookies(); System.out.println(&quot;Cookie -&gt; &quot; + cookies); //è·å–é¡µé¢çš„é˜²CSRFéšè—å‚æ•°ï¼ˆè¿™é‡Œç±»ä¼¼éªŒè¯ç çš„æ•ˆæœï¼‰ String token = connection.url(SERVER + &quot;/console.portal&quot;) .method(Connection.Method.GET) .cookies(cookies) .followRedirects(true)//è¿™é‡Œå°±è¦è®¾ç½®trueäº† .execute() .parse() .select(&quot;input[name=ChangeManagerPortletfrsc]&quot;).val(); System.out.println(&quot;Token -&gt; &quot; + token); //è¿™æ—¶è¦åˆ·æ–°Cookie, å’Œä¸Šé¢çš„éšè—å‚æ•°è¦å¯¹å¾—ä¸Š cookies = response.cookies(); System.out.println(&quot;new Cookie -&gt; &quot; + cookies); //æ¨¡æ‹Ÿç‚¹å‡»æ“ä½œ response = connection.url(SERVER + &quot;/console.portal&quot;) .method(Connection.Method.POST) .data(&quot;ChangeManagerPortlet_actionOverride&quot;, &quot;/StopEditAction&quot;) .data(&quot;ChangeManagerPortletfrsc&quot;, token) .cookies(cookies) .execute(); //å¦‚æœæ ‡é¢˜æ²¡æœ‰æŒ‡å®šå­—ç¬¦ä¸², è¯´æ˜Cookieé”™è¯¯, è·³åˆ°ç™»å½•é¡µäº† System.out.println(response.body().contains(&quot;dmz&quot;) ? &quot;ok&quot; : &quot;err&quot;); break; &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://linweiyuan.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"},{"name":"jsoup","slug":"jsoup","permalink":"https://linweiyuan.github.io/tags/jsoup/"},{"name":"WebLogic","slug":"WebLogic","permalink":"https://linweiyuan.github.io/tags/WebLogic/"}]},{"title":"WebLogicè¿œç¨‹è°ƒè¯•","slug":"WebLogicè¿œç¨‹è°ƒè¯•","date":"2018-06-07T03:04:08.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2018/06/07/WebLogicè¿œç¨‹è°ƒè¯•.html","link":"","permalink":"https://linweiyuan.github.io/2018/06/07/WebLogic%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95.html","excerpt":"","text":"ä¿®æ”¹ç¯å¢ƒå˜é‡Software/WebLogic/Oracle/Middleware/Oracle_Home/user_projects/domains/idc/bin/setDomainEnv.sh ä¿®æ”¹ç«¯å£ 1234if [ &quot;$&#123;DEBUG_PORT&#125;&quot; = &quot;&quot; ] ; then DEBUG_PORT=&quot;9088&quot; export DEBUG_PORTfi æ‰“å¼€è°ƒè¯• 123456789if [ &quot;true&quot; = &quot;true&quot; ] ; then JAVA_DEBUG=&quot;-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=$&#123;DEBUG_PORT&#125;,server=y,suspend=n -Djava.compiler=NONE&quot; export JAVA_DEBUG JAVA_OPTIONS=&quot;$&#123;JAVA_OPTIONS&#125; $&#123;enableHotswapFlag&#125; -ea -da:com.bea... -da:javelin... -da:weblogic... -ea:com.bea.wli... -ea:com.bea.broker... -ea:com.bea.sbconsole...&quot; export JAVA_OPTIONSelse JAVA_OPTIONS=&quot;$&#123;JAVA_OPTIONS&#125; $&#123;enableHotswapFlag&#125; -da&quot; export JAVA_OPTIONSfi ç®€å•ç²—æš´","categories":[{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://linweiyuan.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"}],"tags":[{"name":"IDEA","slug":"IDEA","permalink":"https://linweiyuan.github.io/tags/IDEA/"},{"name":"WebLogic","slug":"WebLogic","permalink":"https://linweiyuan.github.io/tags/WebLogic/"}]},{"title":"Antè„šæœ¬æ€æ‰Tomcat","slug":"Antè„šæœ¬æ€æ‰Tomcat","date":"2018-05-25T01:42:11.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/05/25/Antè„šæœ¬æ€æ‰Tomcat.html","link":"","permalink":"https://linweiyuan.github.io/2018/05/25/Ant%E8%84%9A%E6%9C%AC%E6%9D%80%E6%8E%89Tomcat.html","excerpt":"","text":"1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;&lt;project name=&quot;é¡¹ç›®å&quot; basedir=&quot;.&quot; default=&quot;deploy&quot;&gt; &lt;property name=&quot;src.dir&quot; value=&quot;src&quot;/&gt; &lt;property name=&quot;web.dir&quot; value=&quot;web&quot;/&gt; &lt;property name=&quot;build.dir&quot; value=&quot;$&#123;web.dir&#125;/WEB-INF/classes&quot;/&gt; &lt;property name=&quot;tomcat.name&quot; value=&quot;Tomcatç›®å½•å&quot;/&gt; &lt;property name=&quot;tomcat.path&quot; value=&quot;Tomcatè·¯å¾„&quot;/&gt; &lt;property name=&quot;deploy.path&quot; value=&quot;$&#123;tomcat.path&#125;/webapps&quot;/&gt; &lt;property name=&quot;war.name&quot; value=&quot;waråŒ…&quot;/&gt; &lt;property name=&quot;jdk.version&quot; value=&quot;1.8&quot;/&gt; &lt;path id=&quot;classpath&quot;&gt; &lt;fileset dir=&quot;$&#123;web.dir&#125;/WEB-INF/lib&quot; includes=&quot;*.jar&quot;/&gt; &lt;pathelement path=&quot;$&#123;build.dir&#125;&quot;/&gt; &lt;/path&gt; &lt;target name=&quot;clean&quot;&gt; &lt;echo message=&quot;clean start...&quot;/&gt; &lt;delete&gt; &lt;fileset dir=&quot;$&#123;build.dir&#125;&quot;&gt; &lt;include name=&quot;**/*.class&quot;/&gt; &lt;/fileset&gt; &lt;/delete&gt; &lt;echo message=&quot;clean end...&quot;/&gt; &lt;/target&gt; &lt;target name=&quot;build&quot; depends=&quot;clean&quot;&gt; &lt;echo message=&quot;build start...&quot;/&gt; &lt;mkdir dir=&quot;$&#123;build.dir&#125;&quot;/&gt; &lt;javac destdir=&quot;$&#123;build.dir&#125;&quot; source=&quot;$&#123;jdk.version&#125;&quot; target=&quot;$&#123;jdk.version&#125;&quot; includeantruntime=&quot;true&quot; nowarn=&quot;true&quot;&gt; &lt;src path=&quot;$&#123;src.dir&#125;&quot;/&gt; &lt;classpath refid=&quot;classpath&quot;/&gt; &lt;/javac&gt; &lt;echo message=&quot;build end...&quot;/&gt; &lt;/target&gt; &lt;target name=&quot;war&quot; depends=&quot;build&quot;&gt; &lt;echo message=&quot;pack war start...&quot;/&gt; &lt;tstamp&gt; &lt;format property=&quot;date&quot; pattern=&quot;yyyy_MM_dd&quot;/&gt; &lt;/tstamp&gt; &lt;war destfile=&quot;è‡ªå®šä¹‰åå­—_$&#123;date&#125;.war&quot; webxml=&quot;$&#123;web.dir&#125;/WEB-INF/web.xml&quot;&gt; &lt;fileset dir=&quot;$&#123;web.dir&#125;&quot;&gt; &lt;include name=&quot;**/*.*&quot;/&gt; &lt;/fileset&gt; &lt;classes dir=&quot;$&#123;build.dir&#125;&quot;/&gt; &lt;/war&gt; &lt;echo message=&quot;pack war end...&quot;/&gt; &lt;echo message=&quot;copy war start...&quot;/&gt; &lt;copy tofile=&quot;$&#123;deploy.path&#125;/$&#123;war.name&#125;&quot; preservelastmodified=&quot;true&quot; overwrite=&quot;true&quot;&gt; &lt;fileset dir=&quot;.&quot;&gt; &lt;include name=&quot;è‡ªå®šä¹‰åå­—$&#123;date&#125;.war&quot;/&gt; &lt;/fileset&gt; &lt;/copy&gt; &lt;echo message=&quot;copy war end...&quot;/&gt; &lt;/target&gt; &lt;target name=&quot;deploy&quot; depends=&quot;war&quot;&gt; &lt;echo message=&quot;shutdown tomcat start...&quot;/&gt; &lt;exec executable=&quot;/bin/zsh&quot;&gt; &lt;arg value=&quot;-c&quot;/&gt; &lt;arg value=&quot;ps x | grep tomcat | grep -v grep | awk &#x27;&#123;print $1&#125;&#x27; | xargs kill -9 &amp;amp; &gt; /dev/null&quot;/&gt; &lt;/exec&gt; &lt;echo message=&quot;shutdown tomcat end...&quot;/&gt; &lt;echo message=&quot;startup tomcat start...&quot;/&gt; &lt;exec executable=&quot;/bin/zsh&quot;&gt; &lt;arg value=&quot;$&#123;tomcat.path&#125;/bin/startup.sh&quot;/&gt; &lt;/exec&gt; &lt;echo message=&quot;startup tomcat end...&quot;/&gt; &lt;/target&gt;&lt;/project&gt;","categories":[{"name":"æ„å»ºå·¥å…·","slug":"æ„å»ºå·¥å…·","permalink":"https://linweiyuan.github.io/categories/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Ant","slug":"Ant","permalink":"https://linweiyuan.github.io/tags/Ant/"},{"name":"Tomcat","slug":"Tomcat","permalink":"https://linweiyuan.github.io/tags/Tomcat/"},{"name":"Shell","slug":"Shell","permalink":"https://linweiyuan.github.io/tags/Shell/"}]},{"title":"KDEå¼€å¯VNC","slug":"KDEå¼€å¯VNC","date":"2018-04-29T04:09:03.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/04/29/KDEå¼€å¯VNC.html","link":"","permalink":"https://linweiyuan.github.io/2018/04/29/KDE%E5%BC%80%E5%90%AFVNC.html","excerpt":"","text":"TigerVNC 12#!/bin/shdbus-launch startkde KDE Plasmaæ˜¾ç¤ºæ­£å¸¸","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"},{"name":"KDE","slug":"KDE","permalink":"https://linweiyuan.github.io/tags/KDE/"},{"name":"TigerVNC","slug":"TigerVNC","permalink":"https://linweiyuan.github.io/tags/TigerVNC/"}]},{"title":"Tomcatè¿œç¨‹è°ƒè¯•","slug":"Tomcatè¿œç¨‹è°ƒè¯•","date":"2018-04-19T03:00:47.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2018/04/19/Tomcatè¿œç¨‹è°ƒè¯•.html","link":"","permalink":"https://linweiyuan.github.io/2018/04/19/Tomcat%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95.html","excerpt":"","text":"1./catalina.sh jpda start","categories":[{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://linweiyuan.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"}],"tags":[{"name":"Tomcat","slug":"Tomcat","permalink":"https://linweiyuan.github.io/tags/Tomcat/"},{"name":"IDEA","slug":"IDEA","permalink":"https://linweiyuan.github.io/tags/IDEA/"}]},{"title":"Gitæ‰¹é‡æ¢å¤åˆ é™¤çš„æ–‡ä»¶","slug":"Gitæ‰¹é‡æ¢å¤åˆ é™¤çš„æ–‡ä»¶","date":"2018-04-17T07:43:26.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/04/17/Gitæ‰¹é‡æ¢å¤åˆ é™¤çš„æ–‡ä»¶.html","link":"","permalink":"https://linweiyuan.github.io/2018/04/17/Git%E6%89%B9%E9%87%8F%E6%81%A2%E5%A4%8D%E5%88%A0%E9%99%A4%E7%9A%84%E6%96%87%E4%BB%B6.html","excerpt":"","text":"1git ls-files -d | xargs -i git checkout &#123;&#125;","categories":[{"name":"ç‰ˆæœ¬æ§åˆ¶","slug":"ç‰ˆæœ¬æ§åˆ¶","permalink":"https://linweiyuan.github.io/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://linweiyuan.github.io/tags/Git/"}]},{"title":"æŸç«™XSSæ¼æ´","slug":"æŸç«™XSSæ¼æ´-1","date":"2018-03-25T06:12:11.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2018/03/25/æŸç«™XSSæ¼æ´-1.html","link":"","permalink":"https://linweiyuan.github.io/2018/03/25/%E6%9F%90%E7%AB%99XSS%E6%BC%8F%E6%B4%9E-1.html","excerpt":"","text":"å¼¹çª—","categories":[{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://linweiyuan.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Vulnerability","slug":"Vulnerability","permalink":"https://linweiyuan.github.io/tags/Vulnerability/"},{"name":"XSS","slug":"XSS","permalink":"https://linweiyuan.github.io/tags/XSS/"}]},{"title":"Manjaroçš„RTL8192EUæ— çº¿ç½‘å¡é©±åŠ¨","slug":"Manjaroçš„RTL8192EUæ— çº¿ç½‘å¡é©±åŠ¨","date":"2018-03-12T01:22:19.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/03/12/Manjaroçš„RTL8192EUæ— çº¿ç½‘å¡é©±åŠ¨.html","link":"","permalink":"https://linweiyuan.github.io/2018/03/12/Manjaro%E7%9A%84RTL8192EU%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8.html","excerpt":"","text":"TP-LINK çš„TL-WN821Nåœ¨ Manjaro ä¸‹æ’ä¸Šäº†èƒ½æœåˆ° Wi-Fi ä¿¡å·, ä½†æ˜¯ä¿¡å·å¾ˆå¼±å¹¶ä¸”è¾“å…¥æ­£ç¡®çš„å¯†ç åä¸€ç›´æ— æ³•è¿æ¥ä¸Š, lsusbå‘ç°æ˜¯ 1Bus 001 Device 002: ID 0bda:818b Realtek Semiconductor Corp. RTL8192EU 802.11b/g/n WLAN Adapter ç„¶è€Œ, lshw -c networkå´å‘ç° 1configuration: broadcast=yes driver=rtl8xxxu driverversion=4.14.24-1-MANJARO firmware=N/A link=no multicast=yes wireless=IEEE 802.11 8192EUçš„èŠ¯ç‰‡é»˜è®¤æ˜¯rtl8xxxuçš„é©±åŠ¨, æˆ‘å°±æƒ³æœ‰æ²¡æœ‰8192EUçš„é©±åŠ¨, æˆ‘å®‰è£…è¯•ä¸‹ äºæ˜¯ä¸Š AUR æœäº†æœ, æœç„¶æœ‰ -&gt; 8192eu-dkms äºæ˜¯ä¸‹è½½äº†å®‰è£…, å†æŠŠåŸæ¥çš„æ‹‰é»‘/etc/modprobe.d/rtl8xxxu_blacklist.conf 1blacklist rtl8xxxu å½“ç„¶è¿˜è¦è£…å¯¹åº”çš„headers é‡å¯å, å†çœ‹ä¸‹é©±åŠ¨ 1configuration: broadcast=yes driver=rtl8192eu multicast=yes wireless=unassociated é©±åŠ¨æˆåŠŸ, ä¿¡å·æ»¡æ ¼, è¾“å…¥å¯†ç ç§’è¿, å¹¶ä¸”åŸæ¥çš„iw liståªæ”¯æŒ 123Supported interface modes:* managed* monitor ç°åœ¨è¿APéƒ½æ”¯æŒäº† 1234567Supported interface modes:* IBSS* managed* AP* monitor* P2P-client* P2P-GO","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Manjaro","slug":"Manjaro","permalink":"https://linweiyuan.github.io/tags/Manjaro/"},{"name":"RTL8192EU","slug":"RTL8192EU","permalink":"https://linweiyuan.github.io/tags/RTL8192EU/"}]},{"title":"Git statusä¸­æ–‡æ˜¾ç¤ºæ•°å­—è§£å†³","slug":"Git-statusä¸­æ–‡æ˜¾ç¤ºæ•°å­—è§£å†³","date":"2018-02-26T04:46:54.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/02/26/Git-statusä¸­æ–‡æ˜¾ç¤ºæ•°å­—è§£å†³.html","link":"","permalink":"https://linweiyuan.github.io/2018/02/26/Git-status%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA%E6%95%B0%E5%AD%97%E8%A7%A3%E5%86%B3.html","excerpt":"","text":"1git config --global core.quotepath false","categories":[{"name":"ç‰ˆæœ¬æ§åˆ¶","slug":"ç‰ˆæœ¬æ§åˆ¶","permalink":"https://linweiyuan.github.io/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://linweiyuan.github.io/tags/Git/"}]},{"title":"Arch Linux /tmpåˆ†åŒºå®¹é‡ä¸è¶³è§£å†³","slug":"Arch-Linux-tmpåˆ†åŒºå®¹é‡ä¸è¶³è§£å†³","date":"2018-02-26T04:29:55.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/02/26/Arch-Linux-tmpåˆ†åŒºå®¹é‡ä¸è¶³è§£å†³.html","link":"","permalink":"https://linweiyuan.github.io/2018/02/26/Arch-Linux-tmp%E5%88%86%E5%8C%BA%E5%AE%B9%E9%87%8F%E4%B8%8D%E8%B6%B3%E8%A7%A3%E5%86%B3.html","excerpt":"","text":"yaourt å®‰è£…Oracle-XE, è§£å‹çš„æ—¶å€™æŠ¥é”™, /tmpç©ºé—´ä¸è¶³ å‚è€ƒæŸ¥ wiki -&gt; tmpfså¾—çŸ¥é»˜è®¤ä¼šæŠŠ&#x2F;tmp åˆ†æˆå†…å­˜çš„ä¸€åŠ, æˆ‘ 512M çš„å†…å­˜, æ‰€ä»¥åˆ†äº† 243M åŸè¯æ˜¯ 12By default, a tmpfs partition has its maximum size set to half of the availableRAM, however it is possible to overrule this value. è§£å†³æ–¹æ¡ˆæ˜¯ 123To explicitly set a maximum size, in this example to override the default /tmpmount, use the size mount option: /etc/fstab tmpfs /tmp tmpfsrw,nodev,nosuid,size=2G 0 0 æ”¹å®Œä¿å­˜é‡å¯å†å®‰è£…ä¸€åˆ‡æ­£å¸¸","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"},{"name":"Oracle-XE","slug":"Oracle-XE","permalink":"https://linweiyuan.github.io/tags/Oracle-XE/"}]},{"title":"Javaå¤šçº§èœå•é€’å½’æ‹¼è£…Demo","slug":"Javaå¤šçº§èœå•é€’å½’æ‹¼è£…Demo","date":"2018-02-08T06:26:38.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/02/08/Javaå¤šçº§èœå•é€’å½’æ‹¼è£…Demo.html","link":"","permalink":"https://linweiyuan.github.io/2018/02/08/Java%E5%A4%9A%E7%BA%A7%E8%8F%9C%E5%8D%95%E9%80%92%E5%BD%92%E6%8B%BC%E8%A3%85Demo.html","excerpt":"","text":"JEECGçš„æ”¹é€  Demo 1234567891011121314151617181920212223242526272829303132333435363738394041@Overridepublic List&lt;TSFunction&gt; getFunctionByRoleId(String roleId) &#123; List&lt;TSFunction&gt; functionList = new ArrayList&lt;&gt;(); // æŸ¥è¯¢å…¨éƒ¨èœå• List&lt;TSFunction&gt; functionList0 = tSFunctionMapper.selectAll(); // è§’è‰²æƒé™ç›¸å…³èœå• List&lt;TSFunction&gt; roleFunctionList = tSRoleMapper.getFunctionByRoleId(roleId); for (TSFunction function0 : functionList0) &#123; function0.setChildren(makeFunctionList(functionList0, function0.getId(), roleFunctionList)); // åªæ·»åŠ ä¸€çº§èœå•ï¼ˆä¸‹çº§èœå•å·²æ‹¼è£…å¥½åœ¨é‡Œé¢ï¼‰ if (StringUtil.isEmpty(function0.getParentfunctionid())) &#123; functionList.add(function0); &#125; &#125; return functionList;&#125;public List&lt;TSFunction&gt; makeFunctionList(List&lt;TSFunction&gt; srcFunctionList, String functionId, List&lt;TSFunction&gt; roleFunctionList) &#123; List&lt;TSFunction&gt; functionList = new ArrayList&lt;&gt;(); for (TSFunction function : srcFunctionList) &#123; String id = function.getId(); String parentfunctionid = function.getParentfunctionid(); // éä¸€çº§èœå•é€’å½’æŸ¥è¯¢ if (StringUtil.isNotEmpty(parentfunctionid)) &#123; if (parentfunctionid.equals(functionId)) &#123; function.setChildren(makeFunctionList(srcFunctionList, id, roleFunctionList)); functionList.add(function); &#125; &#125; // è§’è‰²æƒé™âˆšå¤„ç† for (TSFunction roleFunction : roleFunctionList) &#123; if (id.equals(roleFunction.getId())) &#123; function.setChecked(1); &#125; &#125; &#125; return functionList;&#125; éƒ¨åˆ†è¿”å›ç»“æœ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129&#123; &quot;id&quot;: &quot;402889fb486e848101486e8de3d60005&quot;, &quot;functionlevel&quot;: 0, &quot;functionname&quot;: &quot;æ•°æ®æƒé™&quot;, &quot;functionorder&quot;: &quot;100&quot;, &quot;iconid&quot;: &quot;8a8ab0b246dc81120146dc8180820003&quot;, &quot;deskIconid&quot;: &quot;8a8ab0b246dc81120146dc8180dd001e&quot;, &quot;functiontype&quot;: 1, &quot;checked&quot;: 0, &quot;children&quot;: [ &#123; &quot;id&quot;: &quot;402880f25a980e2a015a981dc8de0005&quot;, &quot;functionlevel&quot;: 1, &quot;functionname&quot;: &quot;è¯·å‡è‡ªå®šä¹‰è¡¨å•&quot;, &quot;functionorder&quot;: &quot;3&quot;, &quot;functionurl&quot;: &quot;autoFormController/af/employee_leave_form/goViewPage.do&quot;, &quot;parentfunctionid&quot;: &quot;402889fb486e848101486e8de3d60005&quot;, &quot;iconid&quot;: &quot;8a8ab0b246dc81120146dc8180460000&quot;, &quot;deskIconid&quot;: &quot;8a8ab0b246dc81120146dc8180dd001e&quot;, &quot;functiontype&quot;: 1, &quot;checked&quot;: 0, &quot;children&quot;: [] &#125;, &#123; &quot;id&quot;: &quot;402880f25a9833f5015a9843218f000c&quot;, &quot;functionlevel&quot;: 1, &quot;functionname&quot;: &quot;è‡ªå®šä¹‰è¡¨å•æŸ¥çœ‹&quot;, &quot;functionorder&quot;: &quot;4&quot;, &quot;functionurl&quot;: &quot;autoFormController/af/order_form/goUpdatePage.do&quot;, &quot;parentfunctionid&quot;: &quot;402889fb486e848101486e8de3d60005&quot;, &quot;iconid&quot;: &quot;8a8ab0b246dc81120146dc8180460000&quot;, &quot;deskIconid&quot;: &quot;8a8ab0b246dc81120146dc8180dd001e&quot;, &quot;functiontype&quot;: 1, &quot;checked&quot;: 0, &quot;children&quot;: [] &#125;, &#123; &quot;id&quot;: &quot;402881855ab8c48a015ab8d133050018&quot;, &quot;functionlevel&quot;: 1, &quot;functionname&quot;: &quot;æµ‹è¯•onlineè¡¨å•æƒé™&quot;, &quot;functionorder&quot;: &quot;4&quot;, &quot;parentfunctionid&quot;: &quot;402889fb486e848101486e8de3d60005&quot;, &quot;iconid&quot;: &quot;8a8ab0b246dc81120146dc8180460000&quot;, &quot;deskIconid&quot;: &quot;8a8ab0b246dc81120146dc8180dd001e&quot;, &quot;functiontype&quot;: 1, &quot;checked&quot;: 0, &quot;children&quot;: [ &#123; &quot;id&quot;: &quot;402880f25b1d5a3a015b1d772c2b0013&quot;, &quot;functionlevel&quot;: 1, &quot;functionname&quot;: &quot;è¯·å‡å•ç¼–è¾‘é¡µé¢&quot;, &quot;functionorder&quot;: &quot;2&quot;, &quot;functionurl&quot;: &quot;cgFormBuildController/ftlForm/jform_leave/goUpdate.do&quot;, &quot;parentfunctionid&quot;: &quot;402881855ab8c48a015ab8d133050018&quot;, &quot;iconid&quot;: &quot;8a8ab0b246dc81120146dc8180460000&quot;, &quot;deskIconid&quot;: &quot;8a8ab0b246dc81120146dc8180dd001e&quot;, &quot;functiontype&quot;: 1, &quot;checked&quot;: 0, &quot;children&quot;: [] &#125;, &#123; &quot;id&quot;: &quot;402880f25b1e2ac7015b1e5cdc340010&quot;, &quot;functionlevel&quot;: 2, &quot;functionname&quot;: &quot;onlineè¯·å‡åŠ è½½æ•°æ®è¯·æ±‚&quot;, &quot;functionorder&quot;: &quot;3&quot;, &quot;functionurl&quot;: &quot;cgAutoListController.do?datagrid&amp;configId=jform_leave&quot;, &quot;parentfunctionid&quot;: &quot;402881855ab8c48a015ab8d133050018&quot;, &quot;iconid&quot;: &quot;8a8ab0b246dc81120146dc8180460000&quot;, &quot;deskIconid&quot;: &quot;8a8ab0b246dc81120146dc8180dd001e&quot;, &quot;functiontype&quot;: 1, &quot;checked&quot;: 0, &quot;children&quot;: [] &#125;, &#123; &quot;id&quot;: &quot;402880f25b23a635015b23a992f10003&quot;, &quot;functionlevel&quot;: 1, &quot;functionname&quot;: &quot;olè®¢å•ç¼–è¾‘é¡µé¢&quot;, &quot;functionorder&quot;: &quot;4&quot;, &quot;functionurl&quot;: &quot;cgFormBuildController/ftlForm/jform_order_main/goUpdate.do&quot;, &quot;parentfunctionid&quot;: &quot;402881855ab8c48a015ab8d133050018&quot;, &quot;iconid&quot;: &quot;8a8ab0b246dc81120146dc8180460000&quot;, &quot;deskIconid&quot;: &quot;8a8ab0b246dc81120146dc8180dd001e&quot;, &quot;functiontype&quot;: 1, &quot;checked&quot;: 0, &quot;children&quot;: [] &#125;, &#123; &quot;id&quot;: &quot;402881855ab8c48a015ab8d1f96f001b&quot;, &quot;functionlevel&quot;: 1, &quot;functionname&quot;: &quot;olè¯·å‡å•æŸ¥çœ‹é¡µé¢&quot;, &quot;functionorder&quot;: &quot;1&quot;, &quot;functionurl&quot;: &quot;cgFormBuildController/ftlForm/jform_leave/goDetail.do&quot;, &quot;parentfunctionid&quot;: &quot;402881855ab8c48a015ab8d133050018&quot;, &quot;iconid&quot;: &quot;8a8ab0b246dc81120146dc8180460000&quot;, &quot;deskIconid&quot;: &quot;8a8ab0b246dc81120146dc8180dd001e&quot;, &quot;functiontype&quot;: 1, &quot;checked&quot;: 0, &quot;children&quot;: [] &#125; ] &#125;, &#123; &quot;id&quot;: &quot;4028ef81574ae99701574aeb97bd0003&quot;, &quot;functionlevel&quot;: 1, &quot;functionname&quot;: &quot;ç”¨æˆ·åˆ—è¡¨æ•°æ®æƒé™&quot;, &quot;functionorder&quot;: &quot;2&quot;, &quot;functionurl&quot;: &quot;userController.do?datagrid&quot;, &quot;parentfunctionid&quot;: &quot;402889fb486e848101486e8de3d60005&quot;, &quot;iconid&quot;: &quot;8a8ab0b246dc81120146dc8180460000&quot;, &quot;deskIconid&quot;: &quot;8a8ab0b246dc81120146dc8180dd001e&quot;, &quot;functiontype&quot;: 1, &quot;checked&quot;: 0, &quot;children&quot;: [] &#125;, &#123; &quot;id&quot;: &quot;40288088481d019401481d2fcebf000d&quot;, &quot;functionlevel&quot;: 1, &quot;functionname&quot;: &quot;minidaoæ•°æ®æƒé™åˆ—è¡¨&quot;, &quot;functionorder&quot;: &quot;1&quot;, &quot;functionurl&quot;: &quot;jeecgListDemoController.do?minidaoDatagrid&quot;, &quot;parentfunctionid&quot;: &quot;402889fb486e848101486e8de3d60005&quot;, &quot;iconid&quot;: &quot;8a8ab0b246dc81120146dc8180820003&quot;, &quot;deskIconid&quot;: &quot;8a8ab0b246dc81120146dc8180dd001e&quot;, &quot;functiontype&quot;: 1, &quot;checked&quot;: 0, &quot;children&quot;: [] &#125; ]&#125;","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"JEECG","slug":"JEECG","permalink":"https://linweiyuan.github.io/tags/JEECG/"}]},{"title":"Oracleèœå•ç±»å‹é€’å½’æŸ¥è¯¢Demo","slug":"Oracleèœå•ç±»å‹é€’å½’æŸ¥è¯¢Demo","date":"2018-02-08T03:43:15.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/02/08/Oracleèœå•ç±»å‹é€’å½’æŸ¥è¯¢Demo.html","link":"","permalink":"https://linweiyuan.github.io/2018/02/08/Oracle%E8%8F%9C%E5%8D%95%E7%B1%BB%E5%9E%8B%E9%80%92%E5%BD%92%E6%9F%A5%E8%AF%A2Demo.html","excerpt":"","text":"12345678910111213141516SELECT level, f.id, f.parentfunctionid, rpad(&#x27; &#x27;, (level - 1) * 5) || f.functionname functionname, f.functionorderFROM t_s_function fSTART WITH f.id = &#x27;402889fb486e848101486e8de3d60005&#x27;CONNECT BY f.parentfunctionid = PRIOR f.idORDER BY level, f.functionorder;","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://linweiyuan.github.io/tags/Oracle/"},{"name":"SQL","slug":"SQL","permalink":"https://linweiyuan.github.io/tags/SQL/"}]},{"title":"Oracleè¡Œè½¬åˆ—åŠå»é‡","slug":"Oracleè¡Œè½¬åˆ—åŠå»é‡","date":"2018-02-07T09:23:39.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/02/07/Oracleè¡Œè½¬åˆ—åŠå»é‡.html","link":"","permalink":"https://linweiyuan.github.io/2018/02/07/Oracle%E8%A1%8C%E8%BD%AC%E5%88%97%E5%8F%8A%E5%8E%BB%E9%87%8D.html","excerpt":"","text":"åœ¨æ—§ç‰ˆæœ¬ä¸­, å¯ä»¥ä½¿ç”¨wm_concat(), å¹¶ä¸”è‡ªåŠ¨å»é‡ æ–°ç‰ˆæœ¬ Oracle é»˜è®¤å±è”½äº†wm_concat()å‡½æ•°, å¯ä»¥ç”¨listagg() ä½†æ˜¯, æœ‰ä¸ªç¼ºç‚¹å°±æ˜¯æ•°æ®ä¼šé‡å¤, æ‰€ä»¥è¦åŠ ä¸ªæ­£åˆ™ 1regexp_replace(?, &#x27;([^,]+)(,\\1)+&#x27;,&#x27;\\1&#x27;)","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Oracle","slug":"Oracle","permalink":"https://linweiyuan.github.io/tags/Oracle/"},{"name":"SQL","slug":"SQL","permalink":"https://linweiyuan.github.io/tags/SQL/"}]},{"title":"Mavençš„Oracleçš„JDBCé©±åŠ¨","slug":"Mavençš„Oracleçš„JDBCé©±åŠ¨","date":"2018-02-06T17:11:58.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2018/02/06/Mavençš„Oracleçš„JDBCé©±åŠ¨.html","link":"","permalink":"https://linweiyuan.github.io/2018/02/06/Maven%E7%9A%84Oracle%E7%9A%84JDBC%E9%A9%B1%E5%8A%A8.html","excerpt":"","text":"å®˜ç½‘ä¸‹è½½ JDBC é©±åŠ¨, é…ç½® Maven 1mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc14 -Dversion=10.2.0.5.0 -Dpackaging=jar -Dfile=ojdbc14.jar","categories":[{"name":"æ„å»ºå·¥å…·","slug":"æ„å»ºå·¥å…·","permalink":"https://linweiyuan.github.io/categories/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"}],"tags":[{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"Maven","slug":"Maven","permalink":"https://linweiyuan.github.io/tags/Maven/"},{"name":"Oracle","slug":"Oracle","permalink":"https://linweiyuan.github.io/tags/Oracle/"}]},{"title":"Gitä¿å­˜å¯†ç ","slug":"Gitä¿å­˜å¯†ç ","date":"2018-02-05T15:11:58.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2018/02/05/Gitä¿å­˜å¯†ç .html","link":"","permalink":"https://linweiyuan.github.io/2018/02/05/Git%E4%BF%9D%E5%AD%98%E5%AF%86%E7%A0%81.html","excerpt":"","text":"1git config --global credential.helper store","categories":[{"name":"ç‰ˆæœ¬æ§åˆ¶","slug":"ç‰ˆæœ¬æ§åˆ¶","permalink":"https://linweiyuan.github.io/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://linweiyuan.github.io/tags/Git/"}]},{"title":"æŸç«™XSSæ¼æ´","slug":"æŸç«™XSSæ¼æ´-2","date":"2018-01-01T06:15:29.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2018/01/01/æŸç«™XSSæ¼æ´-2.html","link":"","permalink":"https://linweiyuan.github.io/2018/01/01/%E6%9F%90%E7%AB%99XSS%E6%BC%8F%E6%B4%9E-2.html","excerpt":"","text":"å¼¹çª—","categories":[{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://linweiyuan.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"}],"tags":[{"name":"Vulnerability","slug":"Vulnerability","permalink":"https://linweiyuan.github.io/tags/Vulnerability/"},{"name":"XSS","slug":"XSS","permalink":"https://linweiyuan.github.io/tags/XSS/"}]},{"title":"Uploadifyæ’ä»¶æŠ¥queueDataé”™","slug":"Uploadifyæ’ä»¶æŠ¥queueDataé”™","date":"2017-12-20T06:41:09.000Z","updated":"2022-11-04T01:56:25.122Z","comments":true,"path":"2017/12/20/Uploadifyæ’ä»¶æŠ¥queueDataé”™.html","link":"","permalink":"https://linweiyuan.github.io/2017/12/20/Uploadify%E6%8F%92%E4%BB%B6%E6%8A%A5queueData%E9%94%99.html","excerpt":"","text":"åˆ©ç”¨è¿™ä¸ªæ’ä»¶ä¸Šä¼ æ–‡ä»¶æ—¶, é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜, æç¤ºCannot read property &#39;queueData&#39; of undefined æ‰“å¼€Chromeè®¾ç½®, å…è®¸Flash, å³å¯","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"jQuery","slug":"jQuery","permalink":"https://linweiyuan.github.io/tags/jQuery/"}]},{"title":"Linuxåˆ é™¤æŒ‡å®šæ‰©å±•åæ–‡ä»¶","slug":"Linuxåˆ é™¤æŒ‡å®šæ‰©å±•åæ–‡ä»¶","date":"2017-12-08T04:53:35.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2017/12/08/Linuxåˆ é™¤æŒ‡å®šæ‰©å±•åæ–‡ä»¶.html","link":"","permalink":"https://linweiyuan.github.io/2017/12/08/Linux%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E6%89%A9%E5%B1%95%E5%90%8D%E6%96%87%E4%BB%B6.html","excerpt":"","text":"maven ä¸‹è½½ jar çš„æ—¶å€™, ç»å¸¸ä¼šåŠé€”æ–­å¼€è¿æ¥å¯¼è‡´æŠ¥é”™, å†æ¬¡æ›´æ–°å°±ä¼šæç¤º cache çš„é—®é¢˜, å¹¶ä¸”ä¸ä¼šä¸€æ¬¡æç¤ºå…¨éƒ¨, åˆ ä¸€ä¸ªæç¤ºä¸‹ä¸€ä¸ª, äºæ˜¯æ‰¾åˆ°äº†ä¸€ç§ä¸€æ¬¡æ€§åˆ é™¤æ‰€æœ‰ä¸åˆæ³• jar çš„æ–¹æ³• 1find repository/ -name &#x27;*.lastUpdated&#x27; -exec rm -rf &#123;&#125; \\; é‡æ–°ä¸‹è½½æ²¡ä¸‹è½½å®Œçš„","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"}]},{"title":"Git push æç¤ºHTTP 400","slug":"Git-push-æç¤ºHTTP-400","date":"2017-11-25T12:57:44.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/11/25/Git-push-æç¤ºHTTP-400.html","link":"","permalink":"https://linweiyuan.github.io/2017/11/25/Git-push-%E6%8F%90%E7%A4%BAHTTP-400.html","excerpt":"","text":"12error: RPC failed; HTTP 400 curl 22 The requested URL returned error: 400 Failed reading client bodyfatal: The remote end hung up unexpectedly HTTP 413, è°ƒ nginx é…ç½® HTTP 400, è®¾ç½®ä¸‹ git çš„ç¼“å†²åŒºå¤§å°, æ¯”å¦‚ 100M 1git config --global http.postBuffer 104857600","categories":[{"name":"ç‰ˆæœ¬æ§åˆ¶","slug":"ç‰ˆæœ¬æ§åˆ¶","permalink":"https://linweiyuan.github.io/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://linweiyuan.github.io/tags/Git/"}]},{"title":"CentOS Minimalç½‘ç»œé…ç½®","slug":"CentOS-Minimalç½‘ç»œé…ç½®","date":"2017-11-25T04:38:06.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/11/25/CentOS-Minimalç½‘ç»œé…ç½®.html","link":"","permalink":"https://linweiyuan.github.io/2017/11/25/CentOS-Minimal%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE.html","excerpt":"","text":"å¦‚æœ CentOS Minimal å®‰è£…æ—¶æ²¡å¯åŠ¨ç½‘ç»œ, è£…å®Œåéœ€å†è®¾ç½®æ‰èƒ½è”ç½‘ ç¼–è¾‘/etc/sysconfig/network-script/ifcfg-xxxæ–‡ä»¶, è®¾ç½® 1ONBOOT=yes é‡å¯ç½‘ç»œ 1sudo systemctl restart network","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"CentOS","slug":"CentOS","permalink":"https://linweiyuan.github.io/tags/CentOS/"}]},{"title":"Dockeré•œåƒåŠ é€Ÿ","slug":"Dockeré•œåƒåŠ é€Ÿ","date":"2017-11-24T15:43:38.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/11/24/Dockeré•œåƒåŠ é€Ÿ.html","link":"","permalink":"https://linweiyuan.github.io/2017/11/24/Docker%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F.html","excerpt":"","text":"ä¸ºäº†æ°¸ä¹…ç”Ÿæ•ˆ, å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶çš„æ–¹å¼è¿›è¡Œé…ç½®, å‚è€ƒ -&gt; Docker ä¸­å›½å®˜æ–¹é•œåƒåŠ é€Ÿ ä¿®æ”¹/etc/docker/daemon.jsonæ–‡ä»¶ï¼ˆæ–‡ä»¶å¤¹æ²¡æœ‰çš„å°±åˆ›å»ºï¼‰, åŠ å…¥ä»¥ä¸‹å†…å®¹ 123&#123; &quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]&#125; é‡å¯ Docker ä¸ä¸€å®šç”Ÿæ•ˆ, æœ€å¥½é‡å¯ç³»ç»Ÿ","categories":[{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"}]},{"title":"CentOSå®‰è£…Node.js","slug":"CentOSå®‰è£…Node-js","date":"2017-10-08T06:18:00.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/10/08/CentOSå®‰è£…Node-js.html","link":"","permalink":"https://linweiyuan.github.io/2017/10/08/CentOS%E5%AE%89%E8%A3%85Node-js.html","excerpt":"","text":"é€‰æ‹©è¦å®‰è£…çš„ç‰ˆæœ¬, è”ç½‘æ‰§è¡Œè„šæœ¬ Node.js v6 LTS 1curl --silent --location https://rpm.nodesource.com/setup_6.x | sudo bash - Node.js 8 1curl --silent --location https://rpm.nodesource.com/setup_8.x | sudo bash - å®‰è£… 1sudo yum -y install nodejs","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"CentOS","slug":"CentOS","permalink":"https://linweiyuan.github.io/tags/CentOS/"},{"name":"Node.js","slug":"Node-js","permalink":"https://linweiyuan.github.io/tags/Node-js/"}]},{"title":"CentOSå®‰è£…Nginx","slug":"CentOSå®‰è£…Nginx","date":"2017-10-08T06:17:39.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/10/08/CentOSå®‰è£…Nginx.html","link":"","permalink":"https://linweiyuan.github.io/2017/10/08/CentOS%E5%AE%89%E8%A3%85Nginx.html","excerpt":"","text":"æ·»åŠ æº, æ–°å»º/etc/yum.repos.d/nginx.repo 12345[nginx]name=nginx repobaseurl=http://nginx.org/packages/centos/$releasever/$basearch/gpgcheck=0enabled=1 æ›´æ–°åº“ 1sudo yum update å®‰è£… 1sudo yum -y install nginx","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"CentOS","slug":"CentOS","permalink":"https://linweiyuan.github.io/tags/CentOS/"},{"name":"Nginx","slug":"Nginx","permalink":"https://linweiyuan.github.io/tags/Nginx/"}]},{"title":"Arch LinuxæŸ¥è¯¢æ»šåŠ¨æ¬¡æ•°","slug":"Arch-LinuxæŸ¥è¯¢æ»šåŠ¨æ¬¡æ•°","date":"2017-09-24T10:29:52.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/09/24/Arch-LinuxæŸ¥è¯¢æ»šåŠ¨æ¬¡æ•°.html","link":"","permalink":"https://linweiyuan.github.io/2017/09/24/Arch-Linux%E6%9F%A5%E8%AF%A2%E6%BB%9A%E5%8A%A8%E6%AC%A1%E6%95%B0.html","excerpt":"","text":"1echo $(head -n1 /var/log/pacman.log | cut -d &quot; &quot; -f 1,2) ä»¥æ¥ä¸€å…±æ»šäº† $(grep -c &quot;full system upgrade&quot; /var/log/pacman.log) æ¬¡","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"}]},{"title":"Linuxç»ˆç«¯ç¯å¢ƒä¸‹ä¸‹è½½JDK","slug":"Linuxç»ˆç«¯ç¯å¢ƒä¸‹ä¸‹è½½JDK","date":"2017-09-24T04:26:25.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2017/09/24/Linuxç»ˆç«¯ç¯å¢ƒä¸‹ä¸‹è½½JDK.html","link":"","permalink":"https://linweiyuan.github.io/2017/09/24/Linux%E7%BB%88%E7%AB%AF%E7%8E%AF%E5%A2%83%E4%B8%8B%E4%B8%8B%E8%BD%BDJDK.html","excerpt":"","text":"Accept License Agreementæ•ˆæœ 1wget --no-check-certificate --no-cookies --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot; http://download.oracle.com/otn-pub/java/jdk/9+181/jdk-9_linux-x64_bin.tar.gz","categories":[{"name":"å®ç”¨æŠ€å·§","slug":"å®ç”¨æŠ€å·§","permalink":"https://linweiyuan.github.io/categories/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"},{"name":"JDK","slug":"JDK","permalink":"https://linweiyuan.github.io/tags/JDK/"}]},{"title":"Linux VPSæ€§èƒ½æµ‹è¯•","slug":"Linux-VPSæ€§èƒ½æµ‹è¯•","date":"2017-09-24T02:47:15.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2017/09/24/Linux-VPSæ€§èƒ½æµ‹è¯•.html","link":"","permalink":"https://linweiyuan.github.io/2017/09/24/Linux-VPS%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95.html","excerpt":"","text":"1wget -qO- bench.sh | bash","categories":[{"name":"å®ç”¨æŠ€å·§","slug":"å®ç”¨æŠ€å·§","permalink":"https://linweiyuan.github.io/categories/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"}]},{"title":"Gitè®¾ç½®Socks5ä»£ç†","slug":"Gitè®¾ç½®Socks5ä»£ç†","date":"2017-09-07T13:52:48.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/09/07/Gitè®¾ç½®Socks5ä»£ç†.html","link":"","permalink":"https://linweiyuan.github.io/2017/09/07/Git%E8%AE%BE%E7%BD%AESocks5%E4%BB%A3%E7%90%86.html","excerpt":"","text":"12git config --global http.proxy &#x27;socks5://127.0.0.1:1080&#x27;git config --global https.proxy &#x27;socks5://127.0.0.1:1080&#x27;","categories":[{"name":"ç‰ˆæœ¬æ§åˆ¶","slug":"ç‰ˆæœ¬æ§åˆ¶","permalink":"https://linweiyuan.github.io/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://linweiyuan.github.io/tags/Git/"}]},{"title":"Androidç‰ˆæœ¬APIå†…æ ¸ç›¸å…³","slug":"Androidç‰ˆæœ¬APIå†…æ ¸ç›¸å…³","date":"2017-09-01T06:57:52.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/09/01/Androidç‰ˆæœ¬APIå†…æ ¸ç›¸å…³.html","link":"","permalink":"https://linweiyuan.github.io/2017/09/01/Android%E7%89%88%E6%9C%ACAPI%E5%86%85%E6%A0%B8%E7%9B%B8%E5%85%B3.html","excerpt":"","text":"Android Version Code Name API Level Linux Kernel 1.0 ? 1 ? 1.1 ? 2 ? 1.5 Cupcake 3 2.6.27 1.6 Donut 4 2.6.29 2.0 Eclair 5 2.6.29 2.0.1 Eclair 6 2.6.29 2.1 Eclair 7 2.6.29 2.2 Fyoro 8 2.6.32 2.3 Gingerbread 9 2.6.35 2.3.3 Gingerbread 10 2.6.35 3.0 Honeycomb 11 2.6.36 3.1 Honeycomb 12 2.6.36 3.2 Honeycomb 13 2.6.36 4.0 Ice Cream Sandwich 14 3.0.1 4.0.3 Ice Cream Sandwich 15 3.0.1 4.1 Jelly Bean 16 3.0.31 4.2 Jelly Bean 17 3.4.0 4.3 Jelly Bean 18 3.4.39 4.4 KitKat 19 3.10 4.4W KitKat 20 3.10 5.0 Lollipop 21 3.16.1 5.1 Lollipop 22 3.16.1 6.0 Marshmallow 23 3.18.10 7.0 Nougat 24 4.4.1 7.1 Nougat 25 4.4.1 8.0 Oreo 26 4.10 8.1 Oreo 27 4.10 9 Pie 28 4.4.107ã€4.9.84ã€4.14.42","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://linweiyuan.github.io/tags/Android/"}]},{"title":"Androidé˜²æ­¢è¾“å…¥æ³•å¼¹å‡ºæ¥å¯¼è‡´æ ‡é¢˜æ è¢«é¡¶ä¸Šå»","slug":"Androidé˜²æ­¢è¾“å…¥æ³•å¼¹å‡ºæ¥å¯¼è‡´æ ‡é¢˜æ è¢«é¡¶ä¸Šå»","date":"2017-08-27T14:08:59.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/08/27/Androidé˜²æ­¢è¾“å…¥æ³•å¼¹å‡ºæ¥å¯¼è‡´æ ‡é¢˜æ è¢«é¡¶ä¸Šå».html","link":"","permalink":"https://linweiyuan.github.io/2017/08/27/Android%E9%98%B2%E6%AD%A2%E8%BE%93%E5%85%A5%E6%B3%95%E5%BC%B9%E5%87%BA%E6%9D%A5%E5%AF%BC%E8%87%B4%E6%A0%87%E9%A2%98%E6%A0%8F%E8%A2%AB%E9%A1%B6%E4%B8%8A%E5%8E%BB.html","excerpt":"","text":"1android:windowSoftInputMode=&quot;adjustResize|stateHidden&quot;","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"Android","slug":"Android","permalink":"https://linweiyuan.github.io/tags/Android/"}]},{"title":"AngularJSæ˜¾ç¤ºå›¾ç‰‡éœ€è¦æ³¨æ„çš„åœ°æ–¹","slug":"AngularJSæ˜¾ç¤ºå›¾ç‰‡éœ€è¦æ³¨æ„çš„åœ°æ–¹","date":"2017-08-24T06:32:43.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/08/24/AngularJSæ˜¾ç¤ºå›¾ç‰‡éœ€è¦æ³¨æ„çš„åœ°æ–¹.html","link":"","permalink":"https://linweiyuan.github.io/2017/08/24/AngularJS%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9.html","excerpt":"","text":"AngularJSæ˜¾ç¤ºå›¾ç‰‡çš„æ—¶å€™, ä¸è¦ç›´æ¥ç”¨src, å®˜æ–¹åŸè¯æ˜¯è¿™æ ·çš„ 1234Using AngularJS markup like &#123;&#123;hash&#125;&#125; in a src attribute doesn&#x27;t work right: Thebrowser will fetch from the URL with the literal text &#123;&#123;hash&#125;&#125; until AngularJSreplaces the expression inside &#123;&#123;hash&#125;&#125;. The ngSrc directive solves thisproblem. å¦‚æœç›´æ¥ç”¨srcçš„è¯, AngularJSåœ¨æ ¹æ®srcæ˜¾ç¤ºå›¾ç‰‡ä¹‹å‰ä¼šå…ˆè¯·æ±‚ä¸€æ¬¡srcé‡Œé¢çš„çº¯å­—ç¬¦ä¸²å†…å®¹, æ¯”å¦‚æˆ‘å†™ 1&lt;img src=&quot;&#123;&#123;pic.url&#125;&#125;&quot; /&gt; åˆ·æ–°é¡µé¢ä¼šå‘ç°ä¸€ä¸ªå¥‡æ€ªçš„ç½‘ç»œè¯·æ±‚, è™½ç„¶å›¾ç‰‡è¿˜æ˜¯èƒ½æ­£å¸¸æ˜¾ç¤º 1http://127.0.0.1:8080/%7B%7Bpic.url%7D%7D å…¶å®å°±æ˜¯ 1http://127.0.0.1:8080/&#123;&#123;pic.url&#125;&#125; è€Œç”¨ 1&lt;img ng-src=&quot;&#123;&#123;pic.url&#125;&#125;&quot; /&gt; åˆ™ä¸ä¼šæœ‰è¿™é—®é¢˜","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"AngularJS","slug":"AngularJS","permalink":"https://linweiyuan.github.io/tags/AngularJS/"}]},{"title":"Gitæ‰§è¡Œaddæ“ä½œæ—¶æç¤º'warning: CRLF will be replaced by LF...'","slug":"Gitæ‰§è¡Œaddæ“ä½œæ—¶æç¤º-warning-CRLF-will-be-replaced-by-LF","date":"2017-08-22T14:26:35.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/08/22/Gitæ‰§è¡Œaddæ“ä½œæ—¶æç¤º-warning-CRLF-will-be-replaced-by-LF.html","link":"","permalink":"https://linweiyuan.github.io/2017/08/22/Git%E6%89%A7%E8%A1%8Cadd%E6%93%8D%E4%BD%9C%E6%97%B6%E6%8F%90%E7%A4%BA-warning-CRLF-will-be-replaced-by-LF.html","excerpt":"","text":"1git config --global core.autocrlf true","categories":[{"name":"ç‰ˆæœ¬æ§åˆ¶","slug":"ç‰ˆæœ¬æ§åˆ¶","permalink":"https://linweiyuan.github.io/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://linweiyuan.github.io/tags/Git/"}]},{"title":"Arch Linuxå¼€å¯BBR(é‡å¯ä¸å¤±æ•ˆ)","slug":"Arch-Linuxå¼€å¯BBR-é‡å¯ä¸å¤±æ•ˆ","date":"2017-08-22T07:10:20.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/08/22/Arch-Linuxå¼€å¯BBR-é‡å¯ä¸å¤±æ•ˆ.html","link":"","permalink":"https://linweiyuan.github.io/2017/08/22/Arch-Linux%E5%BC%80%E5%90%AFBBR-%E9%87%8D%E5%90%AF%E4%B8%8D%E5%A4%B1%E6%95%88.html","excerpt":"","text":"ç¼–è¾‘é…ç½®æ–‡ä»¶/etc/sysctl.d/99-bbr.conf 12net.core.default_qdisc=fqnet.ipv4.tcp_congestion_control=bbr é‡å¯ æ£€æŸ¥ 1lsmod | grep tcp_bbr","categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"tags":[{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"}]},{"title":"AngularJSçš„ng-includeè¦æ³¨æ„çš„åœ°æ–¹","slug":"AngularJSçš„ng-includeè¦æ³¨æ„çš„åœ°æ–¹","date":"2017-08-16T07:38:44.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/08/16/AngularJSçš„ng-includeè¦æ³¨æ„çš„åœ°æ–¹.html","link":"","permalink":"https://linweiyuan.github.io/2017/08/16/AngularJS%E7%9A%84ng-include%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9.html","excerpt":"","text":"å®˜æ–¹æ–‡æ¡£ -&gt; ngInclude, æ˜ç¡®å†™ç€ä¸€å¥è¯ 12AngularJS expression evaluating to URL. If the source is a string constant, makesure you wrap it in single quotes, e.g. src=&quot;&#x27;myPartialTemplate.html&#x27;&quot;. åŒå¼•å·é‡Œé¢çš„å•å¼•å·ä¸èƒ½å°‘","categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"AngularJS","slug":"AngularJS","permalink":"https://linweiyuan.github.io/tags/AngularJS/"}]},{"title":"Nginxä¸Šä¼ æ–‡ä»¶æŠ¥é”™'413 Request Entity Too Large'","slug":"Nginxä¸Šä¼ æ–‡ä»¶æŠ¥é”™-413-Request-Entity-Too-Large","date":"2017-08-13T06:03:34.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2017/08/13/Nginxä¸Šä¼ æ–‡ä»¶æŠ¥é”™-413-Request-Entity-Too-Large.html","link":"","permalink":"https://linweiyuan.github.io/2017/08/13/Nginx%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E6%8A%A5%E9%94%99-413-Request-Entity-Too-Large.html","excerpt":"","text":"1error: RPC failed; HTTP 413 curl 22 The requested URL returned error: 413 Request Entity Too Large ä¿®æ”¹ nginx.conf é…ç½®, æ¯”å¦‚ 100M 1client_max_body_size 100m; é‡å¯ Nginx","categories":[{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://linweiyuan.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://linweiyuan.github.io/tags/Nginx/"}]},{"title":"Redisé…ç½®å¯†ç è®¤è¯","slug":"Redisé…ç½®å¯†ç è®¤è¯","date":"2017-08-11T05:59:46.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2017/08/11/Redisé…ç½®å¯†ç è®¤è¯.html","link":"","permalink":"https://linweiyuan.github.io/2017/08/11/Redis%E9%85%8D%E7%BD%AE%E5%AF%86%E7%A0%81%E8%AE%A4%E8%AF%81.html","excerpt":"","text":"Redis é»˜è®¤è¿æ¥æ˜¯ç©ºå¯†ç , å¦‚æœè¦é…ç½®å¯†ç è®¤è¯, åªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ 1requirepass å¯†ç  é‡å¯æœåŠ¡å³å¯ç”Ÿæ•ˆ æ­¤æ—¶, å¦‚æœå•çº¯redis-cliç™»å½•, ä¼šå‘ç°æ‰§è¡Œå‘½ä»¤ä¼šæç¤ºéœ€è¦è®¤è¯ 1234[root@archlinux ~]# redis-cli127.0.0.1:6379&gt; KEYS *(error) NOAUTH Authentication required.127.0.0.1:6379&gt; æˆªå–helpç‰‡æ®µ 12345[root@archlinux ~]# redis-cli --helpredis-cli 4.0.1Usage: redis-cli [OPTIONS] [cmd [arg [arg ...]]] -a &lt;password&gt; Password to use when connecting to the server. åŠ å…¥-aå‚æ•°åä¸å†æç¤ºé”™è¯¯ 1234[root@archlinux ~]# redis-cli -a ?127.0.0.1:6379&gt; KEYS *(empty list or set)127.0.0.1:6379&gt;","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://linweiyuan.github.io/tags/Redis/"}]},{"title":"Redisé…ç½®è¿œç¨‹è¿æ¥","slug":"Redisé…ç½®è¿œç¨‹è¿æ¥","date":"2017-08-10T09:58:06.000Z","updated":"2022-11-04T01:56:25.118Z","comments":true,"path":"2017/08/10/Redisé…ç½®è¿œç¨‹è¿æ¥.html","link":"","permalink":"https://linweiyuan.github.io/2017/08/10/Redis%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5.html","excerpt":"","text":"æ³¨é‡Šbind 1# bind 127.0.0.1 å…³æ‰ä¿æŠ¤æ¨¡å¼ 1protected-mode no é‡å¯ Redis","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"https://linweiyuan.github.io/tags/Redis/"}]},{"title":"Gitæ‰¹é‡ä¿®æ”¹æäº¤è€…ä¿¡æ¯","slug":"Gitæ‰¹é‡ä¿®æ”¹æäº¤è€…ä¿¡æ¯","date":"2017-08-09T22:14:20.000Z","updated":"2022-11-04T01:56:25.114Z","comments":true,"path":"2017/08/09/Gitæ‰¹é‡ä¿®æ”¹æäº¤è€…ä¿¡æ¯.html","link":"","permalink":"https://linweiyuan.github.io/2017/08/09/Git%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9%E6%8F%90%E4%BA%A4%E8%80%85%E4%BF%A1%E6%81%AF.html","excerpt":"","text":"å®˜æ–¹æ–¹æ³• -&gt; changing-author-info å…‹éš†ä»“åº“bare 1git clone gitä»“åº“åœ°å€ --bare æ›´æ”¹æäº¤è€…ä¿¡æ¯ -&gt; OLD_EMAIL,CORRECT_NAME,CORRECT_EMAIL 1234567891011121314151617#!/bin/shgit filter-branch --env-filter &#x27;OLD_EMAIL=&quot;your-old-email@example.com&quot;CORRECT_NAME=&quot;Your Correct Name&quot;CORRECT_EMAIL=&quot;your-correct-email@example.com&quot;if [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]then export GIT_COMMITTER_NAME=&quot;$CORRECT_NAME&quot; export GIT_COMMITTER_EMAIL=&quot;$CORRECT_EMAIL&quot;fiif [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]then export GIT_AUTHOR_NAME=&quot;$CORRECT_NAME&quot; export GIT_AUTHOR_EMAIL=&quot;$CORRECT_EMAIL&quot;fi&#x27; --tag-name-filter cat -- --branches --tags 1git push --force --tags origin &#x27;refs/heads/*&#x27;","categories":[{"name":"ç‰ˆæœ¬æ§åˆ¶","slug":"ç‰ˆæœ¬æ§åˆ¶","permalink":"https://linweiyuan.github.io/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://linweiyuan.github.io/tags/Git/"}]}],"categories":[{"name":"ç¨‹åºè®¾è®¡","slug":"ç¨‹åºè®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"},{"name":"Kotlin","slug":"ç¨‹åºè®¾è®¡/Kotlin","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/Kotlin/"},{"name":"ç¤¾åŒºæ´»åŠ¨","slug":"ç¤¾åŒºæ´»åŠ¨","permalink":"https://linweiyuan.github.io/categories/%E7%A4%BE%E5%8C%BA%E6%B4%BB%E5%8A%A8/"},{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://linweiyuan.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"å®¹å™¨æŠ€æœ¯","slug":"å®¹å™¨æŠ€æœ¯","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/"},{"name":"Kubernetes","slug":"å®¹å™¨æŠ€æœ¯/Kubernetes","permalink":"https://linweiyuan.github.io/categories/%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF/Kubernetes/"},{"name":"Github Actions","slug":"Github-Actions","permalink":"https://linweiyuan.github.io/categories/Github-Actions/"},{"name":"æ¶æ„è®¾è®¡","slug":"æ¶æ„è®¾è®¡","permalink":"https://linweiyuan.github.io/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"},{"name":"ELK","slug":"ELK","permalink":"https://linweiyuan.github.io/categories/ELK/"},{"name":"æ¶ˆæ¯é˜Ÿåˆ—","slug":"æ¶ˆæ¯é˜Ÿåˆ—","permalink":"https://linweiyuan.github.io/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://linweiyuan.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"name":"JVM","slug":"JVM","permalink":"https://linweiyuan.github.io/categories/JVM/"},{"name":"ç½‘ç»œå®‰å…¨","slug":"ç½‘ç»œå®‰å…¨","permalink":"https://linweiyuan.github.io/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"},{"name":"è™šæ‹Ÿæœº","slug":"è™šæ‹Ÿæœº","permalink":"https://linweiyuan.github.io/categories/%E8%99%9A%E6%8B%9F%E6%9C%BA/"},{"name":"Java","slug":"ç¨‹åºè®¾è®¡/Java","permalink":"https://linweiyuan.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/Java/"},{"name":"æ„å»ºå·¥å…·","slug":"æ„å»ºå·¥å…·","permalink":"https://linweiyuan.github.io/categories/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/"},{"name":"å®ç”¨æŠ€å·§","slug":"å®ç”¨æŠ€å·§","permalink":"https://linweiyuan.github.io/categories/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"},{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://linweiyuan.github.io/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"name":"ç‰ˆæœ¬æ§åˆ¶","slug":"ç‰ˆæœ¬æ§åˆ¶","permalink":"https://linweiyuan.github.io/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"}],"tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://linweiyuan.github.io/tags/Kotlin/"},{"name":"Spring Boot","slug":"Spring-Boot","permalink":"https://linweiyuan.github.io/tags/Spring-Boot/"},{"name":"Spring Boot Starter","slug":"Spring-Boot-Starter","permalink":"https://linweiyuan.github.io/tags/Spring-Boot-Starter/"},{"name":"Go","slug":"Go","permalink":"https://linweiyuan.github.io/tags/Go/"},{"name":"React","slug":"React","permalink":"https://linweiyuan.github.io/tags/React/"},{"name":"sqlc","slug":"sqlc","permalink":"https://linweiyuan.github.io/tags/sqlc/"},{"name":"Postgres","slug":"Postgres","permalink":"https://linweiyuan.github.io/tags/Postgres/"},{"name":"Gin","slug":"Gin","permalink":"https://linweiyuan.github.io/tags/Gin/"},{"name":"Ant Design","slug":"Ant-Design","permalink":"https://linweiyuan.github.io/tags/Ant-Design/"},{"name":"Java","slug":"Java","permalink":"https://linweiyuan.github.io/tags/Java/"},{"name":"IntelliJ IDEA Conf","slug":"IntelliJ-IDEA-Conf","permalink":"https://linweiyuan.github.io/tags/IntelliJ-IDEA-Conf/"},{"name":"Kubernetes","slug":"Kubernetes","permalink":"https://linweiyuan.github.io/tags/Kubernetes/"},{"name":"Golang","slug":"Golang","permalink":"https://linweiyuan.github.io/tags/Golang/"},{"name":"Pod","slug":"Pod","permalink":"https://linweiyuan.github.io/tags/Pod/"},{"name":"pgAdmin","slug":"pgAdmin","permalink":"https://linweiyuan.github.io/tags/pgAdmin/"},{"name":"Ingress","slug":"Ingress","permalink":"https://linweiyuan.github.io/tags/Ingress/"},{"name":"Github Actions","slug":"Github-Actions","permalink":"https://linweiyuan.github.io/tags/Github-Actions/"},{"name":"i3","slug":"i3","permalink":"https://linweiyuan.github.io/tags/i3/"},{"name":"i3bar","slug":"i3bar","permalink":"https://linweiyuan.github.io/tags/i3bar/"},{"name":"Docker","slug":"Docker","permalink":"https://linweiyuan.github.io/tags/Docker/"},{"name":"Arch Linux","slug":"Arch-Linux","permalink":"https://linweiyuan.github.io/tags/Arch-Linux/"},{"name":"Rancher","slug":"Rancher","permalink":"https://linweiyuan.github.io/tags/Rancher/"},{"name":"CentOS","slug":"CentOS","permalink":"https://linweiyuan.github.io/tags/CentOS/"},{"name":"CAP","slug":"CAP","permalink":"https://linweiyuan.github.io/tags/CAP/"},{"name":"BASE","slug":"BASE","permalink":"https://linweiyuan.github.io/tags/BASE/"},{"name":"Netty","slug":"Netty","permalink":"https://linweiyuan.github.io/tags/Netty/"},{"name":"NIO","slug":"NIO","permalink":"https://linweiyuan.github.io/tags/NIO/"},{"name":"JDK18","slug":"JDK18","permalink":"https://linweiyuan.github.io/tags/JDK18/"},{"name":"Elasticsearch","slug":"Elasticsearch","permalink":"https://linweiyuan.github.io/tags/Elasticsearch/"},{"name":"Logstash","slug":"Logstash","permalink":"https://linweiyuan.github.io/tags/Logstash/"},{"name":"Kibana","slug":"Kibana","permalink":"https://linweiyuan.github.io/tags/Kibana/"},{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"https://linweiyuan.github.io/tags/RabbitMQ/"},{"name":"Redis","slug":"Redis","permalink":"https://linweiyuan.github.io/tags/Redis/"},{"name":"Thread","slug":"Thread","permalink":"https://linweiyuan.github.io/tags/Thread/"},{"name":"JVM","slug":"JVM","permalink":"https://linweiyuan.github.io/tags/JVM/"},{"name":"Spring","slug":"Spring","permalink":"https://linweiyuan.github.io/tags/Spring/"},{"name":"MySQL","slug":"MySQL","permalink":"https://linweiyuan.github.io/tags/MySQL/"},{"name":"MVCC","slug":"MVCC","permalink":"https://linweiyuan.github.io/tags/MVCC/"},{"name":"Session","slug":"Session","permalink":"https://linweiyuan.github.io/tags/Session/"},{"name":"Cookie","slug":"Cookie","permalink":"https://linweiyuan.github.io/tags/Cookie/"},{"name":"UUID","slug":"UUID","permalink":"https://linweiyuan.github.io/tags/UUID/"},{"name":"MongoDB","slug":"MongoDB","permalink":"https://linweiyuan.github.io/tags/MongoDB/"},{"name":"ZooKeeper","slug":"ZooKeeper","permalink":"https://linweiyuan.github.io/tags/ZooKeeper/"},{"name":"Snowflake","slug":"Snowflake","permalink":"https://linweiyuan.github.io/tags/Snowflake/"},{"name":"WeChatPay","slug":"WeChatPay","permalink":"https://linweiyuan.github.io/tags/WeChatPay/"},{"name":"CORS","slug":"CORS","permalink":"https://linweiyuan.github.io/tags/CORS/"},{"name":"Windows","slug":"Windows","permalink":"https://linweiyuan.github.io/tags/Windows/"},{"name":"Vulnerability","slug":"Vulnerability","permalink":"https://linweiyuan.github.io/tags/Vulnerability/"},{"name":"JSPX","slug":"JSPX","permalink":"https://linweiyuan.github.io/tags/JSPX/"},{"name":"Anko","slug":"Anko","permalink":"https://linweiyuan.github.io/tags/Anko/"},{"name":"XSS","slug":"XSS","permalink":"https://linweiyuan.github.io/tags/XSS/"},{"name":"Python","slug":"Python","permalink":"https://linweiyuan.github.io/tags/Python/"},{"name":"pip","slug":"pip","permalink":"https://linweiyuan.github.io/tags/pip/"},{"name":"VirtualBox","slug":"VirtualBox","permalink":"https://linweiyuan.github.io/tags/VirtualBox/"},{"name":"Android","slug":"Android","permalink":"https://linweiyuan.github.io/tags/Android/"},{"name":"i3status","slug":"i3status","permalink":"https://linweiyuan.github.io/tags/i3status/"},{"name":"Linux","slug":"Linux","permalink":"https://linweiyuan.github.io/tags/Linux/"},{"name":"NTFS","slug":"NTFS","permalink":"https://linweiyuan.github.io/tags/NTFS/"},{"name":"Unauthorized","slug":"Unauthorized","permalink":"https://linweiyuan.github.io/tags/Unauthorized/"},{"name":"Javassist","slug":"Javassist","permalink":"https://linweiyuan.github.io/tags/Javassist/"},{"name":"Reflection","slug":"Reflection","permalink":"https://linweiyuan.github.io/tags/Reflection/"},{"name":"Maven","slug":"Maven","permalink":"https://linweiyuan.github.io/tags/Maven/"},{"name":"Nexus","slug":"Nexus","permalink":"https://linweiyuan.github.io/tags/Nexus/"},{"name":"ThreadPool","slug":"ThreadPool","permalink":"https://linweiyuan.github.io/tags/ThreadPool/"},{"name":"Flask","slug":"Flask","permalink":"https://linweiyuan.github.io/tags/Flask/"},{"name":"Dockerfile","slug":"Dockerfile","permalink":"https://linweiyuan.github.io/tags/Dockerfile/"},{"name":"openssl","slug":"openssl","permalink":"https://linweiyuan.github.io/tags/openssl/"},{"name":"Nginx","slug":"Nginx","permalink":"https://linweiyuan.github.io/tags/Nginx/"},{"name":"Server Send Event","slug":"Server-Send-Event","permalink":"https://linweiyuan.github.io/tags/Server-Send-Event/"},{"name":"Registry","slug":"Registry","permalink":"https://linweiyuan.github.io/tags/Registry/"},{"name":"WebSocket","slug":"WebSocket","permalink":"https://linweiyuan.github.io/tags/WebSocket/"},{"name":"Privoxy","slug":"Privoxy","permalink":"https://linweiyuan.github.io/tags/Privoxy/"},{"name":"ASPX","slug":"ASPX","permalink":"https://linweiyuan.github.io/tags/ASPX/"},{"name":"AVD","slug":"AVD","permalink":"https://linweiyuan.github.io/tags/AVD/"},{"name":"FFmpeg","slug":"FFmpeg","permalink":"https://linweiyuan.github.io/tags/FFmpeg/"},{"name":"youtube-dl","slug":"youtube-dl","permalink":"https://linweiyuan.github.io/tags/youtube-dl/"},{"name":"Nextcloud","slug":"Nextcloud","permalink":"https://linweiyuan.github.io/tags/Nextcloud/"},{"name":"JSP","slug":"JSP","permalink":"https://linweiyuan.github.io/tags/JSP/"},{"name":"CoreOS","slug":"CoreOS","permalink":"https://linweiyuan.github.io/tags/CoreOS/"},{"name":"cURL","slug":"cURL","permalink":"https://linweiyuan.github.io/tags/cURL/"},{"name":"Wget","slug":"Wget","permalink":"https://linweiyuan.github.io/tags/Wget/"},{"name":"Google Drive","slug":"Google-Drive","permalink":"https://linweiyuan.github.io/tags/Google-Drive/"},{"name":"IDEA","slug":"IDEA","permalink":"https://linweiyuan.github.io/tags/IDEA/"},{"name":"Spring Cloud","slug":"Spring-Cloud","permalink":"https://linweiyuan.github.io/tags/Spring-Cloud/"},{"name":"Zuul","slug":"Zuul","permalink":"https://linweiyuan.github.io/tags/Zuul/"},{"name":"Docker Compose","slug":"Docker-Compose","permalink":"https://linweiyuan.github.io/tags/Docker-Compose/"},{"name":"Feign","slug":"Feign","permalink":"https://linweiyuan.github.io/tags/Feign/"},{"name":"Hystrix","slug":"Hystrix","permalink":"https://linweiyuan.github.io/tags/Hystrix/"},{"name":"deepin-wechat","slug":"deepin-wechat","permalink":"https://linweiyuan.github.io/tags/deepin-wechat/"},{"name":"Shell","slug":"Shell","permalink":"https://linweiyuan.github.io/tags/Shell/"},{"name":"jsoup","slug":"jsoup","permalink":"https://linweiyuan.github.io/tags/jsoup/"},{"name":"Fcitx","slug":"Fcitx","permalink":"https://linweiyuan.github.io/tags/Fcitx/"},{"name":"Jenkins","slug":"Jenkins","permalink":"https://linweiyuan.github.io/tags/Jenkins/"},{"name":"war","slug":"war","permalink":"https://linweiyuan.github.io/tags/war/"},{"name":"GitLab","slug":"GitLab","permalink":"https://linweiyuan.github.io/tags/GitLab/"},{"name":"Socket","slug":"Socket","permalink":"https://linweiyuan.github.io/tags/Socket/"},{"name":"UDP","slug":"UDP","permalink":"https://linweiyuan.github.io/tags/UDP/"},{"name":"Swing","slug":"Swing","permalink":"https://linweiyuan.github.io/tags/Swing/"},{"name":"WebLogic","slug":"WebLogic","permalink":"https://linweiyuan.github.io/tags/WebLogic/"},{"name":"Ant","slug":"Ant","permalink":"https://linweiyuan.github.io/tags/Ant/"},{"name":"Tomcat","slug":"Tomcat","permalink":"https://linweiyuan.github.io/tags/Tomcat/"},{"name":"KDE","slug":"KDE","permalink":"https://linweiyuan.github.io/tags/KDE/"},{"name":"TigerVNC","slug":"TigerVNC","permalink":"https://linweiyuan.github.io/tags/TigerVNC/"},{"name":"Git","slug":"Git","permalink":"https://linweiyuan.github.io/tags/Git/"},{"name":"Manjaro","slug":"Manjaro","permalink":"https://linweiyuan.github.io/tags/Manjaro/"},{"name":"RTL8192EU","slug":"RTL8192EU","permalink":"https://linweiyuan.github.io/tags/RTL8192EU/"},{"name":"Oracle-XE","slug":"Oracle-XE","permalink":"https://linweiyuan.github.io/tags/Oracle-XE/"},{"name":"JEECG","slug":"JEECG","permalink":"https://linweiyuan.github.io/tags/JEECG/"},{"name":"Oracle","slug":"Oracle","permalink":"https://linweiyuan.github.io/tags/Oracle/"},{"name":"SQL","slug":"SQL","permalink":"https://linweiyuan.github.io/tags/SQL/"},{"name":"jQuery","slug":"jQuery","permalink":"https://linweiyuan.github.io/tags/jQuery/"},{"name":"Node.js","slug":"Node-js","permalink":"https://linweiyuan.github.io/tags/Node-js/"},{"name":"JDK","slug":"JDK","permalink":"https://linweiyuan.github.io/tags/JDK/"},{"name":"AngularJS","slug":"AngularJS","permalink":"https://linweiyuan.github.io/tags/AngularJS/"}]}